<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8" /><title>VISHNU - The guide of the administrator</title><meta name="generator" content="DocBook XSL Stylesheets V1.75.2" /></head><body><div class="book" title="VISHNU - The guide of the administrator"><div class="titlepage"><div><div><h1 class="title"><a id="idm14549656"></a>VISHNU - The guide of the administrator</h1></div><div><div class="author"><h3 class="author"><span class="firstname">Benjamin</span> <span class="surname">Isnard</span></h3></div></div><div><div class="author"><h3 class="author"><span class="firstname">Daouda</span> <span class="surname">Traoré</span></h3></div></div><div><div class="author"><h3 class="author"><span class="firstname">Eugène</span> <span class="surname">Pamba Capo-Chichi</span></h3></div></div><div><div class="author"><h3 class="author"><span class="firstname">Kevin</span> <span class="surname">Coulomb</span></h3></div></div><div><div class="author"><h3 class="author"><span class="firstname">Ibrahima</span> <span class="surname">Cissé</span></h3></div></div><div><div class="revhistory"><table border="1" width="100%" summary="Revision history"><tr><th align="left" valign="top" colspan="3"><b>Revision History</b></th></tr><tr><td align="left">Revision 1</td><td align="left">08/03/2011</td><td align="left">K. COULOMB</td></tr><tr><td align="left" colspan="3">
          
        <p>Initial version of the document, only for the UMS module</p></td></tr><tr><td align="left">Revision 2</td><td align="left">18/03/2011</td><td align="left">K. COULOMB</td></tr><tr><td align="left" colspan="3">
          
        <p>Add a paragraph to launch manually using the forwarders and config files</p></td></tr><tr><td align="left">Revision 3</td><td align="left">22/03/2011</td><td align="left">K. COULOMB</td></tr><tr><td align="left" colspan="3">
          
        <p>Add the web services</p></td></tr><tr><td align="left">Revision 4</td><td align="left">11/05/2011</td><td align="left">K. COULOMB, B.ISNARD</td></tr><tr><td align="left" colspan="3">
          
          
          
        <p>Rewrite how to deploy with the config files.</p><p>Add a paragraph for the sendmail function.</p><p>Add the TMS data.</p></td></tr><tr><td align="left">Revision 5</td><td align="left">18/05/2011</td><td align="left">B.ISNARD</td></tr><tr><td align="left" colspan="3">
          
        <p>Add the configuration parameter dbConnectionsNb.</p></td></tr><tr><td align="left">Revision 6</td><td align="left">10/06/2011</td><td align="left">K.COULOMB</td></tr><tr><td align="left" colspan="3">
          
        <p>Documentation for IMS.</p></td></tr><tr><td align="left">Revision 7</td><td align="left">15/06/2011</td><td align="left">I.CISSE</td></tr><tr><td align="left" colspan="3">
          
        <p>Documentation for FMS.</p></td></tr><tr><td align="left">Revision 8</td><td align="left">22/06/2011</td><td align="left">B.ISNARD</td></tr><tr><td align="left" colspan="3">
          
        <p>Add the option ENABLE_SWIG.</p></td></tr><tr><td align="left">Revision 9</td><td align="left">24/06/2011</td><td align="left">I.CISSE</td></tr><tr><td align="left" colspan="3">
          
        <p>Add the option vishnuMachineId in the UMS, IMS and FMS 
            configuration files.</p></td></tr><tr><td align="left">Revision 10</td><td align="left">13/07/2011</td><td align="left">K.COULOMB</td></tr><tr><td align="left" colspan="3">
          
        <p>Update document after the first feedbacks .</p></td></tr><tr><td align="left">Revision 11</td><td align="left">11/08/2011</td><td align="left">D.TRAORE</td></tr><tr><td align="left" colspan="3">
          <p>Take SLURM into account</p></td></tr><tr><td align="left">Revision 12</td><td align="left">23/08/2011</td><td align="left">K.COULOMB</td></tr><tr><td align="left" colspan="3">
          <p>Add link on ow to install postgre/mysql databases. Delete the update database part (the creation script contains everything). Add a reference to 'VISHNU_API'</p></td></tr><tr><td align="left">Revision 13</td><td align="left">14/12/2011</td><td align="left">K.COULOMB</td></tr><tr><td align="left" colspan="3">
          <p>
            Update for the new dietForwarder
        </p></td></tr><tr><td align="left">Revision 14</td><td align="left">15/12/2011</td><td align="left">I.CISSE</td></tr><tr><td align="left" colspan="3">
          <p>
            Update the section concerning the configuration of the SSH keys for FMS.
        </p></td></tr><tr><td align="left">Revision 15</td><td align="left">16/12/2011</td><td align="left">D.TRAORE</td></tr><tr><td align="left" colspan="3">
          <p>
            Add the section to configure the SSH keys in TMS.
        </p></td></tr><tr><td align="left">Revision 16</td><td align="left">30/01/2012</td><td align="left">K. COULOMB</td></tr><tr><td align="left" colspan="3">
          <p>
            Update the DIET version dependency.
        </p></td></tr><tr><td align="left">Revision 17</td><td align="left">27/02/2012</td><td align="left">K. COULOMB</td></tr><tr><td align="left" colspan="3">
          <p>
            Add the list of the boost libraries necessaries.
        </p></td></tr><tr><td align="left">Revision 18</td><td align="left">02/03/2012</td><td align="left">D.TRAORE</td></tr><tr><td align="left" colspan="3">
          <p>Add the LSF batch</p></td></tr><tr><td align="left">Revision 19</td><td align="left">22/03/2012</td><td align="left">K. COULOMB</td></tr><tr><td align="left" colspan="3">
          <p>Add the LDAP support</p></td></tr><tr><td align="left">Revision 20</td><td align="left">11/04/2012</td><td align="left">E. PAMBA CAPO-CHICHI</td></tr><tr><td align="left" colspan="3">
          <p>Add the Grid Engine batch handling</p></td></tr><tr><td align="left">Revision 21</td><td align="left">30/05/2012</td><td align="left">E. PAMBA CAPO-CHICHI</td></tr><tr><td align="left" colspan="3">
        <p> Add version of LoadLeveler, GLIBC for libcrypt and ssh</p></td></tr><tr><td align="left">Revision 22</td><td align="left">27/08/2012</td><td align="left">K. COULOMB</td></tr><tr><td align="left" colspan="3">
        <p> Add new TMS compilation documentation</p></td></tr><tr><td align="left">Revision 23</td><td align="left">01/10/2012</td><td align="left">K. Chakode</td></tr><tr><td align="left" colspan="3">
        <p> Adding a prerequisites section and refining of the installation process</p></td></tr></table></div></div></div><hr /></div><div class="toc"><p><b>Table of Contents</b></p><dl><dt><span class="chapter"><a href="#idp82936">1. Presentation of the document</a></span></dt><dd><dl><dt><span class="section"><a href="#idp83296">Aim</a></span></dt><dt><span class="section"><a href="#idp84008">Prerequisites</a></span></dt><dt><span class="section"><a href="#idp86368">Structure of the document</a></span></dt></dl></dd><dt><span class="chapter"><a href="#idp90704">2. Definitions</a></span></dt><dd><dl><dt><span class="section"><a href="#idp91040">Acronyms</a></span></dt><dt><span class="section"><a href="#idp95848">References</a></span></dt><dt><span class="section"><a href="#idp98344">Glossary</a></span></dt></dl></dd><dt><span class="chapter"><a href="#idp104064">3. Installing from the sources</a></span></dt><dd><dl><dt><span class="section"><a href="#idp104416">Objectives</a></span></dt><dt><span class="section"><a href="#idp105592">Prerequisite</a></span></dt><dt><span class="section"><a href="#idp119072"> Compilation of the sources </a></span></dt></dl></dd><dt><span class="chapter"><a href="#idp146328">4. Configuration of the database</a></span></dt><dd><dl><dt><span class="section"><a href="#idp147144">Use a MySQL Database</a></span></dt><dt><span class="section"><a href="#idp153776">Use a PostGreSQL Database</a></span></dt><dt><span class="section"><a href="#idp160488">Use LDAP</a></span></dt></dl></dd><dt><span class="chapter"><a href="#idp164552">5. Installation of the web services</a></span></dt><dd><dl><dt><span class="section"><a href="#idp164912">Prerequisite</a></span></dt><dt><span class="section"><a href="#idp168672">Installation of JBoss</a></span></dt><dt><span class="section"><a href="#idp175240">Installation of the WS modules with JBoss</a></span></dt><dd><dl><dt><span class="section"><a href="#idp175608">Files to install</a></span></dt><dt><span class="section"><a href="#idp187320">Environment variable to be defined</a></span></dt><dt><span class="section"><a href="#idp189088">Starting the JBoss server with the WS</a></span></dt></dl></dd></dl></dd><dt><span class="chapter"><a href="#idp191800">6. Deploying VISHNU </a></span></dt><dd><dl><dt><span class="section"><a href="#idp192144">On a single network</a></span></dt><dt><span class="section"><a href="#idp228320">Deployment on various networks <span class="bold"><strong>with DIET version &gt;= 2.8</strong></span></a></span></dt><dt><span class="section"><a href="#idp249448">Deployment on various networks <span class="bold"><strong>with DIET version 2.7</strong></span></a></span></dt><dt><span class="section"><a href="#idp276080">Example of a MA configuration file</a></span></dt><dt><span class="section"><a href="#idp276776">Example of a DIET SeD configuration file</a></span></dt><dt><span class="section"><a href="#idp277472">Example of a UMS configuration file</a></span></dt><dt><span class="section"><a href="#idp278488">Example of a TMS SeD configuration file </a></span></dt><dt><span class="section"><a href="#idp279800">Example of a FMS SeD configuration file </a></span></dt><dt><span class="section"><a href="#idp280792">Example of a forwarder configuration file </a></span></dt><dt><span class="section"><a href="#idp281536">Example of a LogCentral configuration file </a></span></dt><dt><span class="section"><a href="#idp282320">Configuration to send mails in VISHNU</a></span></dt><dt><span class="section"><a href="#idp290264">Configuration of the private/public ssh keys for FMS</a></span></dt><dt><span class="section"><a href="#idp294464">Configuration of the private/public keys for TMS
  </a></span></dt><dt><span class="section"><a href="#idp29328"> Test to execute a client command throught the shell API
  </a></span></dt></dl></dd><dt><span class="chapter"><a href="#idp34400">7. Administration</a></span></dt><dd><dl><dt><span class="section"><a href="#idp34744">Presentation</a></span></dt><dt><span class="section"><a href="#idp35976">User handling (UMS)</a></span></dt><dt><span class="section"><a href="#idp314464">Handling machines (UMS+IMS)</a></span></dt><dt><span class="section"><a href="#idp318448">Handling the plateform (UMS)</a></span></dt><dt><span class="section"><a href="#idp322312">Admin options in user functions(UMS+FMS)</a></span></dt><dt><span class="section"><a href="#idp326712">Handling processes in VISHNU and load shedding(IMS)</a></span></dt><dt><span class="section"><a href="#idp329688">Monitoring the machines (IMS)</a></span></dt><dt><span class="section"><a href="#idp332568">Defining the format of the identifiers (IMS)</a></span></dt></dl></dd><dt><span class="reference"><a href="#idp337504">I. UMS Command reference</a></span></dt><dd><dl><dt><span class="refentrytitle"><a href="#idp337856">vishnu_add_user</a></span><span class="refpurpose"> — adds a new VISHNU user</span></dt><dt><span class="refentrytitle"><a href="#idp357384">vishnu_update_user</a></span><span class="refpurpose"> — updates the user information except the userId and the password</span></dt><dt><span class="refentrytitle"><a href="#idp383448">vishnu_delete_user</a></span><span class="refpurpose"> — removes a user from VISHNU</span></dt><dt><span class="refentrytitle"><a href="#idp400568">vishnu_reset_password</a></span><span class="refpurpose"> — resets the password of a user</span></dt><dt><span class="refentrytitle"><a href="#idp417672">vishnu_save_configuration</a></span><span class="refpurpose"> — saves the configuration of VISHNU</span></dt><dt><span class="refentrytitle"><a href="#idp432848">vishnu_restore_configuration</a></span><span class="refpurpose"> — restores the configuration of VISHNU</span></dt><dt><span class="refentrytitle"><a href="#idp448800">vishnu_add_machine</a></span><span class="refpurpose"> — adds a new machine in VISHNU</span></dt><dt><span class="refentrytitle"><a href="#idp467720">vishnu_update_machine</a></span><span class="refpurpose"> — updates machine description</span></dt><dt><span class="refentrytitle"><a href="#idp493960">vishnu_delete_machine</a></span><span class="refpurpose"> — removes a machine from VISHNU</span></dt><dt><span class="refentrytitle"><a href="#idp510504">vishnu_list_users</a></span><span class="refpurpose"> — lists VISHNU users</span></dt><dt><span class="refentrytitle"><a href="#idp529680">vishnu_configure_default_option</a></span><span class="refpurpose"> — configures a default option value</span></dt><dt><span class="refentrytitle"><a href="#idp548144">vishnu_add_auth_system</a></span><span class="refpurpose"> — adds a new user-authentication system in VISHNU</span></dt><dt><span class="refentrytitle"><a href="#idp569152">vishnu_update_auth_system</a></span><span class="refpurpose"> — updates a user-authentication system in VISHNU</span></dt><dt><span class="refentrytitle"><a href="#idp599560">vishnu_delete_auth_system</a></span><span class="refpurpose"> — removes a user-authentication system from VISHNU</span></dt></dl></dd><dt><span class="reference"><a href="#idp616232">II. UMS C++ API Reference</a></span></dt><dd><dl><dt><span class="refentrytitle"><a href="#idp616584">addUser</a></span><span class="refpurpose"> — adds a new VISHNU user</span></dt><dt><span class="refentrytitle"><a href="#idp634960">updateUser</a></span><span class="refpurpose"> — updates the user information except the userId and the password</span></dt><dt><span class="refentrytitle"><a href="#idp649304">deleteUser</a></span><span class="refpurpose"> — removes a user from VISHNU</span></dt><dt><span class="refentrytitle"><a href="#idp662464">resetPassword</a></span><span class="refpurpose"> — resets the password of a user</span></dt><dt><span class="refentrytitle"><a href="#idp676800">saveConfiguration</a></span><span class="refpurpose"> — saves the configuration of VISHNU</span></dt><dt><span class="refentrytitle"><a href="#idp688368">restoreConfiguration</a></span><span class="refpurpose"> — restores the configuration of VISHNU</span></dt><dt><span class="refentrytitle"><a href="#idp700304">addMachine</a></span><span class="refpurpose"> — adds a new machine in VISHNU</span></dt><dt><span class="refentrytitle"><a href="#idp713752">updateMachine</a></span><span class="refpurpose"> — updates machine description</span></dt><dt><span class="refentrytitle"><a href="#idp726816">deleteMachine</a></span><span class="refpurpose"> — removes a machine from VISHNU</span></dt><dt><span class="refentrytitle"><a href="#idp739344">listUsers</a></span><span class="refpurpose"> — lists VISHNU users</span></dt><dt><span class="refentrytitle"><a href="#idp753144">configureDefaultOption</a></span><span class="refpurpose"> — configures a default option value</span></dt><dt><span class="refentrytitle"><a href="#idp767248">addAuthSystem</a></span><span class="refpurpose"> — adds a new user-authentication system in VISHNU</span></dt><dt><span class="refentrytitle"><a href="#idp780744">updateAuthSystem</a></span><span class="refpurpose"> — updates a user-authentication system in VISHNU</span></dt><dt><span class="refentrytitle"><a href="#idp794752">deleteAuthSystem</a></span><span class="refpurpose"> — removes a user-authentication system from VISHNU</span></dt></dl></dd><dt><span class="reference"><a href="#idp807384">III. UMS Python API Reference</a></span></dt><dd><dl><dt><span class="refentrytitle"><a href="#idp807736">VISHNU.addUser</a></span><span class="refpurpose"> — adds a new VISHNU user</span></dt><dt><span class="refentrytitle"><a href="#idp824632">VISHNU.updateUser</a></span><span class="refpurpose"> — updates the user information except the userId and the password</span></dt><dt><span class="refentrytitle"><a href="#idp841520">VISHNU.deleteUser</a></span><span class="refpurpose"> — removes a user from VISHNU</span></dt><dt><span class="refentrytitle"><a href="#idp857104">VISHNU.resetPassword</a></span><span class="refpurpose"> — resets the password of a user</span></dt><dt><span class="refentrytitle"><a href="#idp874272">VISHNU.saveConfiguration</a></span><span class="refpurpose"> — saves the configuration of VISHNU</span></dt><dt><span class="refentrytitle"><a href="#idp888048">VISHNU.restoreConfiguration</a></span><span class="refpurpose"> — restores the configuration of VISHNU</span></dt><dt><span class="refentrytitle"><a href="#idp902168">VISHNU.addMachine</a></span><span class="refpurpose"> — adds a new machine in VISHNU</span></dt><dt><span class="refentrytitle"><a href="#idp918072">VISHNU.updateMachine</a></span><span class="refpurpose"> — updates machine description</span></dt><dt><span class="refentrytitle"><a href="#idp933568">VISHNU.deleteMachine</a></span><span class="refpurpose"> — removes a machine from VISHNU</span></dt><dt><span class="refentrytitle"><a href="#idp948456">VISHNU.listUsers</a></span><span class="refpurpose"> — lists VISHNU users</span></dt><dt><span class="refentrytitle"><a href="#idp964272">VISHNU.configureDefaultOption</a></span><span class="refpurpose"> — configures a default option value</span></dt><dt><span class="refentrytitle"><a href="#idp980888">VISHNU.addAuthSystem</a></span><span class="refpurpose"> — adds a new user-authentication system in VISHNU</span></dt><dt><span class="refentrytitle"><a href="#idp996824">VISHNU.updateAuthSystem</a></span><span class="refpurpose"> — updates a user-authentication system in VISHNU</span></dt><dt><span class="refentrytitle"><a href="#idp1013344">VISHNU.deleteAuthSystem</a></span><span class="refpurpose"> — removes a user-authentication system from VISHNU</span></dt></dl></dd><dt><span class="reference"><a href="#idp1028336">IV. IMS Command reference</a></span></dt><dd><dl><dt><span class="refentrytitle"><a href="#idp1028688">vishnu_get_processes</a></span><span class="refpurpose"> — displays the list of the VISHNU processes running on machines</span></dt><dt><span class="refentrytitle"><a href="#idp1041776">vishnu_set_system_info</a></span><span class="refpurpose"> — updates the system information of a machine</span></dt><dt><span class="refentrytitle"><a href="#idp1057328">vishnu_set_system_threshold</a></span><span class="refpurpose"> — sets a threshold on a machine of a system</span></dt><dt><span class="refentrytitle"><a href="#idp1071256">vishnu_get_system_threshold</a></span><span class="refpurpose"> — gets a system threshold on a machine</span></dt><dt><span class="refentrytitle"><a href="#idp1086512">vishnu_define_user_identifier</a></span><span class="refpurpose"> — defines the shape of the identifiers automatically generated for the users</span></dt><dt><span class="refentrytitle"><a href="#idp1099488">vishnu_define_machine_identifier</a></span><span class="refpurpose"> — defines the shape of the identifiers automatically generated for the machines</span></dt><dt><span class="refentrytitle"><a href="#idp1112528">vishnu_define_job_identifier</a></span><span class="refpurpose"> — defines the shape of the identifiers automatically generated for the jobs</span></dt><dt><span class="refentrytitle"><a href="#idp1125448">vishnu_define_transfer_identifier</a></span><span class="refpurpose"> — defines the shape of the identifiers automatically generated for the file transfers</span></dt><dt><span class="refentrytitle"><a href="#idp1138416">vishnu_define_auth_identifier</a></span><span class="refpurpose"> — defines the shape of the identifiers automatically generated for the authentication system</span></dt><dt><span class="refentrytitle"><a href="#idp1151392">vishnu_load_shed</a></span><span class="refpurpose"> — sheds load on a machine</span></dt><dt><span class="refentrytitle"><a href="#idp1165088">vishnu_set_update_frequency</a></span><span class="refpurpose"> — sets the update frequency of the IMS tables</span></dt><dt><span class="refentrytitle"><a href="#idp1177504">vishnu_stop</a></span><span class="refpurpose"> — To stop (and do not try to relaunch) a SeD</span></dt><dt><span class="refentrytitle"><a href="#idp1190272">vishnu_restart</a></span><span class="refpurpose"> — To restart a SeD or a MA</span></dt><dt><span class="refentrytitle"><a href="#idp1205752">vishnu_define_work_identifier</a></span><span class="refpurpose"> — defines the shape of the identifiers automatically generated for the work</span></dt></dl></dd><dt><span class="reference"><a href="#idp1219440">V. IMS C++ API Reference</a></span></dt><dd><dl><dt><span class="refentrytitle"><a href="#idp1219792">getProcesses</a></span><span class="refpurpose"> — displays the list of the VISHNU processes running on machines</span></dt><dt><span class="refentrytitle"><a href="#idp1228872">setSystemInfo</a></span><span class="refpurpose"> — updates the system information of a machine</span></dt><dt><span class="refentrytitle"><a href="#idp1237344">setSystemThreshold</a></span><span class="refpurpose"> — sets a threshold on a machine of a system</span></dt><dt><span class="refentrytitle"><a href="#idp1246048">getSystemThreshold</a></span><span class="refpurpose"> — gets a system threshold on a machine</span></dt><dt><span class="refentrytitle"><a href="#idp1255728">defineUserIdentifier</a></span><span class="refpurpose"> — defines the shape of the identifiers automatically generated for the users</span></dt><dt><span class="refentrytitle"><a href="#idp1264592">defineMachineIdentifier</a></span><span class="refpurpose"> — defines the shape of the identifiers automatically generated for the machines</span></dt><dt><span class="refentrytitle"><a href="#idp1273504">defineJobIdentifier</a></span><span class="refpurpose"> — defines the shape of the identifiers automatically generated for the jobs</span></dt><dt><span class="refentrytitle"><a href="#idp1282288">defineTransferIdentifier</a></span><span class="refpurpose"> — defines the shape of the identifiers automatically generated for the file transfers</span></dt><dt><span class="refentrytitle"><a href="#idp1291128">defineAuthIdentifier</a></span><span class="refpurpose"> — defines the shape of the identifiers automatically generated for the authentication system</span></dt><dt><span class="refentrytitle"><a href="#idp1299984">loadShed</a></span><span class="refpurpose"> — sheds load on a machine</span></dt><dt><span class="refentrytitle"><a href="#idp1310568">setUpdateFrequency</a></span><span class="refpurpose"> — sets the update frequency of the IMS tables</span></dt><dt><span class="refentrytitle"><a href="#idp1318896">stop</a></span><span class="refpurpose"> — To stop (and do not try to relaunch) a SeD</span></dt><dt><span class="refentrytitle"><a href="#idp1327280">restart</a></span><span class="refpurpose"> — To restart a SeD or a MA</span></dt><dt><span class="refentrytitle"><a href="#idp1336776">defineWorkIdentifier</a></span><span class="refpurpose"> — defines the shape of the identifiers automatically generated for the work</span></dt></dl></dd><dt><span class="reference"><a href="#idp1345680">VI. IMS Python API Reference</a></span></dt><dd><dl><dt><span class="refentrytitle"><a href="#idp1346032">VISHNU.getProcesses</a></span><span class="refpurpose"> — displays the list of the VISHNU processes running on machines</span></dt><dt><span class="refentrytitle"><a href="#idp1356552">VISHNU.setSystemInfo</a></span><span class="refpurpose"> — updates the system information of a machine</span></dt><dt><span class="refentrytitle"><a href="#idp1366856">VISHNU.setSystemThreshold</a></span><span class="refpurpose"> — sets a threshold on a machine of a system</span></dt><dt><span class="refentrytitle"><a href="#idp1377400">VISHNU.getSystemThreshold</a></span><span class="refpurpose"> — gets a system threshold on a machine</span></dt><dt><span class="refentrytitle"><a href="#idp1388616">VISHNU.defineUserIdentifier</a></span><span class="refpurpose"> — defines the shape of the identifiers automatically generated for the users</span></dt><dt><span class="refentrytitle"><a href="#idp1400000">VISHNU.defineMachineIdentifier</a></span><span class="refpurpose"> — defines the shape of the identifiers automatically generated for the machines</span></dt><dt><span class="refentrytitle"><a href="#idp1410752">VISHNU.defineJobIdentifier</a></span><span class="refpurpose"> — defines the shape of the identifiers automatically generated for the jobs</span></dt><dt><span class="refentrytitle"><a href="#idp1421384">VISHNU.defineTransferIdentifier</a></span><span class="refpurpose"> — defines the shape of the identifiers automatically generated for the file transfers</span></dt><dt><span class="refentrytitle"><a href="#idp1432064">VISHNU.defineAuthIdentifier</a></span><span class="refpurpose"> — defines the shape of the identifiers automatically generated for the authentication system</span></dt><dt><span class="refentrytitle"><a href="#idp1443416">VISHNU.loadShed</a></span><span class="refpurpose"> — sheds load on a machine</span></dt><dt><span class="refentrytitle"><a href="#idp1455896">VISHNU.setUpdateFrequency</a></span><span class="refpurpose"> — sets the update frequency of the IMS tables</span></dt><dt><span class="refentrytitle"><a href="#idp1466072">VISHNU.stop</a></span><span class="refpurpose"> — To stop (and do not try to relaunch) a SeD</span></dt><dt><span class="refentrytitle"><a href="#idp1476272">VISHNU.restart</a></span><span class="refpurpose"> — To restart a SeD or a MA</span></dt><dt><span class="refentrytitle"><a href="#idp1487584">VISHNU.defineWorkIdentifier</a></span><span class="refpurpose"> — defines the shape of the identifiers automatically generated for the work</span></dt></dl></dd></dl></div><div class="chapter" title="Chapter 1. Presentation of the document"><div class="titlepage"><div><div><h2 class="title"><a id="idp82936"></a>Chapter 1. Presentation of the document</h2></div></div></div><div class="toc"><p><b>Table of Contents</b></p><dl><dt><span class="section"><a href="#idp83296">Aim</a></span></dt><dt><span class="section"><a href="#idp84008">Prerequisites</a></span></dt><dt><span class="section"><a href="#idp86368">Structure of the document</a></span></dt></dl></div><div class="section" title="Aim"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a id="idp83296"></a>Aim</h2></div></div></div><p>
		This document presents the installation, the configuration and the management of the components of the VISHNU toolkit.
      </p></div><div class="section" title="Prerequisites"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a id="idp84008"></a>Prerequisites</h2></div></div></div><p>
		To ensure a good comfort during the reading of the document, the reader should have at least a basic experience 
		in system administration on GNU/Linux environments. In particular and according to the operating system, a good knowledge 
        of a package manager, such as <span class="emphasis"><em>apt-get</em></span>, <span class="emphasis"><em>dpkg</em></span>, <span class="emphasis"><em>rpm</em></span>, 
		<span class="emphasis"><em>yum</em></span> or <span class="emphasis"><em>zypper</em></span>, would be very helpful to ease the searching and the installation 
        of VISHNU's dependencies.
      </p><p>Furthermore, we assume that you have read and understood the technical architecture of VISHNU. If not, refer to the document [ARCH], and especially in the chapter 4.</p></div><div class="section" title="Structure of the document"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a id="idp86368"></a>Structure of the document</h2></div></div></div><p>This document contains the following parts:
      </p><p>
	</p><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem"><p>Definitions</p></li><li class="listitem"><p>Installation</p></li><li class="listitem"><p>Installation of the web services</p></li><li class="listitem"><p>How to deploy</p></li><li class="listitem"><p>Administration</p></li><li class="listitem"><p>Reference of the commands</p></li><li class="listitem"><p>Reference of the C++ API </p></li><li class="listitem"><p>Reference of the Python API</p></li></ul></div><p>
      </p></div></div><div class="chapter" title="Chapter 2. Definitions"><div class="titlepage"><div><div><h2 class="title"><a id="idp90704"></a>Chapter 2. Definitions</h2></div></div></div><div class="toc"><p><b>Table of Contents</b></p><dl><dt><span class="section"><a href="#idp91040">Acronyms</a></span></dt><dt><span class="section"><a href="#idp95848">References</a></span></dt><dt><span class="section"><a href="#idp98344">Glossary</a></span></dt></dl></div><div class="section" title="Acronyms"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a id="idp91040"></a>Acronyms</h2></div></div></div><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem"><p>DB: Database, a centralized point providing mechanisms to store and retrieve application data in a effective way</p></li><li class="listitem"><p>FMS: File Management Service.</p></li><li class="listitem"><p>IMS: Information Management Service.</p></li><li class="listitem"><p>LDAP: Lightweight Directory Access Protocol, is a protocol enabling to manage distributed directory services.</p></li><li class="listitem"><p> MA: "Master Agent": Is a element of DIET allowing to distribute the requests between the clients and the servers.</p></li><li class="listitem"><p>SQL: Language of request on the databases.</p></li><li class="listitem"><p>TMS: Task Management Service.</p></li><li class="listitem"><p>UMS: User Management Service</p></li><li class="listitem"><p>WS: Web Services.</p></li></ul></div></div><div class="section" title="References"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a id="idp95848"></a>References</h2></div></div></div><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem"><p>[ARCH] D1.1g-VISHNU Technical Architecture: description of the architecture of the VISHNU application. </p></li><li class="listitem"><p>[DIET_USERGUIDE] DIET User Guide: DIET is an open source tool used by VISHNU.</p></li><li class="listitem"><p>[VISHNU_USERMANUAL] VISHNU User Manual.</p></li><li class="listitem"><p>[VISHNU_API] VISHNU API: API VISHNU containing the signatures and the definition of the objects used by VISHNU.</p></li></ul></div></div><div class="section" title="Glossary"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a id="idp98344"></a>Glossary</h2></div></div></div><p>
	</p><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem"><p>FMS Client: It represents the programs allowing one to access the services of the FMS SeD. </p></li><li class="listitem"><p>IMS Client: It represents the programs allowing one to access the services of the IMS SeD. </p></li><li class="listitem"><p>TMS Client: It represents the programs allowing one to access the services of the TMS SeD. </p></li><li class="listitem"><p>UMS Client: It represents the programs allowing one to access the services of the UMS SeD. </p></li><li class="listitem"><p>gateway: It represents a machine sets before the gateway of the clusters. </p></li><li class="listitem"><p>FMS SeD: It represents the program containing and executing the services of the FMS module. </p></li><li class="listitem"><p>IMS SeD: It represents the program containing and executing the services of the IMS module. </p></li><li class="listitem"><p>TMS SeD: It represents the program containing and executing the services of the TMS module. </p></li><li class="listitem"><p>UMS SeD: It represents the program containing and executing the services of the UMS module. </p></li><li class="listitem"><p>SysFera-DS: Is an open source middleware developed by SysFera. It is comprised of set of software that includes, among others, DIET and LOGSERVICE.</p></li></ul></div><p>
      </p></div></div><div class="chapter" title="Chapter 3. Installing from the sources"><div class="titlepage"><div><div><h2 class="title"><a id="idp104064"></a>Chapter 3. Installing from the sources</h2></div></div></div><div class="toc"><p><b>Table of Contents</b></p><dl><dt><span class="section"><a href="#idp104416">Objectives</a></span></dt><dt><span class="section"><a href="#idp105592">Prerequisite</a></span></dt><dt><span class="section"><a href="#idp119072"> Compilation of the sources </a></span></dt></dl></div><div class="section" title="Objectives"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a id="idp104416"></a>Objectives</h2></div></div></div><p> This chapter presents how to install VISHNU from the sources. It explains
        how to install both clients and servers (the installation of a server implies the 
        installation of the associated client). The UMS module is necessary for all; any other module 
        can be installed independantly from each other. It does not prevent using the services even thought servers
        are on another machine. Nevertheless, to enable IMS to load shed a machine, the corresponding
        modules (TMS and/or FMS) must be installed with IMS and running on the machine.</p></div><div class="section" title="Prerequisite"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a id="idp105592"></a>Prerequisite</h2></div></div></div><p>According to the modules to install, you may need the following software dependencies:</p><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem"><p>Dependency for all the modules VISHNU:</p><div class="itemizedlist"><ul class="itemizedlist" type="circle"><li class="listitem"><p>GCC: Version 4.4.3 or higher.</p></li><li class="listitem"><p>CMAKE: Version 2.8 or higher.</p></li><li class="listitem"><p>GNU Make or Ninja: Executable generators. Alternatively to Make, Ninja generator is more faster and 
				is helpful for reducing the compilation duration. Especially when you need to compile several modules 
				of VISHNU on the same machine.</p></li><li class="listitem"><p>BOOST: Version 1.46.1 or higher. At least the following modules <span class="emphasis"><em>program_options, 
              date_time, thread, filesystem, system, unit_test_framework, serialization, random</em></span> and 
              <span class="emphasis"><em>regex</em></span> should be installed.</p></li><li class="listitem"><p>OMNIORB: Version or 4.1.4 or higher.</p></li><li class="listitem"><p>GLIBC: Version 2.7 or higher.</p></li><li class="listitem"><p>OpenSSH: Version 4.2 or higher.</p></li><li class="listitem"><p>DIET: Version 2.8 with LOG SERVICE enabled.</p></li><li class="listitem"><p>Library to access the database:</p><p>VISHNU requires a database; MySQL and PostGreSQL databases are supported. 
              According to the type of the database engine, you need to install the appropriate API while taking care about the supported versions:</p><div class="itemizedlist"><ul class="itemizedlist" type="square"><li class="listitem"><p>API PostGreSQL (PGSQL-API): Version 8.0 or higher.</p></li><li class="listitem"><p>API MySQL: Version 5.1 or higher.</p></li></ul></div></li></ul></div></li><li class="listitem"><p>Optional dependencies for UMS:</p><div class="itemizedlist"><ul class="itemizedlist" type="circle"><li class="listitem"><p>OpenLDAP: Version 2.4 or higher.</p></li></ul></div></li><li class="listitem"><p>According to the underlying TMS Bacth Scheduler, you may need to install one of the following API:</p><div class="itemizedlist"><ul class="itemizedlist" type="circle"><li class="listitem"><p>Torque API: Tested with the version 2.3.6.</p></li><li class="listitem"><p>IBM LoadLeveler API: Tested with the version 3.5.1.14</p></li><li class="listitem"><p>SLURM API: Tested with the versions v2.2.x, 2.3.x and 2.4.x.</p></li><li class="listitem"><p>LSF API: Tested with the version v7.0.6.134609.</p></li><li class="listitem"><p>Grid Engine API: Tested with the version 2011.11.</p></li></ul></div></li><li class="listitem"><p>Optional dependency:</p><div class="itemizedlist"><ul class="itemizedlist" type="circle"><li class="listitem"><p>SWIG: 1.3.40. WARNING: The version 2 is not supported.</p></li><li class="listitem"><p>JAVA SDK: Version 1.6</p></li><li class="listitem"><p>Python: Version 2.x, x &gt;= 5.</p></li></ul></div></li></ul></div></div><div class="section" title="Compilation of the sources"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a id="idp119072"></a> Compilation of the sources </h2></div></div></div><p>VISHNU uses the CMake compilation system and follows the actual uses.
	The main options are:
	</p><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem"><p>
	      BUILD_TESTING, compile the tests (OFF by default).
	    </p></li><li class="listitem"><p>
	      CLIENT_ONLY, do not compile the servers (OFF by defaut). Otherwize, both clients and servers are compiled.
	    </p></li><li class="listitem"><p>
	      CMAKE_INSTALL_PREFIX, directory to install (/usr/local by default on the *nix plateform)
	    </p></li><li class="listitem"><p>
	      COMPILE_TMS, compile the TMS module (OFF by default). If ON, COMPILE_UMS must be activated and
              the following options VISHNU_BATCH and VISHNU_BATCH_VERSION must be filled.
	    </p></li><li class="listitem"><p>
	      COMPILE_IMS, compile the IMS module (OFF by default). If ON, COMPILE_UMS must be activated.
	    </p></li><li class="listitem"><p>
	      COMPILE_FMS, compile the FMS module (OFF by default). If ON, COMPILE_UMS must be activated.
	    </p></li><li class="listitem"><p>
	      COMPILE_UMS, compile the UMS module (ON by default).
	    </p></li><li class="listitem"><p>
	      ENABLE_PYTHON, to compile the python API (OFF by default).
	    </p></li><li class="listitem"><p>
	      ENABLE_JAVA, to compile the java for the WS API (OFF par default).
	    </p></li><li class="listitem"><p>
	      VISHNU_USE_LDAP, to activate the LDAP support to authenticate (OFF by default).
	    </p></li><li class="listitem"><p>
              ENABLE_SWIG, to generate the code for the python and java modules (otherwise use a precompiled version if the flags are activated) (OFF by default). This option must be activated if some VISHNU modules are not compiled. It requires the swig package to compile (see dependencies).
            </p></li><li class="listitem"><p>
	      VISHNU_BATCH, compile the TMS SeD for the corresponding batch (TORQUE by default). The (BATCHNAME)_INCLUDE_DIR and (BATCHNAME)_LIB variables must be filled.</p><div class="itemizedlist"><ul class="itemizedlist" type="circle"><li class="listitem"><p>
                  LOADLEVELER_INCLUDE_DIR indicate the absolute path to the llapi.h file
                </p></li><li class="listitem"><p>
                  LOADLEVELER_LIB indicate the absolute path to the llapi.so library
                </p></li><li class="listitem"><p>
                  TORQUE_INCLUDE_DIR indicate the absolute path to the pbs_ifl.h file.
                </p></li><li class="listitem"><p>
                  TORQUE_LIB indicates the absolute path to the libtorque.so library.
                </p></li><li class="listitem"><p>
                  SLURM_INCLUDE_DIR indicate the absolute path to the file slurm/slurm.h
                </p></li><li class="listitem"><p>
                  SLURM_LIB indicate the absolute path to the libslurm.so library.
                </p></li><li class="listitem"><p>
                  LSF_INCLUDE_DIR indicate the absolute path to the lsf/lsbatch.h file
                </p></li><li class="listitem"><p>
                  LSBATCH_LIB indicate the absolute path to the libbat.so library.
                </p></li><li class="listitem"><p>
                  LSF_LIB indicate the absolute path to the liblsf.so  library
                </p></li><li class="listitem"><p>
                  SGE_ROOT indicate the absolute path to the directory where Grid Engine is installed
                </p></li><li class="listitem"><p>
                  SGE_INCLUDE_DIR indicate the absolute path to the drmaa.h file
                </p></li><li class="listitem"><p>
                  SGE_BIN_DIR indique the absolute path to the  Grid Engine binaries
                </p></li><li class="listitem"><p>
                  SGE_LIB indicate the absolute path to the libdrmaa.so library
                </p></li></ul></div></li><li class="listitem"><p>
              VISHNU_BATCH_VERSION indique la version du batch scheduler utilisée
            </p></li></ul></div><p>
        </p><p>
        For instance, the following steps allow to compile and install the client and the server sides of UMS and TMS in /opt/vishnu. There, we use TORQUE as backend to TMS while enabling the Python API.
      </p><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem"><p>1. Create a build repository at the root of the vishnu project and go in</p><p>$ <span class="emphasis"><em>mkdir build</em></span></p><p>$ <span class="emphasis"><em>cd build</em></span></p></li><li class="listitem"><p>2. Generate the Makefile</p><div class="itemizedlist"><ul class="itemizedlist" type="circle"><li class="listitem"><p>Using Make</p><p>$ <span class="emphasis"><em>cmake -DCMAKE_INSTALL_PREFIX=/opt/vishnu  \</em></span></p><p><span class="emphasis"><em>  -DENABLE_SWIG=ON  \</em></span></p><p><span class="emphasis"><em>  -DENABLE_PYTHON=ON  \</em></span></p><p><span class="emphasis"><em>  -DCOMPILE_UMS=ON  \</em></span></p><p><span class="emphasis"><em>  -DCOMPILE_TMS=ON  \</em></span></p><p><span class="emphasis"><em>  -DVISHNU_BATCH=TORQUE  \</em></span></p><p><span class="emphasis"><em>  -DVISHNU_BATCH_VERSION=2.3  \</em></span></p><p><span class="emphasis"><em>  -DTORQUE_DIR=/opt/torque</em></span></p></li><li class="listitem"><p>Using Ninja: requires to set the generator to Ninja. See the flag CMAKE_GENERATOR.</p><p>$ <span class="emphasis"><em>cmake -DCMAKE_INSTALL_PREFIX=/opt/vishnu  \</em></span></p><p><span class="emphasis"><em>  -DENABLE_SWIG=ON  \</em></span></p><p><span class="emphasis"><em>  -DENABLE_PYTHON=ON \</em></span></p><p><span class="emphasis"><em>  -DCOMPILE_UMS=ON  \</em></span></p><p><span class="emphasis"><em>  -DCOMPILE_TMS=ON  \</em></span></p><p><span class="emphasis"><em>  -DVISHNU_BATCH=TORQUE  \</em></span></p><p><span class="emphasis"><em>  -DVISHNU_BATCH_VERSION=2.3  \</em></span></p><p><span class="emphasis"><em>  -DTORQUE_DIR=/opt/torque \</em></span></p><p><span class="bold"><strong>  -DCMAKE_GENERATOR=Ninja</strong></span></p></li></ul></div></li><li class="listitem"><p>3. Launch the compilation</p><div class="itemizedlist"><ul class="itemizedlist" type="circle"><li class="listitem"><p>Using Make</p><p>$ <span class="emphasis"><em>make -j 2</em></span></p><p>The option -j 2 allows to run the compilation with two processes.</p></li><li class="listitem"><p>Using Ninja</p><p>$ <span class="emphasis"><em>ninja -j 2</em></span></p><p>The option -j 2 allows to run the compilation with two processes.</p></li></ul></div></li><li class="listitem"><p>4. Installing the binaries</p><p>$ <span class="emphasis"><em>make install</em></span></p><p>This step may require root privileges.</p></li></ul></div><p><span class="bold"><strong>Note</strong></span>: Do not forget to add the install 
        directory/bin to PATH.</p></div></div><div class="chapter" title="Chapter 4. Configuration of the database"><div class="titlepage"><div><div><h2 class="title"><a id="idp146328"></a>Chapter 4. Configuration of the database</h2></div></div></div><div class="toc"><p><b>Table of Contents</b></p><dl><dt><span class="section"><a href="#idp147144">Use a MySQL Database</a></span></dt><dt><span class="section"><a href="#idp153776">Use a PostGreSQL Database</a></span></dt><dt><span class="section"><a href="#idp160488">Use LDAP</a></span></dt></dl></div><p>The files to configure the DB are available in the core/database repository of the sources of VISHNU. Only postgresql and mysql are currently supported. 
Only one database is necessary for all the components of a VISHNU infrastructure (UMS, IMS, FMS and TMS).</p><div class="section" title="Use a MySQL Database"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a id="idp147144"></a>Use a MySQL Database</h2></div></div></div><p>This section assumes that you already have a MySQL installation ready to use. Otherwise refer to the MySQL documentation to learn how to install it.</p><p>You also need to have a root access on your MySQL installation.</p><p>The setup of the Vishnu database requires the scripts <span class="emphasis"><em>mysql_create.sql</em></span> and <span class="emphasis"><em>database_init.sql</em></span> located in <span class="emphasis"><em>./core/database</em></span> from the source tree. The first script (mysql_create.sql) allows to create the database schema while the second one allows to carry out the first data initialization.</p><p>To create and initialize the database, perform the following steps:
    	</p><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem"><p>Connect to the MySQL server as root:</p><p>$ <span class="emphasis"><em>mysql -h mysql@server -u root -p </em></span>    #replace mysql@server with the address of your MySql server</p></li><li class="listitem"><p>Create the Vishnu's database</p><p>$ <span class="emphasis"><em>create database vishnu ; </em></span></p></li><li class="listitem"><p>Connect to the database</p><p>$ <span class="emphasis"><em>use vishnu ; </em></span></p></li><li class="listitem"><p>Create the database schema</p><p>$ <span class="emphasis"><em>source /path/to/mysql_create.sql </em></span></p></li><li class="listitem"><p>Initialize the database</p><p>$ <span class="emphasis"><em>source /path/to/database_init.sql</em></span></p></li></ul></div><p>
    </p></div><div class="section" title="Use a PostGreSQL Database"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a id="idp153776"></a>Use a PostGreSQL Database</h2></div></div></div><p>In this section, we assume that you have a PostGreSQL installation ready to use. Otherwise refer to the PostGreSQL documentation to learn how to install it.</p><p>You also need to have a root access on your PostGreSQL installation.</p><p>The setup of the Vishnu database requires the scripts <span class="emphasis"><em>postgre_create.sql</em></span> and <span class="emphasis"><em>database_init.sql</em></span> located in <span class="emphasis"><em>./core/database</em></span> from the source tree. The first script (<span class="emphasis"><em>postgre_create.sql</em></span>) allows to create the database schema while the second one allows to carry out the first data initialization.</p><p>To create and initialize the database, perform the following steps from the PostGreSQL server:
    	</p><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem"><p>Log as 'postgres' user (root):</p><p>$ <span class="emphasis"><em>su postgres</em></span></p></li><li class="listitem"><p>Create the Vishnu's database</p><p>$ <span class="emphasis"><em>createdb vishnu ; </em></span></p></li><li class="listitem"><p>Connect to the database</p><p>$ <span class="emphasis"><em>psql vishnu ; </em></span></p></li><li class="listitem"><p>Create the database schema</p><p>$ <span class="emphasis"><em>\i /path/to/mysql_create.sql </em></span></p></li><li class="listitem"><p>Initialize the database</p><p>$ <span class="emphasis"><em>\i /path/to/database_init.sql</em></span></p></li></ul></div><p>
    </p></div><div class="section" title="Use LDAP"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a id="idp160488"></a>Use LDAP</h2></div></div></div><p>We also assume here that you have a LDAP installation ready to use. Otherwise refer to the LDAP documentation to learn how to install it. On some GNU/Linux distribution, you may also install that from your package manager. On Debian systems, you need to install the following packages: <span class="emphasis"><em>slapd, libldap-2.4-2, libldap2-dev</em></span> and <span class="emphasis"><em>ldap-utils</em></span>.</p><p>To install with LDAP authentication support, the flag VISHNU_USE_LDAP must be enabled at the compilation time. Once the installation is completed, you need to set the parameter 'authenticationType' from the UMS configuration file accordingly. Possible values of this parameter are:
        </p><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem"><p>
              UMS: Authenticate using only the database
            </p></li><li class="listitem"><p>
              LDAPUMS: For each couple (username, password), try to authenticate using LDAP first then the UMS database
            </p></li><li class="listitem"><p>
              UMSLDAP: For each couple (username, password), try to authenticate using the UMS database first then LDAP
            </p></li><li class="listitem"><p>
              LDAP: Authenticate using only LDAP
            </p></li></ul></div><p>
      </p></div></div><div class="chapter" title="Chapter 5. Installation of the web services"><div class="titlepage"><div><div><h2 class="title"><a id="idp164552"></a>Chapter 5. Installation of the web services</h2></div></div></div><div class="toc"><p><b>Table of Contents</b></p><dl><dt><span class="section"><a href="#idp164912">Prerequisite</a></span></dt><dt><span class="section"><a href="#idp168672">Installation of JBoss</a></span></dt><dt><span class="section"><a href="#idp175240">Installation of the WS modules with JBoss</a></span></dt><dd><dl><dt><span class="section"><a href="#idp175608">Files to install</a></span></dt><dt><span class="section"><a href="#idp187320">Environment variable to be defined</a></span></dt><dt><span class="section"><a href="#idp189088">Starting the JBoss server with the WS</a></span></dt></dl></dd></dl></div><div class="section" title="Prerequisite"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a id="idp164912"></a>Prerequisite</h2></div></div></div><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem"><p>Install <span class="bold"><strong>Java 1.6</strong></span> (command 'sudo apt-get install openjdk-6-jdk' or 'sudo apt-get install sun-java6-jdk' under Linux Debian) and check the value of the JAVA_HOME (set it if necessary).</p></li><li class="listitem"><p>Install the desired modules (advice all with the flag CLIENT_ONLY)and the java options -DENABLE_JAVA=ON and -DENABLE_SWIG (<span class="bold"><strong>Note</strong></span>:
            This prerequisite is optionnal because the jars are already available in the distribution.</p></li><li class="listitem"><p>Install <span class="bold"><strong>Maven 2</strong></span> to compile the jars (<span class="bold"><strong>Note</strong></span>:
            This prerequisite is optional because the jars are already available in the distribution. Moreover Maven needs an internet connexion</p></li></ul></div></div><div class="section" title="Installation of JBoss"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a id="idp168672"></a>Installation of JBoss</h2></div></div></div><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem"><p>Download the package JBOSSAS: (the binary version is available) at http://www.jboss.org/jbossas/downloads =&gt; version 5.1.0.GA</p></li><li class="listitem"><p>Download the package JBOSSWS: (the binary version is available) at http://www.jboss.org/jbossws/downloads/ =&gt; version 3.3.1.GA</p></li><li class="listitem"><p>Unzip the archive of the package JBOSSAS 5.1.0</p></li><li class="listitem"><p> Define the environment variable JBOSS_HOME on the unzipped repository. For instance in the .bashrc file:</p><p>'export JBOSS_HOME=/home/toto/jboss-5.1.0.GA'</p></li><li class="listitem"><p>Unzip the archive of the package JBOSSWS 3.3.1 and go in the created repository</p></li><li class="listitem"><p> Copy the file 'ant.properties.example' in 'ant.properties'</p></li><li class="listitem"><p> Edit the newly created 'ant.properties' file. Set the value of the jboss510.home variable to the value JBOSS_HOME value. Note, if a version a jboss different to 5.1.0 is used, it is the corresponding variable that must be set.</p></li><li class="listitem"><p> Launch the command 'ant deploy-jboss510'. Note, if a version a jboss different to 5.1.0 is used, it is the corresponding version that must be used in the command.</p></li><li class="listitem"><p> The server can be launched running the script in JBOSS_HOME/bin/run.sh. To make the server available from an other machine, the '-b adressIP' option must be used. With adressIP representing the IP of the machien where the jboss server runs. Do not forget to check if the firewall enables the 8080 port.</p></li><li class="listitem"><p><span class="bold"><strong>Verification of the installation:</strong></span>
            To check that the jboss server is running and that the WS is avaible, you can go to the URL 'http://localhost:8080/jbossws' (or 'http://adresseIP:8080/jbossws') and check that the page display the right version of jboss (jbossws-cxf-3.3.1.GA).</p></li></ul></div></div><div class="section" title="Installation of the WS modules with JBoss"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a id="idp175240"></a>Installation of the WS modules with JBoss</h2></div></div></div><div class="section" title="Files to install"><div class="titlepage"><div><div><h3 class="title"><a id="idp175608"></a>Files to install</h3></div></div></div><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem"><p>VISHNULib-1.0-SNAPSHOT.jar
              </p><div class="itemizedlist"><ul class="itemizedlist" type="circle"><li class="listitem"><p>Contains the internal classes linking the JAVA (JNI) and the C++.</p></li><li class="listitem"><p>Copy it in <span class="bold"><strong>JBOSS_HOME/server/default/lib</strong></span>.</p></li><li class="listitem"><p>Changing the jar implies restarting the jboss server.</p></li><li class="listitem"><p>Compilation (if necessary)
                    </p><div class="itemizedlist"><ul class="itemizedlist" type="square"><li class="listitem"><p>Go to the VISHNULib directory</p></li><li class="listitem"><p>Make 'mvn install' (may last long the first time)</p></li><li class="listitem"><p>The .jar file created is in the target directory</p></li></ul></div><p>
                </p></li></ul></div><p>
            </p></li><li class="listitem"><p>WSAPI.jar
              </p><div class="itemizedlist"><ul class="itemizedlist" type="circle"><li class="listitem"><p>Contain the classes from the WSDL and the implementation of the WS.</p></li><li class="listitem"><p>Copy in <span class="bold"><strong>JBOSS_HOME/server/default/deploy</strong></span>.</p></li><li class="listitem"><p>Can be updated without restarting the JBOSS server.</p></li><li class="listitem"><p>Compilation (if necessary)
                    </p><div class="itemizedlist"><ul class="itemizedlist" type="square"><li class="listitem"><p>Go in the WSAPI directoy after having a valid VISHNULib-1.0-SNAPSHOT.jar jar</p></li><li class="listitem"><p>Make 'mvn install' (may last long the first time) </p></li><li class="listitem"><p>The .jar file created is in the target directory.</p></li><li class="listitem"><p>Rename it to WSAP.jar and set it in JBOSS (necessary)</p></li></ul></div><p>
                </p></li></ul></div><p>
            </p></li><li class="listitem"><p>libVISHNU.so
              </p><div class="itemizedlist"><ul class="itemizedlist" type="circle"><li class="listitem"><p> Necessary to use the WS in VISHNU. This library is obtained when compiling with the ENABLE_JAVA option.</p></li><li class="listitem"><p>It is installed in the lib directory with the other libs.</p></li><li class="listitem"><p>If there is a problem when deploying the JBOSS server, make sure it is located in the LD_LIBRARY_PATH.</p></li></ul></div><p>
            </p></li></ul></div></div><div class="section" title="Environment variable to be defined"><div class="titlepage"><div><div><h3 class="title"><a id="idp187320"></a>Environment variable to be defined</h3></div></div></div><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem"><p>VISHNU_CONFIG_FILE: contains the full path to the client configuration file. Si the user guide [VISHNU_USER_GUIDE] for its content.
              If the execution fails with a message linked to the initialisation of the library, check this variable.
            </p></li><li class="listitem"><p>LD_LIBRARY_PATH: contains the paths of the directories containing the VISHNU libraries, like libVISHNU.so.</p></li></ul></div></div><div class="section" title="Starting the JBoss server with the WS"><div class="titlepage"><div><div><h3 class="title"><a id="idp189088"></a>Starting the JBoss server with the WS</h3></div></div></div><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem"><p> After installing as presented previously, the JBoss server must be started.</p></li><li class="listitem"><p><span class="bold"><strong>Verification of the installation:</strong></span> To check that the JBoss server is correctly running and that the UMS web service is activated, go to the URL at 'http://localhost:8080/jbossws/services' (ou 'http://adresseIP:8080/jbossws/services') and check that the
              "service endPoint": <span class="bold"><strong>VISHNUUMSPortImpl</strong></span> is active.</p></li></ul></div></div></div></div><div class="chapter" title="Chapter 6. Deploying VISHNU"><div class="titlepage"><div><div><h2 class="title"><a id="idp191800"></a>Chapter 6. Deploying VISHNU </h2></div></div></div><div class="toc"><p><b>Table of Contents</b></p><dl><dt><span class="section"><a href="#idp192144">On a single network</a></span></dt><dt><span class="section"><a href="#idp228320">Deployment on various networks <span class="bold"><strong>with DIET version &gt;= 2.8</strong></span></a></span></dt><dt><span class="section"><a href="#idp249448">Deployment on various networks <span class="bold"><strong>with DIET version 2.7</strong></span></a></span></dt><dt><span class="section"><a href="#idp276080">Example of a MA configuration file</a></span></dt><dt><span class="section"><a href="#idp276776">Example of a DIET SeD configuration file</a></span></dt><dt><span class="section"><a href="#idp277472">Example of a UMS configuration file</a></span></dt><dt><span class="section"><a href="#idp278488">Example of a TMS SeD configuration file </a></span></dt><dt><span class="section"><a href="#idp279800">Example of a FMS SeD configuration file </a></span></dt><dt><span class="section"><a href="#idp280792">Example of a forwarder configuration file </a></span></dt><dt><span class="section"><a href="#idp281536">Example of a LogCentral configuration file </a></span></dt><dt><span class="section"><a href="#idp282320">Configuration to send mails in VISHNU</a></span></dt><dt><span class="section"><a href="#idp290264">Configuration of the private/public ssh keys for FMS</a></span></dt><dt><span class="section"><a href="#idp294464">Configuration of the private/public keys for TMS
  </a></span></dt><dt><span class="section"><a href="#idp29328"> Test to execute a client command throught the shell API
  </a></span></dt></dl></div><div class="section" title="On a single network"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a id="idp192144"></a>On a single network</h2></div></div></div><p>Modules can be deployed manually. Deployment will be described using the 4.1 figure of the [ARCH] document as an example. To simplify, we suppose the elements on the same area  "dedicated to VISHNU"  will be deployed on the same machine called <span class="bold"><strong>gateway</strong></span>.</p><p><span class="bold"><strong>IMPORTANT NOTES:</strong></span> 
		</p><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem"><p> It is advised to avoid launching the same SeD on a machine more than once.</p></li><li class="listitem"><p> There is a known bug under debian with boost file system, used by VISHNU. 
				The report can be found there: https://svn.boost.org/trac/boost/ticket/4688. 
				If when launching a SeD the following error message appears: std::runtime_error: 
				locale::facet::_S_create_c_locale name not valid, making "export LANG=C" should fix it.
			</p></li><li class="listitem"><p> The VISHNU user 'root' must have a local account on each machine where there is an IMS server. 
				The associated unix account will be used to relaunch the SeD.
			</p></li></ul></div><p>
    </p><p>Now that these points are clear, we can launch the environment. 
	For starting your VISHNU environment successfully, you need to perform the following steps careful:</p><div class="orderedlist"><ol class="orderedlist" type="1"><li class="listitem"><p> Check you have a database created and initialized.</p></li><li class="listitem"><p> Start the CORBA naming service on the gateway. The command is <span class="bold"><strong>omniNames -start</strong></span> if starting for the first time, <span class="bold"><strong>omniNames</strong></span> is enough otherwise. Warning, in the omniNames configuration file, use the address of the host and not 'localhost' or '127.0.0.1'. </p></li><li class="listitem"><p> Start the log service of DIET on the gateway. The command is <span class="bold"><strong>LogCentral --config config.cfg</strong></span> with config.cfg a configuration file for the log central. An example of configuration is provided at the section 6.10.</p></li><li class="listitem"><p> Start the MA with its configuration file on the gateway: <span class="bold"><strong>dietAgent config.cfg</strong></span>. See the paragraph 6.3 to have an example of configuration file. This configuration file can contain the 3 following lines:
            </p><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem"><p> 'traceLevel = 0': The level of verbosity of the agent, can be between 0 and 100. (100 is fully verbose, with corba details). </p></li><li class="listitem"><p> 'agentType = DIET_MASTER_AGENT': The type of the agent, the other value possible is DIET_LOCAL_AGENT, but in our case it must be DIET_MASTER_AGENT.</p></li><li class="listitem"><p> 'name = MA0': The name of the agent, for instance MA0 here.</p></li></ul></div><p>
          </p></li><li class="listitem"><p>Launch the UMS SeD on the gateway with the command <span class="bold"><strong>umssed ~/ums_sed.cfg</strong></span>. The parameter is a VISHNU configuration file. See the paragraph 6.5 to see an example of configuration file. The parameters correspond to:
            </p><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem"><p>
                  'dietConfigFile=/usr/local/etc/SeD.cfg': the path until the DIET configuration file. See the paragraph 6.4 for an example. The file can contains the two following lines:
                  </p><div class="itemizedlist"><ul class="itemizedlist" type="circle"><li class="listitem"><p>'traceLevel = 0':  The level of verbosity of the agent, can be between 0 and 100. (100 is fully verbose, with corba details).</p></li><li class="listitem"><p> 'parentName = MA0': The name of the master agent to be linked to. It must be the exact same name as the one in the 'name' field in the corresponding MA. In this example, it is MA0.</p></li><li class="listitem"><p> 'useLogService = 1': To use the log service of DIET.</p></li></ul></div><p>
		</p></li><li class="listitem"><p> 'vishnuId=1': The id of the VISHNU deployment to use in te DB (1 by default).</p></li><li class="listitem"><p> 'databaseType=postgresql': To use a postgresql database. To use a MySQL database, one must set the value to 'mysql'.</p></li><li class="listitem"><p>
                  'databaseHost=localhost': The DNS name of the DB server, or 'localhost' if the DB is local.
		</p></li><li class="listitem"><p>'databaseName=vishnu': The DB name.</p></li><li class="listitem"><p> 'databaseUserName=vishnu_user': The username to connect to the DB.</p></li><li class="listitem"><p> 'databaseUserPassword=vishnu_user': The password to connect to the DB.</p></li><li class="listitem"><p> 'databaseConnectionsNb=5': The number of DB connexions that can be opened on the DB. By default it is 10.</p></li><li class="listitem"><p> 'sendmailScriptPath=/usr/local/vishnu/sbin/sendmail.py': The script used to send mails. It is installed with the UMS module 
		in the sbin directory.</p></li><li class="listitem"><p>'authenticationType=LDAP': Use only LDAP to authentify the users (see LDAP for the 4 values available).</p></li><li class="listitem"><p>'vishnuMachineId=machine_1' : Optionnal, this parameter specifies the identifier of the machine related to the SeD.</p><p><span class="bold"><strong>IMPORTANT: </strong></span>During the first initialialization, i.e. when there is not yet a machine 
                registered into the system, this parameter must be leave empty. Indeed, when set, its value should correspond to a VISHNU 
                machine, otherwise the SeD will fail.</p></li></ul></div><p>
          </p></li><li class="listitem"><p>
	    On a torque machine, launch the torque server (pbs_serv), the torque scheduler (pbs_sched) and the torque scheduler (pbs_mom) of Torque.
	  </p></li><li class="listitem"><p>Start the TMS SeD on the Torque host machine. The command is: <span class="bold"><strong>tmssed ~/tms_sed.cfg</strong></span>. The parameter is a VISHNU configuration file. See the paragraph 6.6 to have an example. The parameters are the same as the ones of UMS plus:
	    </p><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem"><p>'intervalMonitor = 1': The frequency (in second) when the database is updated with the jobs states.</p></li><li class="listitem"><p>'batchSchedulerType=TORQUE': The type of batch scheduler used.</p></li><li class="listitem"><p>'vishnuMachineId=machine_1': The VISHNU machine identifier where the TMS SeD is launched (the same as given by vishnu_list_machines).</p></li></ul></div><p>
	  </p></li><li class="listitem"><p>
            On the SLURM machine, launch the servers
            <span class="emphasis"><em>slurmd, slurmctld</em></span> and <span class="emphasis"><em>slurmdbd</em></span>.
          </p></li><li class="listitem"><p>Start the TMS SeD on the Torque host machine. The command is: <span class="bold"><strong>tmssed ~/tms_sed.cfg</strong></span>. The parameter is a VISHNU configuration file. See the paragraph 6.6 to have an example. The parameters are the same as the ones of UMS plus:
            </p><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem"><p>'intervalMonitor = 1': The frequency (in second) when the database is updated with the jobs states.</p></li><li class="listitem"><p>'batchSchedulerType=SLURM': The type of batch scheduler used.</p></li><li class="listitem"><p>'vishnuMachineId=machine_1': The VISHNU machine identifier where the TMS SeD is launched (the same as given by vishnu_list_machines).</p></li></ul></div><p>
	  </p></li><li class="listitem"><p>
            On the LSF machine, launch the executables <span class="emphasis"><em>hostsetup</em></span> <span class="emphasis"><em>lsfstartup</em></span>.
          </p></li><li class="listitem"><p>Start the TMS SeD on the Torque host machine. The command is: <span class="bold"><strong>tmssed ~/tms_sed.cfg</strong></span>. The parameter is a VISHNU configuration file. See the paragraph 6.6 to have an example. The parameters are the same as the ones of UMS plus:
            </p><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem"><p>'intervalMonitor = 1': The frequency (in second) when the database is updated with the jobs states.</p></li><li class="listitem"><p>'batchSchedulerType=LSF': The type of batch scheduler used.</p></li><li class="listitem"><p>'vishnuMachineId=machine_1': The VISHNU machine identifier where the TMS SeD is launched (the same as given by vishnu_list_machines).</p></li></ul></div><p>
          </p></li><li class="listitem"><p>
            On the Grid Engine machine, launch the executables <span class="emphasis"><em>sge_qmaster </em></span>and <span class="emphasis"><em>sge_execd</em></span>.
      </p></li><li class="listitem"><p>Start the TMS SeD on the Torque host machine. The command is: <span class="bold"><strong>tmssed ~/tms_sed.cfg</strong></span>. The parameter is a VISHNU configuration file. See the paragraph 6.6 to have an example. The parameters are the same as the ones of UMS plus:
            </p><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem"><p>'intervalMonitor = 1': The frequency (in second) when the database is updated with the jobs states.</p></li><li class="listitem"><p>'batchSchedulerType=SGE': The type of batch scheduler used.</p></li><li class="listitem"><p>'vishnuMachineId=machine_1': The VISHNU machine identifier where the TMS SeD is launched (the same as given by vishnu_list_machines).</p></li></ul></div><p>
          </p></li><li class="listitem"><p>Start the IMS SeD on all the desired machines. The command is: <span class="bold"><strong>imssed ~/ims_sed.cfg</strong></span>. The parameter is a VISHNU configuration file. See the paragraph 6.5 to have an example. The parameters are the same as the ones of UMS. Please note that an IMS SeD must be launched on each machine to monitor.
          </p></li><li class="listitem"><p>Start the FMS SeD on a machine. The command is: <span class="bold"><strong>fmssed ~/fms_sed.cfg</strong></span>. The parameter is a VISHNU configuration file. See the paragraph 6.7 to have an example. The parameters are the same as the ones of UMS plus:
	    </p><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem"><p>'intervalMonitor = 1': The frequency (in second) when the database is updated with the file transfers.</p></li></ul></div><p>
          </p></li><li class="listitem"><p>
            VISHNU modules are ready to be used. To do so, a client must connect and submit requests to VISHNU using the API of the modules (see the user guide for more information).
          </p></li></ol></div></div><div class="section" title="Deployment on various networks with DIET version &gt;= 2.8"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a id="idp228320"></a>Deployment on various networks <span class="bold"><strong>with DIET version &gt;= 2.8</strong></span></h2></div></div></div><p>VISHNU modules can be deployed manually. The example of deployment will be based on figure 4.2 of the [ARCH] document, supposing to simplify that on a network, all the processes run on the same machine and that "network C" and "network D" are the same (no need of forwarder between them).
      </p><div class="orderedlist"><ol class="orderedlist" type="1"><li class="listitem"><p> Check you have a database created and initialized.</p></li><li class="listitem"><p> Start the CORBA naming service on the gateway. The command is <span class="bold"><strong>omniNames -start</strong></span> if starting for the first time, <span class="bold"><strong>omniNames</strong></span> is enought otherwise. Warning, in the omninames configuration file, use the adress of the host and not 'localhost' or '127.0.0.1'. </p></li><li class="listitem"><p> Start a daemon forwarder on the network B:  </p><p><span class="bold"><strong>dietForwarder --name forwarder2</strong></span>
	    </p><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem"><p>
	          forwarder2: Name that identifies the forwarder
	      </p></li></ul></div><p>
          </p></li><li class="listitem"><p> Start a daemon forwarder on the network C: </p><p><span class="bold"><strong>dietForwarder --peer-name forwarder2 --ssh-host nom_DNS_machine_distante --remote-port 50005 --name forwarder
	      --remote-host localhost
	      --ssh-login login</strong></span>
          </p><p>
	    </p><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem"><p>
	          --peer-name: The name of the peer forwarder, here forwarder2.
	  </p></li><li class="listitem"><p>
	      --ssh-host: The DNS name of the distant machine to connect the SSH tunnel.
	  </p></li><li class="listitem"><p>
	      --remote-port: optionnal, the port to use, here 50005.
	  </p></li><li class="listitem"><p>
	      --name: The name of the forwarder.
	  </p></li><li class="listitem"><p>
	      --remote-host: The loopback adresse, here 'localhost'.
	  </p></li><li class="listitem"><p>
	      --ssh-login: The login on the distant machine.
	  </p></li></ul></div><p>
      </p></li><li class="listitem"><p> If the SSH key is accessible and that the key is protected by a
        passphrase, it is asked and the SSH connexion is established.
      </p></li><li class="listitem"><p>  Start a daemon forwarder on the network B: </p><p><span class="bold"><strong>logForwarder --name logforwarder2</strong></span>
	</p><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem"><p>
	      logforwarder2: Name that identifies the forwarder
	  </p></li></ul></div><p>
      </p></li><li class="listitem"><p> Start a daemon forwarder on the network C: </p><p><span class="bold"><strong>logForwarder --peer-name logforwarder2 --ssh-host nom_DNS_machine_distante --remote-port 50005 --name logforwarder
	  --remote-host localhost
	  --ssh-login login</strong></span>
      </p><p>
	</p><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem"><p>
	      --peer-name: The name of the peer forwarder, here forwarder2.
	  </p></li><li class="listitem"><p>
	      --ssh-host: The DNS name of the distant machine to connect the SSH tunnel.
	  </p></li><li class="listitem"><p>
	      --remote-port: optionnal, the port to use, here 50005.
	  </p></li><li class="listitem"><p>
	      --name: The name of the forwarder.
	  </p></li><li class="listitem"><p>
	      --remote-host: The loopback adresse, here 'localhost'.
	  </p></li><li class="listitem"><p>
	      --ssh-login: The login on the distant machine.
	  </p></li></ul></div><p>
      </p></li><li class="listitem"><p>
        If the SSH key is accessible and that the key is protected by a
        passphrase, it is asked and the SSH connexion is established.</p></li><li class="listitem"><p>  Start the log service of DIET on the gateway. The command is <span class="bold"><strong>LogCentral --config config.cfg</strong></span> with config.cfg a configuration file for the log central. See the paragraph 6.10 to have an example of configuration file.</p></li><li class="listitem"><p> Start the MA with its configuration file on the gateway: <span class="bold"><strong>dietAgent config.cfg</strong></span>. See the paragraph 6.3 to have an example of configuration file. This configuration file can contain the 3 following lines:
	</p><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem"><p> 'traceLevel = 0': The level of verbosity of the agent, can be between 0 and 100. (100 is fully verbose, with corba details). </p></li><li class="listitem"><p> 'agentType = DIET_MASTER_AGENT': The type of the agent, the other value possible is DIET_LOCAL_AGENT, but in our case it must be DIET_MASTER_AGENT.</p></li><li class="listitem"><p> 'name = MA0': The name of the agent, for instance MA0 here.</p></li></ul></div><p>
      </p></li><li class="listitem"><p>Launch the UMS SeD on the network C with the command <span class="bold"><strong>umssed ~/ums_sed.cfg</strong></span>. The parameter is a VISHNU configuration file. See the paragraph 6.5 to see an example of configuration file. The parameters are the same as for deploying on a single network.
      </p></li><li class="listitem"><p>
        The UMS module is ready to be used. To do so, a client must connect et submit requests. If the client is on another network, other forwarders may be needed.
      </p></li></ol></div></div><div class="section" title="Deployment on various networks with DIET version 2.7"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a id="idp249448"></a>Deployment on various networks <span class="bold"><strong>with DIET version 2.7</strong></span></h2></div></div></div><p>VISHNU modules can be deployed manually. The example of deployment will be based on figure 4.2 of the [ARCH] document, supposing to simplify that on a network, all the processes run on the same machine and that "network C" and "network D" are the same (no need of forwarder between them).</p><div class="orderedlist"><ol class="orderedlist" type="1"><li class="listitem"><p>Having a database created and initialized.</p></li><li class="listitem"><p> Start the CORBA naming service on the gateway. The command is <span class="bold"><strong>omniNames -start</strong></span> if starting for the first time, <span class="bold"><strong>omniNames</strong></span> is enought otherwise. Warning, in the omninames configuration file, use the adress of the host and not 'localhost' or '127.0.0.1'. </p></li><li class="listitem"><p> Start a daemon forwarder on the network B: </p><p><span class="bold"><strong>dietForwarder --name forwarder2 --net-config forwarder2.cfg</strong></span>
	</p><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem"><p>
	      forwarder2: Name that identifies the forwarder
	  </p></li><li class="listitem"><p>
              forwarder2.cfg: Configuration file (see the paragraph 6.8) containing the rules applied to the connexions between the networks. There are 2 rules: 'accept:' or 'reject:'. In the example of the paragraph 6.8, 
              rules are:
              </p><div class="itemizedlist"><ul class="itemizedlist" type="circle"><li class="listitem"><p> a rule 'accept' corresponding to filters on the source of the accepted connexion. '.*' means all the connexions from all IP.</p></li><li class="listitem"><p> 2 rules to reject 2 addresses. It contains the local IP of the server.</p></li></ul></div><p>
            </p></li></ul></div><p>
      </p></li><li class="listitem"><p> Start a daemon forwarder on the network C: </p><p><span class="bold"><strong>dietForwarder -C --peer-name forwarder2 --ssh-host nom_DNS_machine_distante --remote-port 50005 --name forwarder
	  --remote-host localhost --net-config forwarder1.cfg
	  --ssh-login login</strong></span>
      </p><p>
	</p><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem"><p>
              -C: indicate it is the client.
          </p></li><li class="listitem"><p>
	      --net-config: the configuration file. Contains rules similar to forwarder2.cfg
          </p></li><li class="listitem"><p>
	      --peer-name: The name of the peer forwarder, here forwarder2.
	  </p></li><li class="listitem"><p>
	      --ssh-host: The DNS name of the distant machine to connect the SSH tunnel.
	  </p></li><li class="listitem"><p>
	      --remote-port: optionnal, the port to use.
	  </p></li><li class="listitem"><p>
	      --name: The name of the forwarder.
	  </p></li><li class="listitem"><p>
	      --remote-host: The loopback adresse, here 'localhost'.
	  </p></li><li class="listitem"><p>
	      --ssh-login: The login on the distant machine.
	  </p></li></ul></div><p>
      </p></li><li class="listitem"><p>If the SSH key is accessible and that the key is protected by a
        passphrase, it is asked and the SSH connexion is established.</p></li><li class="listitem"><p> Start a daemon forwarder on the network B: </p><p><span class="bold"><strong>logForwarder --name logforwarder2 --net-config logforwarder2</strong></span>
	</p><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem"><p>
	      logforwarder2: Name that identifies the forwarder
	  </p></li><li class="listitem"><p>
              logforwarder2.cfg: Configuration file (see the paragraph 6.8) containing the rules applied to the connexions between the networks. There are 2 rules: 'accept:' or 'reject:'. In the example of the paragraph 6.8, 
              rules are:
              </p><div class="itemizedlist"><ul class="itemizedlist" type="circle"><li class="listitem"><p> a rule 'accept' corresponding to filters on the source of the accepted connexion. '.*' means all the connexions from all IP.</p></li><li class="listitem"><p>  2 rules to reject 2 addresses. It contains the local IP of the server.</p></li></ul></div><p>
            </p></li></ul></div><p>
      </p></li><li class="listitem"><p> Start a daemon log forwarder on the network C:  </p><p><span class="bold"><strong>logForwarder -C --peer-name logforwarder2 --ssh-host nom_DNS_machine_distante --remote-port 50005 --name logforwarder
	  --remote-host localhost --net-config logforwarder1.cfg
	  --ssh-login login</strong></span>
      </p><p>
	</p><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem"><p>
              -C: indicate it is the client.
          </p></li><li class="listitem"><p>
	      --peer-name: The name of the peer forwarder, here forwarder2.
	  </p></li><li class="listitem"><p>
              --net-config: the configuration file. Contains rules similar to forwarder2.cfg
          </p></li><li class="listitem"><p>
	      --ssh-host: The DNS name of the distant machine to connect the SSH tunnel.
	  </p></li><li class="listitem"><p>
	      --remote-port: optionnal, the port to use.
	  </p></li><li class="listitem"><p>
	      --name: The name of the forwarder.
	  </p></li><li class="listitem"><p>
	      --remote-host: The loopback adresse, here 'localhost'.
	  </p></li><li class="listitem"><p>
	      --ssh-login: The login on the distant machine.
	  </p></li></ul></div><p>
      </p></li><li class="listitem"><p>If the SSH key is accessible and that the key is protected by a
        passphrase, it is asked and the SSH connexion is established.</p></li><li class="listitem"><p> Start the log service of DIET on the gateway. The command is <span class="bold"><strong>LogCentral --config config.cfg</strong></span> with config.cfg a configuration file for the log central. </p></li><li class="listitem"><p>  Start the MA with its configuration file on the gateway: <span class="bold"><strong>dietAgent config.cfg</strong></span>. See the paragraph 6.3 to have an example of configuration file. This configuration file can contain the 3 following lines:
	</p><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem"><p> 'traceLevel = 0': The level of verbosity of the agent, can be between 0 and 100. (100 is fully verbose, with corba details). </p></li><li class="listitem"><p> 'agentType = DIET_MASTER_AGENT': The type of the agent, the other value possible is DIET_LOCAL_AGENT, but in our case it must be DIET_MASTER_AGENT.</p></li><li class="listitem"><p> 'name = MA0': The name of the agent, for instance MA0 here.</p></li></ul></div><p>
      </p></li><li class="listitem"><p>Launch the UMS SeD on the network C with the command <span class="bold"><strong>umssed ~/ums_sed.cfg</strong></span>. The parameter is a VISHNU configuration file. See the paragraph 6.5 to see an example of configuration file. The parameters correspond to:
      </p></li><li class="listitem"><p>
        The UMS module is ready to be used. To do so, a client must connect et submit requests. If the client is on another network, other forwarders may be needed.
      </p></li></ol></div></div><div class="section" title="Example of a MA configuration file"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a id="idp276080"></a>Example of a MA configuration file</h2></div></div></div><pre class="programlisting">
    traceLevel = 0
    name = MA0
    agentType = DIET_MASTER_AGENT
  </pre></div><div class="section" title="Example of a DIET SeD configuration file"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a id="idp276776"></a>Example of a DIET SeD configuration file</h2></div></div></div><pre class="programlisting">
    traceLevel = 0
    parentName = MA0
    useLogService = 1
  </pre></div><div class="section" title="Example of a UMS configuration file"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a id="idp277472"></a>Example of a UMS configuration file</h2></div></div></div><pre class="programlisting">
    # Configuration of the VISHNU UMS SeD
    dietConfigFile=/usr/local/etc/SeD.cfg
    vishnuId=1
    databaseType=postgresql
    databaseHost=localhost
    databaseName=vishnu
    databaseUserName=vishnu_user
    databaseUserPassword=vishnu_user
    databaseConnectionsNb=5
    sendmailScriptPath=/usr/local/sbin/sendmail.py
    vishnuMachineId=machine_1
    authenticationType=LDAP
  </pre></div><div class="section" title="Example of a TMS SeD configuration file"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a id="idp278488"></a>Example of a TMS SeD configuration file </h2></div></div></div><pre class="programlisting">
    # Configuration of the VISHNU TMS SeD
    dietConfigFile=/usr/local/etc/SeD.cfg
    vishnuId=1
    databaseType=postgresql
    databaseHost=localhost
    databaseName=vishnu
    databaseUserName=vishnu_user
    databaseUserPassword=vishnu_user
    databaseConnectionsNb=5
    sendmailScriptPath=/usr/local/sbin/sendmail.py
    vishnuMachineId=machine_1
    # TMS Configuration 
    # batchSchedulerType=SLURM if the batchScheduler is SLURM
    # batchSchedulerType=LSF if the batchScheduler is LSF
    # batchSchedulerType=SGE if the batchScheduler is SGE
    # batchSchedulerType=LOADLEVELER if the batchScheduler is LL
    batchSchedulerType=TORQUE
    intervalMonitor = 1
  </pre></div><div class="section" title="Example of a FMS SeD configuration file"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a id="idp279800"></a>Example of a FMS SeD configuration file </h2></div></div></div><pre class="programlisting">
    # Configuration of the VISHNU FMS SeD
    dietConfigFile=/usr/local/etc/SeD.cfg
    vishnuId=1
    databaseType=postgresql
    databaseHost=localhost
    databaseName=vishnu
    databaseUserName=vishnu_user
    databaseUserPassword=vishnu_user
    databaseConnectionsNb=5
    vishnuMachineId=machine_1
    # FMS Configuration 
    intervalMonitor = 1
  </pre></div><div class="section" title="Example of a forwarder configuration file"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a id="idp280792"></a>Example of a forwarder configuration file </h2></div></div></div><pre class="programlisting">
    # accept everything from everyone
    accept:.*
    
    # reject its own ip
    reject:192\.168\.1\.6
  </pre></div><div class="section" title="Example of a LogCentral configuration file"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a id="idp281536"></a>Example of a LogCentral configuration file </h2></div></div></div><pre class="programlisting">
    # an empty configuration file for LogService
    [General]
    
    [DynamicTagList]
    [StaticTagList]
    [UniqueTagList]
    [VolatileTagList]
  </pre></div><div class="section" title="Configuration to send mails in VISHNU"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a id="idp282320"></a>Configuration to send mails in VISHNU</h2></div></div></div><p>The UMS SeD process uses the 'sendmail.py' file (in the sbin/ directory)
    to send mails to the users during some operations. This file can be updated by the administrator to configure it. By default, the configuration connects
    to the SMTP of 'localhost' using the port 25, without authentication.</p><p>The following parameters can be configured sendmail.py:</p><div class="informaltable"><table border="1"><colgroup><col width="2cm" /><col width="15cm" /></colgroup><thead><tr><th>Option</th><th>Line of the sendmail.py script to modify</th></tr></thead><tbody><tr><td><p>login</p></td><td><pre class="programlisting">parser.add_option("--login", dest="login", help="", default="[login_utilisateur]")</pre></td></tr><tr><td><p>password</p></td><td><pre class="programlisting">parser.add_option("--password", dest="password", help="smtp password", default="[password_utilisateur]")</pre></td></tr><tr><td><p>hostname</p></td><td><pre class="programlisting">parser.add_option("--hostname", dest="host", help="smtp host", default="[nom_serveur_SMTP]")</pre></td></tr><tr><td><p>port</p></td><td><pre class="programlisting">parser.add_option("--port", dest="port", help="smtp port [default: 25]", type=int, default="[no_port]")</pre></td></tr><tr><td><p>SSL</p></td><td><pre class="programlisting">parser.add_option("--ssl", action="store_true", dest="use_ssl", help="enable ssl support [default: %default - default port: 587
	      ]", default=True)</pre></td></tr></tbody></table></div></div><div class="section" title="Configuration of the private/public ssh keys for FMS"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a id="idp290264"></a>Configuration of the private/public ssh keys for FMS</h2></div></div></div><p>
    All the FMS commands are launched throught SSH under the user that 
    has submitted the request name. FMS services are of 2 types: the ones using
    one remote machine and the ones using two machines.
    </p><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem"><p>
          In the first case, the SeD connects on the distant machine and
          do the service. Consequently, the SeD's public key must be added to the
          user authorized_keys file ($HOME/.ssh/authorized_keys) of the corresponding
          distant machine.
        </p></li><li class="listitem"><p> 
          In the second case, 2 SSH connexions are necessary. The SeD connects
          to the source machine and starts the transfer (second connexion) to the distant
          machine. Consequently:
          </p><div class="itemizedlist"><ul class="itemizedlist" type="circle"><li class="listitem"><p> 
                The SeD's public key must be added to the source machine authorized key file to enable the first connexion.
              </p></li><li class="listitem"><p> 
                The source machine must be able to connect to the destination
                machine using ssh, using the private key registered in the VISHNU database added when creating
                the user's local account linking the machine to VISHNU. Besides, if the machine
                forward agent is activated between these machines, it is not necessary to use
                another ssh key couple between the source and destination machine.
              </p></li></ul></div><p>
        </p></li></ul></div><p>
    To sum up, the SeD's SSH public key must be added on all the users' 
    account of the machines used to fulfill the FMS services. All the
    keys, protected by passphrases must be stocked by an SSH agent to
    allow the automatic authentication.
  </p></div><div class="section" title="Configuration of the private/public keys for TMS"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a id="idp294464"></a>Configuration of the private/public keys for TMS
  </h2></div></div></div><p>
    The commands to submit, cancel and get the results of the jobs are 
    executed throught SSH under the user name. To execute the commands,
    the TMS SeD public key's account must be added to the
    authorized_keys file ($HOME/.ssh/authorized_keys) of the user.
    All passphrase protected keys must be stocked by an SSH agent
    to allow the automatic authentication.
  </p></div><div class="section" title="Test to execute a client command throught the shell API"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a id="idp29328"></a> Test to execute a client command throught the shell API
  </h2></div></div></div><div class="orderedlist"><ol class="orderedlist" type="1"><li class="listitem"><p>
        Once the platform is installed and deployed, go to a client 
        machine with VISHNU client installed. See the VISHNU user guide
        concerning this installation.
      </p></li><li class="listitem"><p>
        Export the environment variable VISHNU_CONFIG_FILE to a
        client configuration file (see the VISHNU user guide again for more).
      </p></li><li class="listitem"><p>Open a VISHNU session</p><p>#<span class="emphasis"><em>vishnu_connect -u user</em></span> </p><p>Replace 'user' by a real user identifier. By default, VISHNU comes with a user named 'root' having 
		all rights on the system (ID: 'root', Password: 'vishnu_user').</p></li><li class="listitem"><p>
        On the client, there should be a display of a session identifier, proving
        that the connexion was a success. On the MA and the SeD, depending
        on the verbosity level, there may be some information displayed.
        The client display should be similar to:
	<span class="bold"><strong>sessionId: root-2011-Jul-11-14:22:14.403491:86690</strong></span>.
      </p></li><li class="listitem"><p>Close the session</p><p>#<span class="emphasis"><em>vishnu_close</em></span></p><p>No error should be raised.</p></li></ol></div></div></div><div class="chapter" title="Chapter 7. Administration"><div class="titlepage"><div><div><h2 class="title"><a id="idp34400"></a>Chapter 7. Administration</h2></div></div></div><div class="toc"><p><b>Table of Contents</b></p><dl><dt><span class="section"><a href="#idp34744">Presentation</a></span></dt><dt><span class="section"><a href="#idp35976">User handling (UMS)</a></span></dt><dt><span class="section"><a href="#idp314464">Handling machines (UMS+IMS)</a></span></dt><dt><span class="section"><a href="#idp318448">Handling the plateform (UMS)</a></span></dt><dt><span class="section"><a href="#idp322312">Admin options in user functions(UMS+FMS)</a></span></dt><dt><span class="section"><a href="#idp326712">Handling processes in VISHNU and load shedding(IMS)</a></span></dt><dt><span class="section"><a href="#idp329688">Monitoring the machines (IMS)</a></span></dt><dt><span class="section"><a href="#idp332568">Defining the format of the identifiers (IMS)</a></span></dt></dl></div><div class="section" title="Presentation"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a id="idp34744"></a>Presentation</h2></div></div></div><p>
      The UMS module corresponds to user and machine handling in VISHNU. It
      allows to save a VISHNU configuration and restore it if needed.
      In this chapter, we will suppose that the user is connected as a VISHNU
      administrator.
      The commands presented are the shell one's, but all is the same
      throught the other API (python, WS, C++).
    </p><p>The whole API is available in the [VISHNU_API] document</p></div><div class="section" title="User handling (UMS)"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a id="idp35976"></a>User handling (UMS)</h2></div></div></div><div class="orderedlist"><ol class="orderedlist" type="1"><li class="listitem"><p>
          Adding a user is made with vishnu_add_user. It takes as a parameter
          the user name, it's familly name, it's accreditation level in VISHNU
          (user or admin) and its mail address. All these are mandatory. An 
          accreditation level of 1 means admin, 0 means simple user. The 
          userid is generated and returned.
	</p></li><li class="listitem"><p>
          Updating a user must be done by an admin. It is made throught the
          'vishnu_update_user' command and enables to update a user first and
          last name, its status (can be locked), its mail address.
          The generated userid must be used to indicate the user to update.
	</p><p>Note: Setting a user status to 'INACTIVE' corresponds to 
          locking its VISHNU account, he cannot connect anymore.
        </p></li><li class="listitem"><p>
          Deleting a user delete its data from the database and is made with
          the vishnu_delete_user command.
	</p></li><li class="listitem"><p>
          Listing the users can be made by an admin only. The command is 
          'vishnu_list_users' and can take options like a specific userid.
	</p></li><li class="listitem"><p>
          Only an admin can reinitialize a user password in VISHNU. The command
          is 'vishnu_reset_password' with the userid of the user to change
          its password.
          At the following connexion, the user will be asked to change it's password (using the 'vishnu_change_password' command).
	</p></li></ol></div></div><div class="section" title="Handling machines (UMS+IMS)"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a id="idp314464"></a>Handling machines (UMS+IMS)</h2></div></div></div><div class="orderedlist"><ol class="orderedlist" type="1"><li class="listitem"><p>
          Adding a machine is made with the 'vishnu_add_machine' command. It
          takes as a parameter the machine name, its location, the language of
          the given machine description and the SSH public key.
          These parameters are mandatory. Once the machine is added, its
          identifier is returned.
        </p></li><li class="listitem"><p>
          A machine is updated with the 'vishnu_update_machine'. The machine 
          identifier is needed to update.
	</p><p>
          Note: Changing a machine status to 'INACTIVE' corresponds to
          blocking it, the machine is unavailable to VISHNU users', but
          the admin can still see it.
        </p></li><li class="listitem"><p>
          Deleting a machine is made with the 'vishnu_delete_machine', with 
          the machine identifier returned at the machine creation. It
          deletes from the database with all the asociated data.
          Warning it is not reversible.
	</p></li><li class="listitem"><p>
          Users can list machines, but the admin have another option, a userid,
          to list the machines where the given user as a VISHNU account.
	</p></li><li class="listitem"><p>
          Updating a machine technical description is made with the 
          'vishnu_set_system_info' command. The machine identifier is
          required.
	</p></li></ol></div></div><div class="section" title="Handling the plateform (UMS)"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a id="idp318448"></a>Handling the plateform (UMS)</h2></div></div></div><div class="orderedlist"><ol class="orderedlist" type="1"><li class="listitem"><p>
          The admin can save at a given time VISHNU state's. It saves the users,
          machines, users' account, authentication systems. The function
          is 'vishnu_save_configuration' and does not need parameters and
          generates a save file.
	</p></li><li class="listitem"><p>
          An admin can load a saved configuration of VISHNU using the 
          'vishnu_restore_configuration' command that takes the saved file.
          To start this command, all the VISHNU user's must de disconnected.
	</p></li><li class="listitem"><p>
          An admin can define user's option default values for all the users
          (these options are the default time before the session is 
          automatically closed, how the session closes: timeout or wait for an
          explicit close call, default copy tool: scp or rsync).
          The function is 'vishnu_configure_default_option' with the option
          name and its new default value.
	</p></li><li class="listitem"><p>
          An admin can add or uptade the authentication systems. For instance,
          it can add various LDAP to authenticate its users. Currently, for
          the same LDAP, if the users are in different branches, we need to 
          add twice the LDAP with different names, but it allows the user 
          to only give its LDAP login and not its branch. It is the admin,
          when he creates the authentication system, that defines the branch
          to use in the DAP tree. When the admin fills the path in the LDAP 
          tree, he must replace the username by the \$USERNAME string, this
          string will be replaced by the actual user name.
          associated functions: vishnu_add_auth_system, vishnu_update_auth_system, vishnu_delete_auth_system
	</p></li></ol></div></div><div class="section" title="Admin options in user functions(UMS+FMS)"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a id="idp322312"></a>Admin options in user functions(UMS+FMS)</h2></div></div></div><div class="orderedlist"><ol class="orderedlist" type="1"><li class="listitem"><p> In 'vishnu_connect', an admin can give a VISHNU user identifier to connect as this user in VISHNU.</p></li><li class="listitem"><p>
	  In 'vishnu_list_history_cmd', an admin can list all the commands
          of all the users or the commands of a particular user giving
          its identifier.
	</p></li><li class="listitem"><p>
	  In 'vishnu_list_local_accounts', an admin can list all the accounts
          of all the users or the accounts of a particular user.
	</p></li><li class="listitem"><p>
	  In 'vishnu_list_options', an admin can list all the options of all
          the users or the options of a particular user.
	</p></li><li class="listitem"><p>
	  In 'vishnu_list_sessions', an admin can list all the sessions of
          all the users or the sessions of a user, filtering by a machine.
	</p></li><li class="listitem"><p>
	  In 'vishnu_list_file_transfers', an admin can list all the file
          transfers of all the users, or the transfers of a particular user,
          or the transfers on a machine (may be source or destination)
	</p></li><li class="listitem"><p>
	  In 'vishnu_stop_file_transfers', an admin can stop the file transfers
          of all the users, or a particular user, or on a machine
	</p></li></ol></div></div><div class="section" title="Handling processes in VISHNU and load shedding(IMS)"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a id="idp326712"></a>Handling processes in VISHNU and load shedding(IMS)</h2></div></div></div><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem"><p>An admin can list all the running VISHNU processes, on all the platform or on a particular machine.
          associated function: vishnu_get_processes.</p></li><li class="listitem"><p>An admin can stop a VISHNU process, it will not be automatically restarted.
          Warning, the admin must have a local account on the machine.
	  associated function: vishnu_stop </p></li><li class="listitem"><p>An admin can restart a VISHNU process on a machine, this process must have already runned and he must have an account on the machine.
          associated function: vishnu_restart </p></li><li class="listitem"><p>An admin can load shed a machine using two modes. In the HARD
          one, all the VISHNU processes are stopped on the machine, in the
          SOFT, FMS and TMS have their jobs and file transfers cancelled.
          associated function: vishnu_load_shed </p></li></ul></div></div><div class="section" title="Monitoring the machines (IMS)"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a id="idp329688"></a>Monitoring the machines (IMS)</h2></div></div></div><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem"><p> An admin can fix the frequency the machine state is recorded.
          associated function: vishnu_set_update_frequency</p></li><li class="listitem"><p> An admin can get the frequenc the machine state is saved.
          associated function: vishnu_get_update_frequency</p></li><li class="listitem"><p>An admin can fix a threshold on a machine. It can be
          the CPU use, the free remaining ram and the free remaining diskspace.
          When recording a machine state, if a threshold is reached, a mail
          is automatically sent to an admin responsible for the threshold on
          the machine.
          associated function: vishnu_set_threshold</p></li><li class="listitem"><p>An admin can get the defined thresholds.
          associated function: vishnu_get_threshold</p></li></ul></div></div><div class="section" title="Defining the format of the identifiers (IMS)"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a id="idp332568"></a>Defining the format of the identifiers (IMS)</h2></div></div></div><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem"><p>
          An admin can fix the format of the identifiers automatically 
          generated for the users, machines, jobs, file transfers and 
          authentication systems. These identifiers can contain various
          variables:
	  </p><div class="itemizedlist"><ul class="itemizedlist" type="circle"><li class="listitem"><p>
		'$DAY': Variable replaced by the day (1-31)
	      </p></li><li class="listitem"><p>
		'$MONTH': Variable replaced by the month (1-12)
	      </p></li><li class="listitem"><p>
		'$YEAR':  Variable replaced by the year (0-99)
	      </p></li><li class="listitem"><p>
		'$CPT': Variable replaced by a counter value, to guarantee the unicity
	      </p></li><li class="listitem"><p>
		'$SITE': For users and machines, replaced by the place
	      </p></li><li class="listitem"><p>
		'$UNAME': For users, replaced by their first name
	      </p></li><li class="listitem"><p>
		'$MANAME': For machines, replace by their name
	      </p></li></ul></div><p>
          Warning, the counter variable is mandatory to avoid generating twice the same identifier.
	  associated function: define_file_format, define_machine_format, define_task_format, define_user_format, define_auth_format.
	</p></li></ul></div></div></div><div class="reference" title="UMS Command reference"><div class="titlepage"><div><div><h1 class="title"><a id="idp337504"></a>UMS Command reference</h1></div></div><hr /></div><div class="toc"><p><b>Table of Contents</b></p><dl><dt><span class="refentrytitle"><a href="#idp337856">vishnu_add_user</a></span><span class="refpurpose"> — adds a new VISHNU user</span></dt><dt><span class="refentrytitle"><a href="#idp357384">vishnu_update_user</a></span><span class="refpurpose"> — updates the user information except the userId and the password</span></dt><dt><span class="refentrytitle"><a href="#idp383448">vishnu_delete_user</a></span><span class="refpurpose"> — removes a user from VISHNU</span></dt><dt><span class="refentrytitle"><a href="#idp400568">vishnu_reset_password</a></span><span class="refpurpose"> — resets the password of a user</span></dt><dt><span class="refentrytitle"><a href="#idp417672">vishnu_save_configuration</a></span><span class="refpurpose"> — saves the configuration of VISHNU</span></dt><dt><span class="refentrytitle"><a href="#idp432848">vishnu_restore_configuration</a></span><span class="refpurpose"> — restores the configuration of VISHNU</span></dt><dt><span class="refentrytitle"><a href="#idp448800">vishnu_add_machine</a></span><span class="refpurpose"> — adds a new machine in VISHNU</span></dt><dt><span class="refentrytitle"><a href="#idp467720">vishnu_update_machine</a></span><span class="refpurpose"> — updates machine description</span></dt><dt><span class="refentrytitle"><a href="#idp493960">vishnu_delete_machine</a></span><span class="refpurpose"> — removes a machine from VISHNU</span></dt><dt><span class="refentrytitle"><a href="#idp510504">vishnu_list_users</a></span><span class="refpurpose"> — lists VISHNU users</span></dt><dt><span class="refentrytitle"><a href="#idp529680">vishnu_configure_default_option</a></span><span class="refpurpose"> — configures a default option value</span></dt><dt><span class="refentrytitle"><a href="#idp548144">vishnu_add_auth_system</a></span><span class="refpurpose"> — adds a new user-authentication system in VISHNU</span></dt><dt><span class="refentrytitle"><a href="#idp569152">vishnu_update_auth_system</a></span><span class="refpurpose"> — updates a user-authentication system in VISHNU</span></dt><dt><span class="refentrytitle"><a href="#idp599560">vishnu_delete_auth_system</a></span><span class="refpurpose"> — removes a user-authentication system from VISHNU</span></dt></dl></div><div class="refentry" title="vishnu_add_user"><a id="idp337856"></a><div class="titlepage"></div><div class="refnamediv"><h2>Name</h2><p>vishnu_add_user — adds a new VISHNU user</p></div><div class="refsynopsisdiv" title="Synopsis"><h2>Synopsis</h2><div class="cmdsynopsis"><p><code class="command">vishnu_add_user</code>  [<code class="option">-h</code>]  <em class="replaceable"><code>firstname</code></em>   <em class="replaceable"><code>lastname</code></em>   <em class="replaceable"><code>privilege</code></em>   <em class="replaceable"><code>email</code></em> </p></div></div><div class="refsect1" title="DESCRIPTION"><a id="description"></a><h2>DESCRIPTION</h2><p>This command allows an admin to add a new user in VISHNU. 
Several user information are necessary such as: lastname, firtsname and email address. 
The admin also gives a VISHNU privilege to the new user and a new userId 
and password are sent to the user by email.</p></div><div class="refsect1" title="OPTIONS"><a id="options"></a><h2>OPTIONS</h2><div class="variablelist"><dl><dt><span class="term"><code class="option">-h <em class="replaceable"><code>help</code></em></code></span></dt><dd><p>help about the command.</p></dd></dl></div></div><div class="refsect1" title="ENVIRONMENT"><a id="environment"></a><h2>ENVIRONMENT</h2><div class="variablelist"><dl><dt><span class="term"><code class="envar">VISHNU_CONFIG_FILE</code></span></dt><dd><p>Contains the path to the local configuration file for VISHNU.</p></dd></dl></div></div><div class="refsect1" title="DIAGNOSTICS"><a id="diagnostics"></a><h2>DIAGNOSTICS</h2><p>The following diagnostics may be issued on stderr and the command will return the code provided within brackets: </p><div class="variablelist"><dl><dt><span class="term">"Vishnu not available (Service bus failure)" [1]</span></dt><dd></dd><dt><span class="term">"Vishnu not available (Database error)" [2]</span></dt><dd></dd><dt><span class="term">"Vishnu not available (Database connection)" [3]</span></dt><dd></dd><dt><span class="term">"Vishnu not available (System)" [4]</span></dt><dd></dd><dt><span class="term">"Internal Error: Undefined exception" [9]</span></dt><dd></dd><dt><span class="term">"There is no open session in this terminal" [13]</span></dt><dd></dd><dt><span class="term">"Missing parameters" [14]</span></dt><dd></dd><dt><span class="term">"Vishnu initialization failed" [15]</span></dt><dd></dd><dt><span class="term">"Undefined error" [16]</span></dt><dd></dd><dt><span class="term">"The userId already exists in the database" [22]</span></dt><dd></dd><dt><span class="term">"The user is locked" [23]</span></dt><dd></dd><dt><span class="term">"The user is not an administrator" [25]</span></dt><dd></dd><dt><span class="term">"The mail adress is invalid" [27]</span></dt><dd></dd><dt><span class="term">"The session key is unrecognized" [28]</span></dt><dd></dd><dt><span class="term">"The sessionKey is expired. The session is closed." [29]</span></dt><dd></dd><dt><span class="term">"The machine is locked" [34]</span></dt><dd></dd></dl></div></div><div class="refsect1" title="EXAMPLE"><a id="example"></a><h2>EXAMPLE</h2><p>To add the user Jean DUPONT as a simple user and with the mail dupont@gmail.com:</p><p>vishnu_add_user Jean DUPONT 0 dupont@gmail.com</p></div></div><div class="refentry" title="vishnu_update_user"><div class="refentry.separator"><hr /></div><a id="idp357384"></a><div class="titlepage"></div><div class="refnamediv"><h2>Name</h2><p>vishnu_update_user — updates the user information except the userId and the password</p></div><div class="refsynopsisdiv" title="Synopsis"><h2>Synopsis</h2><div class="cmdsynopsis"><p><code class="command">vishnu_update_user</code>  [<code class="option">-h</code>] [<code class="option">-f <em class="replaceable"><code>firstname</code></em></code>] [<code class="option">-l <em class="replaceable"><code>lastname</code></em></code>] [<code class="option">-p <em class="replaceable"><code>privilege</code></em></code>] [<code class="option">-m <em class="replaceable"><code>email</code></em></code>] [<code class="option">-s <em class="replaceable"><code>status</code></em></code>]  <em class="replaceable"><code>userId</code></em> </p></div></div><div class="refsect1" title="DESCRIPTION"><a id="description"></a><h2>DESCRIPTION</h2><p>This command allows an admin to update a VISHNU user information or to lock a user.  When a user is locked, she/he can not uses VISHNU. However, it is not possible to change the privilege of another admin.</p></div><div class="refsect1" title="OPTIONS"><a id="options"></a><h2>OPTIONS</h2><div class="variablelist"><dl><dt><span class="term"><code class="option">-h <em class="replaceable"><code>help</code></em></code></span></dt><dd><p>help about the command.</p></dd><dt><span class="term"><code class="option">-f <em class="replaceable"><code>firstname</code></em></code></span></dt><dd><p>represents the updated firstname of the user.</p></dd><dt><span class="term"><code class="option">-l <em class="replaceable"><code>lastname</code></em></code></span></dt><dd><p>represents the updated lastname of the user.</p></dd><dt><span class="term"><code class="option">-p <em class="replaceable"><code>privilege</code></em></code></span></dt><dd><p>represents the updated privilege of the user.
The value must be an integer. Predefined values are: 0 (USER), 1 (ADMIN).</p></dd><dt><span class="term"><code class="option">-m <em class="replaceable"><code>email</code></em></code></span></dt><dd><p>represents the updated email address of the user.</p></dd><dt><span class="term"><code class="option">-s <em class="replaceable"><code>status</code></em></code></span></dt><dd><p>represents the status of the user (LOCKED or ACTIVE).
The value must be an integer. Predefined values are: -1 (UNDEFINED), 0 (INACTIVE), 1 (ACTIVE).</p></dd></dl></div></div><div class="refsect1" title="ENVIRONMENT"><a id="environment"></a><h2>ENVIRONMENT</h2><div class="variablelist"><dl><dt><span class="term"><code class="envar">VISHNU_CONFIG_FILE</code></span></dt><dd><p>Contains the path to the local configuration file for VISHNU.</p></dd></dl></div></div><div class="refsect1" title="DIAGNOSTICS"><a id="diagnostics"></a><h2>DIAGNOSTICS</h2><p>The following diagnostics may be issued on stderr and the command will return the code provided within brackets: </p><div class="variablelist"><dl><dt><span class="term">"Vishnu not available (Service bus failure)" [1]</span></dt><dd></dd><dt><span class="term">"Vishnu not available (Database error)" [2]</span></dt><dd></dd><dt><span class="term">"Vishnu not available (Database connection)" [3]</span></dt><dd></dd><dt><span class="term">"Vishnu not available (System)" [4]</span></dt><dd></dd><dt><span class="term">"Internal Error: Undefined exception" [9]</span></dt><dd></dd><dt><span class="term">"There is no open session in this terminal" [13]</span></dt><dd></dd><dt><span class="term">"Missing parameters" [14]</span></dt><dd></dd><dt><span class="term">"Vishnu initialization failed" [15]</span></dt><dd></dd><dt><span class="term">"Undefined error" [16]</span></dt><dd></dd><dt><span class="term">"The userId is unknown" [21]</span></dt><dd></dd><dt><span class="term">"The user is locked" [23]</span></dt><dd></dd><dt><span class="term">"Trying to lock a user account that is already locked" [24]</span></dt><dd></dd><dt><span class="term">"The user is not an administrator" [25]</span></dt><dd></dd><dt><span class="term">"The mail adress is invalid" [27]</span></dt><dd></dd><dt><span class="term">"The session key is unrecognized" [28]</span></dt><dd></dd><dt><span class="term">"The sessionKey is expired. The session is closed." [29]</span></dt><dd></dd></dl></div></div><div class="refsect1" title="EXAMPLE"><a id="example"></a><h2>EXAMPLE</h2><p>To update the mail address of a user user_1 to jdupont@gmail.com:</p><p>vishnu_update_user -m jdupont@gmail.com user_1</p></div></div><div class="refentry" title="vishnu_delete_user"><div class="refentry.separator"><hr /></div><a id="idp383448"></a><div class="titlepage"></div><div class="refnamediv"><h2>Name</h2><p>vishnu_delete_user — removes a user from VISHNU</p></div><div class="refsynopsisdiv" title="Synopsis"><h2>Synopsis</h2><div class="cmdsynopsis"><p><code class="command">vishnu_delete_user</code>  [<code class="option">-h</code>]  <em class="replaceable"><code>userId</code></em> </p></div></div><div class="refsect1" title="DESCRIPTION"><a id="description"></a><h2>DESCRIPTION</h2><p>This command allows an admin to delete a user from VISHNU. When a user is deleted from VISHNU all of her/his information are deleted from VISHNU. However, it is not possible to delete the VISHNU root user.</p></div><div class="refsect1" title="OPTIONS"><a id="options"></a><h2>OPTIONS</h2><div class="variablelist"><dl><dt><span class="term"><code class="option">-h <em class="replaceable"><code>help</code></em></code></span></dt><dd><p>help about the command.</p></dd></dl></div></div><div class="refsect1" title="ENVIRONMENT"><a id="environment"></a><h2>ENVIRONMENT</h2><div class="variablelist"><dl><dt><span class="term"><code class="envar">VISHNU_CONFIG_FILE</code></span></dt><dd><p>Contains the path to the local configuration file for VISHNU.</p></dd></dl></div></div><div class="refsect1" title="DIAGNOSTICS"><a id="diagnostics"></a><h2>DIAGNOSTICS</h2><p>The following diagnostics may be issued on stderr and the command will return the code provided within brackets: </p><div class="variablelist"><dl><dt><span class="term">"Vishnu not available (Service bus failure)" [1]</span></dt><dd></dd><dt><span class="term">"Vishnu not available (Database error)" [2]</span></dt><dd></dd><dt><span class="term">"Vishnu not available (Database connection)" [3]</span></dt><dd></dd><dt><span class="term">"Vishnu not available (System)" [4]</span></dt><dd></dd><dt><span class="term">"Internal Error: Undefined exception" [9]</span></dt><dd></dd><dt><span class="term">"There is no open session in this terminal" [13]</span></dt><dd></dd><dt><span class="term">"Missing parameters" [14]</span></dt><dd></dd><dt><span class="term">"Vishnu initialization failed" [15]</span></dt><dd></dd><dt><span class="term">"Undefined error" [16]</span></dt><dd></dd><dt><span class="term">"The userId is unknown" [21]</span></dt><dd></dd><dt><span class="term">"The user is locked" [23]</span></dt><dd></dd><dt><span class="term">"The user is not an administrator" [25]</span></dt><dd></dd><dt><span class="term">"The session key is unrecognized" [28]</span></dt><dd></dd><dt><span class="term">"The sessionKey is expired. The session is closed." [29]</span></dt><dd></dd></dl></div></div><div class="refsect1" title="EXAMPLE"><a id="example"></a><h2>EXAMPLE</h2><p>Tu delete the user user_1:</p><p>vishnu_delete_user user_1</p></div></div><div class="refentry" title="vishnu_reset_password"><div class="refentry.separator"><hr /></div><a id="idp400568"></a><div class="titlepage"></div><div class="refnamediv"><h2>Name</h2><p>vishnu_reset_password — resets the password of a user</p></div><div class="refsynopsisdiv" title="Synopsis"><h2>Synopsis</h2><div class="cmdsynopsis"><p><code class="command">vishnu_reset_password</code>  [<code class="option">-h</code>]  <em class="replaceable"><code>userId</code></em> </p></div></div><div class="refsect1" title="DESCRIPTION"><a id="description"></a><h2>DESCRIPTION</h2><p>This command allows an admin to reset the password of the user. The password generated is temporary and must be changed for using VISHNU.</p></div><div class="refsect1" title="OPTIONS"><a id="options"></a><h2>OPTIONS</h2><div class="variablelist"><dl><dt><span class="term"><code class="option">-h <em class="replaceable"><code>help</code></em></code></span></dt><dd><p>help about the command.</p></dd></dl></div></div><div class="refsect1" title="ENVIRONMENT"><a id="environment"></a><h2>ENVIRONMENT</h2><div class="variablelist"><dl><dt><span class="term"><code class="envar">VISHNU_CONFIG_FILE</code></span></dt><dd><p>Contains the path to the local configuration file for VISHNU.</p></dd></dl></div></div><div class="refsect1" title="DIAGNOSTICS"><a id="diagnostics"></a><h2>DIAGNOSTICS</h2><p>The following diagnostics may be issued on stderr and the command will return the code provided within brackets: </p><div class="variablelist"><dl><dt><span class="term">"Vishnu not available (Service bus failure)" [1]</span></dt><dd></dd><dt><span class="term">"Vishnu not available (Database error)" [2]</span></dt><dd></dd><dt><span class="term">"Vishnu not available (Database connection)" [3]</span></dt><dd></dd><dt><span class="term">"Vishnu not available (System)" [4]</span></dt><dd></dd><dt><span class="term">"Internal Error: Undefined exception" [9]</span></dt><dd></dd><dt><span class="term">"There is no open session in this terminal" [13]</span></dt><dd></dd><dt><span class="term">"Missing parameters" [14]</span></dt><dd></dd><dt><span class="term">"Vishnu initialization failed" [15]</span></dt><dd></dd><dt><span class="term">"Undefined error" [16]</span></dt><dd></dd><dt><span class="term">"The userId is unknown" [21]</span></dt><dd></dd><dt><span class="term">"The user is locked" [23]</span></dt><dd></dd><dt><span class="term">"The user is not an administrator" [25]</span></dt><dd></dd><dt><span class="term">"The session key is unrecognized" [28]</span></dt><dd></dd><dt><span class="term">"The sessionKey is expired. The session is closed." [29]</span></dt><dd></dd></dl></div></div><div class="refsect1" title="EXAMPLE"><a id="example"></a><h2>EXAMPLE</h2><p>To reset the password of the user user_1:</p><p>vishnu_reset_password user_1</p></div></div><div class="refentry" title="vishnu_save_configuration"><div class="refentry.separator"><hr /></div><a id="idp417672"></a><div class="titlepage"></div><div class="refnamediv"><h2>Name</h2><p>vishnu_save_configuration — saves the configuration of VISHNU</p></div><div class="refsynopsisdiv" title="Synopsis"><h2>Synopsis</h2><div class="cmdsynopsis"><p><code class="command">vishnu_save_configuration</code>  [<code class="option">-h</code>]</p></div></div><div class="refsect1" title="DESCRIPTION"><a id="description"></a><h2>DESCRIPTION</h2><p>This commands allows an admin to save the VISHNU configuration. This configuration contains the list of users, the lists of machines and the list of local user configurations. It is saved on a xml format on a file registered on the directory $HOME/.vishnu/configurationSaved/.</p></div><div class="refsect1" title="OPTIONS"><a id="options"></a><h2>OPTIONS</h2><div class="variablelist"><dl><dt><span class="term"><code class="option">-h <em class="replaceable"><code>help</code></em></code></span></dt><dd><p>help about the command.</p></dd></dl></div></div><div class="refsect1" title="ENVIRONMENT"><a id="environment"></a><h2>ENVIRONMENT</h2><div class="variablelist"><dl><dt><span class="term"><code class="envar">VISHNU_CONFIG_FILE</code></span></dt><dd><p>Contains the path to the local configuration file for VISHNU.</p></dd></dl></div></div><div class="refsect1" title="DIAGNOSTICS"><a id="diagnostics"></a><h2>DIAGNOSTICS</h2><p>The following diagnostics may be issued on stderr and the command will return the code provided within brackets: </p><div class="variablelist"><dl><dt><span class="term">"Vishnu not available (Service bus failure)" [1]</span></dt><dd></dd><dt><span class="term">"Vishnu not available (Database error)" [2]</span></dt><dd></dd><dt><span class="term">"Vishnu not available (Database connection)" [3]</span></dt><dd></dd><dt><span class="term">"Vishnu not available (System)" [4]</span></dt><dd></dd><dt><span class="term">"Internal Error: Undefined exception" [9]</span></dt><dd></dd><dt><span class="term">"There is no open session in this terminal" [13]</span></dt><dd></dd><dt><span class="term">"Missing parameters" [14]</span></dt><dd></dd><dt><span class="term">"Vishnu initialization failed" [15]</span></dt><dd></dd><dt><span class="term">"Undefined error" [16]</span></dt><dd></dd><dt><span class="term">"The user is not an administrator" [25]</span></dt><dd></dd><dt><span class="term">"A problem occurs during the configuration saving " [39]</span></dt><dd></dd></dl></div></div><div class="refsect1" title="EXAMPLE"><a id="example"></a><h2>EXAMPLE</h2><p>To save the current configuration:</p><p>vishnu_save_configuration</p></div></div><div class="refentry" title="vishnu_restore_configuration"><div class="refentry.separator"><hr /></div><a id="idp432848"></a><div class="titlepage"></div><div class="refnamediv"><h2>Name</h2><p>vishnu_restore_configuration — restores the configuration of VISHNU</p></div><div class="refsynopsisdiv" title="Synopsis"><h2>Synopsis</h2><div class="cmdsynopsis"><p><code class="command">vishnu_restore_configuration</code>  [<code class="option">-h</code>]  <em class="replaceable"><code>filePath</code></em> </p></div></div><div class="refsect1" title="DESCRIPTION"><a id="description"></a><h2>DESCRIPTION</h2><p>This function must be used carefully as it replaces all the content of the VISHNU central database
with the information stored in the provided file. This file contains the list of users, the lists of machines 
and the list of local user configurations. It can be created using the 
vishnu_save_configuration command.
The "root" VISHNU user is the only user authorized to call this function, and this action must be done
without any other user connected to VISHNU.
After restoring, the vishnu database is re-initialized.</p></div><div class="refsect1" title="OPTIONS"><a id="options"></a><h2>OPTIONS</h2><div class="variablelist"><dl><dt><span class="term"><code class="option">-h <em class="replaceable"><code>help</code></em></code></span></dt><dd><p>help about the command.</p></dd></dl></div></div><div class="refsect1" title="ENVIRONMENT"><a id="environment"></a><h2>ENVIRONMENT</h2><div class="variablelist"><dl><dt><span class="term"><code class="envar">VISHNU_CONFIG_FILE</code></span></dt><dd><p>Contains the path to the local configuration file for VISHNU.</p></dd></dl></div></div><div class="refsect1" title="DIAGNOSTICS"><a id="diagnostics"></a><h2>DIAGNOSTICS</h2><p>The following diagnostics may be issued on stderr and the command will return the code provided within brackets: </p><div class="variablelist"><dl><dt><span class="term">"Vishnu not available (Service bus failure)" [1]</span></dt><dd></dd><dt><span class="term">"Vishnu not available (Database error)" [2]</span></dt><dd></dd><dt><span class="term">"Vishnu not available (Database connection)" [3]</span></dt><dd></dd><dt><span class="term">"Vishnu not available (System)" [4]</span></dt><dd></dd><dt><span class="term">"Internal Error: Undefined exception" [9]</span></dt><dd></dd><dt><span class="term">"There is no open session in this terminal" [13]</span></dt><dd></dd><dt><span class="term">"Missing parameters" [14]</span></dt><dd></dd><dt><span class="term">"Vishnu initialization failed" [15]</span></dt><dd></dd><dt><span class="term">"Undefined error" [16]</span></dt><dd></dd><dt><span class="term">"The user is not an administrator" [25]</span></dt><dd></dd><dt><span class="term">"A problem occurs during the configuration restoring" [40]</span></dt><dd></dd></dl></div></div><div class="refsect1" title="EXAMPLE"><a id="example"></a><h2>EXAMPLE</h2><p>To restore the configuration in /tmp/toto.cfg:</p><p>vishnu_restore_configuration /tmp/toto.cfg</p></div></div><div class="refentry" title="vishnu_add_machine"><div class="refentry.separator"><hr /></div><a id="idp448800"></a><div class="titlepage"></div><div class="refnamediv"><h2>Name</h2><p>vishnu_add_machine — adds a new machine in VISHNU</p></div><div class="refsynopsisdiv" title="Synopsis"><h2>Synopsis</h2><div class="cmdsynopsis"><p><code class="command">vishnu_add_machine</code>  [<code class="option">-h</code>]  <em class="replaceable"><code>name</code></em>   <em class="replaceable"><code>site</code></em>   <em class="replaceable"><code>language</code></em>   <em class="replaceable"><code>sshPublicKeyFile</code></em>   <em class="replaceable"><code>machineDescription</code></em> </p></div></div><div class="refsect1" title="DESCRIPTION"><a id="description"></a><h2>DESCRIPTION</h2><p>This command allows an admin to add a new machine in VISHNU.
Several machine information are mandatory such as: name, site, language
and the public ssh key of the VISHNU system account on the machine. This
public key will be provided automatically to all new VISHNU users who will
have to add it to the authorized keys of their own account on the machine.</p></div><div class="refsect1" title="OPTIONS"><a id="options"></a><h2>OPTIONS</h2><div class="variablelist"><dl><dt><span class="term"><code class="option">-h <em class="replaceable"><code>help</code></em></code></span></dt><dd><p>help about the command.</p></dd></dl></div></div><div class="refsect1" title="ENVIRONMENT"><a id="environment"></a><h2>ENVIRONMENT</h2><div class="variablelist"><dl><dt><span class="term"><code class="envar">VISHNU_CONFIG_FILE</code></span></dt><dd><p>Contains the path to the local configuration file for VISHNU.</p></dd></dl></div></div><div class="refsect1" title="DIAGNOSTICS"><a id="diagnostics"></a><h2>DIAGNOSTICS</h2><p>The following diagnostics may be issued on stderr and the command will return the code provided within brackets: </p><div class="variablelist"><dl><dt><span class="term">"Vishnu not available (Service bus failure)" [1]</span></dt><dd></dd><dt><span class="term">"Vishnu not available (Database error)" [2]</span></dt><dd></dd><dt><span class="term">"Vishnu not available (Database connection)" [3]</span></dt><dd></dd><dt><span class="term">"Vishnu not available (System)" [4]</span></dt><dd></dd><dt><span class="term">"Internal Error: Undefined exception" [9]</span></dt><dd></dd><dt><span class="term">"There is no open session in this terminal" [13]</span></dt><dd></dd><dt><span class="term">"Missing parameters" [14]</span></dt><dd></dd><dt><span class="term">"Vishnu initialization failed" [15]</span></dt><dd></dd><dt><span class="term">"Undefined error" [16]</span></dt><dd></dd><dt><span class="term">"The user is not an administrator" [25]</span></dt><dd></dd><dt><span class="term">"The session key is unrecognized" [28]</span></dt><dd></dd><dt><span class="term">"The sessionKey is expired. The session is closed." [29]</span></dt><dd></dd><dt><span class="term">"The machineId already exists in the database" [33]</span></dt><dd></dd><dt><span class="term">"The closure policy is unknown" [42]</span></dt><dd></dd></dl></div></div><div class="refsect1" title="EXAMPLE"><a id="example"></a><h2>EXAMPLE</h2><p>To add the machine perceval in paris with the description in french "ceci est une description"  with the public key in /tmp/key.pub:</p><p>vishnu_add_machine perceval paris fr /tmp/key.pub "ceci est une description"</p></div></div><div class="refentry" title="vishnu_update_machine"><div class="refentry.separator"><hr /></div><a id="idp467720"></a><div class="titlepage"></div><div class="refnamediv"><h2>Name</h2><p>vishnu_update_machine — updates machine description</p></div><div class="refsynopsisdiv" title="Synopsis"><h2>Synopsis</h2><div class="cmdsynopsis"><p><code class="command">vishnu_update_machine</code>  [<code class="option">-h</code>] [<code class="option">-n <em class="replaceable"><code>name</code></em></code>] [<code class="option">-s <em class="replaceable"><code>site</code></em></code>] [<code class="option">-d <em class="replaceable"><code>machineDescription</code></em></code>] [<code class="option">-l <em class="replaceable"><code>language</code></em></code>] [<code class="option">-t <em class="replaceable"><code>status</code></em></code>] [<code class="option">-k <em class="replaceable"><code>sshPublicKeyFile</code></em></code>]  <em class="replaceable"><code>machineId</code></em> </p></div></div><div class="refsect1" title="DESCRIPTION"><a id="description"></a><h2>DESCRIPTION</h2><p>This command allows an admin to update a  VISHNU machine or to locked it. A machine locked is not usable.</p></div><div class="refsect1" title="OPTIONS"><a id="options"></a><h2>OPTIONS</h2><div class="variablelist"><dl><dt><span class="term"><code class="option">-h <em class="replaceable"><code>help</code></em></code></span></dt><dd><p>help about the command.</p></dd><dt><span class="term"><code class="option">-n <em class="replaceable"><code>name</code></em></code></span></dt><dd><p>represents the name of the machine.</p></dd><dt><span class="term"><code class="option">-s <em class="replaceable"><code>site</code></em></code></span></dt><dd><p>represents the location of the machine.</p></dd><dt><span class="term"><code class="option">-d <em class="replaceable"><code>machineDescription</code></em></code></span></dt><dd><p>represents the description of the machine.</p></dd><dt><span class="term"><code class="option">-l <em class="replaceable"><code>language</code></em></code></span></dt><dd><p>represents the language used for the description of the machine.</p></dd><dt><span class="term"><code class="option">-t <em class="replaceable"><code>status</code></em></code></span></dt><dd><p>represents the status of the machine.
The value must be an integer. Predefined values are: -1 (UNDEFINED), 0 (INACTIVE), 1 (ACTIVE).</p></dd><dt><span class="term"><code class="option">-k <em class="replaceable"><code>sshPublicKeyFile</code></em></code></span></dt><dd><p>contains the path to the SSH public key used by VISHNU to access local user accounts.</p></dd></dl></div></div><div class="refsect1" title="ENVIRONMENT"><a id="environment"></a><h2>ENVIRONMENT</h2><div class="variablelist"><dl><dt><span class="term"><code class="envar">VISHNU_CONFIG_FILE</code></span></dt><dd><p>Contains the path to the local configuration file for VISHNU.</p></dd></dl></div></div><div class="refsect1" title="DIAGNOSTICS"><a id="diagnostics"></a><h2>DIAGNOSTICS</h2><p>The following diagnostics may be issued on stderr and the command will return the code provided within brackets: </p><div class="variablelist"><dl><dt><span class="term">"Vishnu not available (Service bus failure)" [1]</span></dt><dd></dd><dt><span class="term">"Vishnu not available (Database error)" [2]</span></dt><dd></dd><dt><span class="term">"Vishnu not available (Database connection)" [3]</span></dt><dd></dd><dt><span class="term">"Vishnu not available (System)" [4]</span></dt><dd></dd><dt><span class="term">"Internal Error: Undefined exception" [9]</span></dt><dd></dd><dt><span class="term">"There is no open session in this terminal" [13]</span></dt><dd></dd><dt><span class="term">"Missing parameters" [14]</span></dt><dd></dd><dt><span class="term">"Vishnu initialization failed" [15]</span></dt><dd></dd><dt><span class="term">"Undefined error" [16]</span></dt><dd></dd><dt><span class="term">"The user is not an administrator" [25]</span></dt><dd></dd><dt><span class="term">"The session key is unrecognized" [28]</span></dt><dd></dd><dt><span class="term">"The sessionKey is expired. The session is closed." [29]</span></dt><dd></dd><dt><span class="term">"The machine id is unknown" [32]</span></dt><dd></dd><dt><span class="term">"The closure policy is unknown" [42]</span></dt><dd></dd></dl></div></div><div class="refsect1" title="EXAMPLE"><a id="example"></a><h2>EXAMPLE</h2><p>To change the name of the machine whose id is machine_1 to provencal:</p><p>vishnu_update_machine machine_1 -n provencal</p></div></div><div class="refentry" title="vishnu_delete_machine"><div class="refentry.separator"><hr /></div><a id="idp493960"></a><div class="titlepage"></div><div class="refnamediv"><h2>Name</h2><p>vishnu_delete_machine — removes a machine from VISHNU</p></div><div class="refsynopsisdiv" title="Synopsis"><h2>Synopsis</h2><div class="cmdsynopsis"><p><code class="command">vishnu_delete_machine</code>  [<code class="option">-h</code>]  <em class="replaceable"><code>machineId</code></em> </p></div></div><div class="refsect1" title="DESCRIPTION"><a id="description"></a><h2>DESCRIPTION</h2><p>This command allows an admin to delete a machine from VISHNU. When a machine is deleted all of its information are deleted from VISHNU.</p></div><div class="refsect1" title="OPTIONS"><a id="options"></a><h2>OPTIONS</h2><div class="variablelist"><dl><dt><span class="term"><code class="option">-h <em class="replaceable"><code>help</code></em></code></span></dt><dd><p>help about the command.</p></dd></dl></div></div><div class="refsect1" title="ENVIRONMENT"><a id="environment"></a><h2>ENVIRONMENT</h2><div class="variablelist"><dl><dt><span class="term"><code class="envar">VISHNU_CONFIG_FILE</code></span></dt><dd><p>Contains the path to the local configuration file for VISHNU.</p></dd></dl></div></div><div class="refsect1" title="DIAGNOSTICS"><a id="diagnostics"></a><h2>DIAGNOSTICS</h2><p>The following diagnostics may be issued on stderr and the command will return the code provided within brackets: </p><div class="variablelist"><dl><dt><span class="term">"Vishnu not available (Service bus failure)" [1]</span></dt><dd></dd><dt><span class="term">"Vishnu not available (Database error)" [2]</span></dt><dd></dd><dt><span class="term">"Vishnu not available (Database connection)" [3]</span></dt><dd></dd><dt><span class="term">"Vishnu not available (System)" [4]</span></dt><dd></dd><dt><span class="term">"Internal Error: Undefined exception" [9]</span></dt><dd></dd><dt><span class="term">"There is no open session in this terminal" [13]</span></dt><dd></dd><dt><span class="term">"Missing parameters" [14]</span></dt><dd></dd><dt><span class="term">"Vishnu initialization failed" [15]</span></dt><dd></dd><dt><span class="term">"Undefined error" [16]</span></dt><dd></dd><dt><span class="term">"The user is not an administrator" [25]</span></dt><dd></dd><dt><span class="term">"The session key is unrecognized" [28]</span></dt><dd></dd><dt><span class="term">"The sessionKey is expired. The session is closed." [29]</span></dt><dd></dd><dt><span class="term">"The machine id is unknown" [32]</span></dt><dd></dd></dl></div></div><div class="refsect1" title="EXAMPLE"><a id="example"></a><h2>EXAMPLE</h2><p>To delete the machine machine_1:</p><p>vishnu_delete_machine machine_1</p></div></div><div class="refentry" title="vishnu_list_users"><div class="refentry.separator"><hr /></div><a id="idp510504"></a><div class="titlepage"></div><div class="refnamediv"><h2>Name</h2><p>vishnu_list_users — lists VISHNU users</p></div><div class="refsynopsisdiv" title="Synopsis"><h2>Synopsis</h2><div class="cmdsynopsis"><p><code class="command">vishnu_list_users</code>  [<code class="option">-h</code>] [<code class="option">-u <em class="replaceable"><code>userId</code></em></code>] [<code class="option">-i <em class="replaceable"><code>authSystemId</code></em></code>]</p></div></div><div class="refsect1" title="DESCRIPTION"><a id="description"></a><h2>DESCRIPTION</h2><p>This command allows an admin to display all users information except the passwords.</p></div><div class="refsect1" title="OPTIONS"><a id="options"></a><h2>OPTIONS</h2><div class="variablelist"><dl><dt><span class="term"><code class="option">-h <em class="replaceable"><code>help</code></em></code></span></dt><dd><p>help about the command.</p></dd><dt><span class="term"><code class="option">-u <em class="replaceable"><code>userId</code></em></code></span></dt><dd><p>allows an admin to get information about a specific user identified by his/her userId.</p></dd><dt><span class="term"><code class="option">-i <em class="replaceable"><code>authSystemId</code></em></code></span></dt><dd><p>is an option to list users who have local user-authentication configurations on a specific user-authentication system.</p></dd></dl></div></div><div class="refsect1" title="ENVIRONMENT"><a id="environment"></a><h2>ENVIRONMENT</h2><div class="variablelist"><dl><dt><span class="term"><code class="envar">VISHNU_CONFIG_FILE</code></span></dt><dd><p>Contains the path to the local configuration file for VISHNU.</p></dd></dl></div></div><div class="refsect1" title="DIAGNOSTICS"><a id="diagnostics"></a><h2>DIAGNOSTICS</h2><p>The following diagnostics may be issued on stderr and the command will return the code provided within brackets: </p><div class="variablelist"><dl><dt><span class="term">"Vishnu not available (Service bus failure)" [1]</span></dt><dd></dd><dt><span class="term">"Vishnu not available (Database error)" [2]</span></dt><dd></dd><dt><span class="term">"Vishnu not available (Database connection)" [3]</span></dt><dd></dd><dt><span class="term">"Vishnu not available (System)" [4]</span></dt><dd></dd><dt><span class="term">"Internal Error: Undefined exception" [9]</span></dt><dd></dd><dt><span class="term">"There is no open session in this terminal" [13]</span></dt><dd></dd><dt><span class="term">"Missing parameters" [14]</span></dt><dd></dd><dt><span class="term">"Vishnu initialization failed" [15]</span></dt><dd></dd><dt><span class="term">"Undefined error" [16]</span></dt><dd></dd><dt><span class="term">"The userId is unknown" [21]</span></dt><dd></dd><dt><span class="term">"The user is not an administrator" [25]</span></dt><dd></dd><dt><span class="term">"The session key is unrecognized" [28]</span></dt><dd></dd><dt><span class="term">"The sessionKey is expired. The session is closed." [29]</span></dt><dd></dd></dl></div></div><div class="refsect1" title="EXAMPLE"><a id="example"></a><h2>EXAMPLE</h2><p>To list all the users:</p><p>vishnu_list_users</p></div></div><div class="refentry" title="vishnu_configure_default_option"><div class="refentry.separator"><hr /></div><a id="idp529680"></a><div class="titlepage"></div><div class="refnamediv"><h2>Name</h2><p>vishnu_configure_default_option — configures a default option value</p></div><div class="refsynopsisdiv" title="Synopsis"><h2>Synopsis</h2><div class="cmdsynopsis"><p><code class="command">vishnu_configure_default_option</code>  [<code class="option">-h</code>]  <em class="replaceable"><code>optionName</code></em>   <em class="replaceable"><code>value</code></em> </p></div></div><div class="refsect1" title="DESCRIPTION"><a id="description"></a><h2>DESCRIPTION</h2><p>Options in VISHNU corresponds to parameters of some VISHNU commands 
(e.g. the close policy for vishnu_connect)
that can be preset in the user configuration stored by the VISHNU system.
This command allows an administrator to configure the default value of an option;
this is the value that will be applied when the user has no configuration defined for
that option using the vishnu_configure_option command.</p></div><div class="refsect1" title="OPTIONS"><a id="options"></a><h2>OPTIONS</h2><div class="variablelist"><dl><dt><span class="term"><code class="option">-h <em class="replaceable"><code>help</code></em></code></span></dt><dd><p>help about the command.</p></dd></dl></div></div><div class="refsect1" title="ENVIRONMENT"><a id="environment"></a><h2>ENVIRONMENT</h2><div class="variablelist"><dl><dt><span class="term"><code class="envar">VISHNU_CONFIG_FILE</code></span></dt><dd><p>Contains the path to the local configuration file for VISHNU.</p></dd></dl></div></div><div class="refsect1" title="DIAGNOSTICS"><a id="diagnostics"></a><h2>DIAGNOSTICS</h2><p>The following diagnostics may be issued on stderr and the command will return the code provided within brackets: </p><div class="variablelist"><dl><dt><span class="term">"Vishnu not available (Service bus failure)" [1]</span></dt><dd></dd><dt><span class="term">"Vishnu not available (Database error)" [2]</span></dt><dd></dd><dt><span class="term">"Vishnu not available (Database connection)" [3]</span></dt><dd></dd><dt><span class="term">"Vishnu not available (System)" [4]</span></dt><dd></dd><dt><span class="term">"Internal Error: Undefined exception" [9]</span></dt><dd></dd><dt><span class="term">"There is no open session in this terminal" [13]</span></dt><dd></dd><dt><span class="term">"Missing parameters" [14]</span></dt><dd></dd><dt><span class="term">"Vishnu initialization failed" [15]</span></dt><dd></dd><dt><span class="term">"Undefined error" [16]</span></dt><dd></dd><dt><span class="term">"The user is not an administrator" [25]</span></dt><dd></dd><dt><span class="term">"The session key is unrecognized" [28]</span></dt><dd></dd><dt><span class="term">"The sessionKey is expired. The session is closed." [29]</span></dt><dd></dd><dt><span class="term">"The name of the user option is unknown" [41]</span></dt><dd></dd><dt><span class="term">"The value of the timeout is incorrect" [43]</span></dt><dd></dd><dt><span class="term">"The value of the transfer command is incorrect" [44]</span></dt><dd></dd></dl></div></div><div class="refsect1" title="EXAMPLE"><a id="example"></a><h2>EXAMPLE</h2><p>To configure the option VISHNU_TIMEOUT with the value 42:</p><p>vishnu_configure_default_option VISHNU_TIMEOUT 42</p></div></div><div class="refentry" title="vishnu_add_auth_system"><div class="refentry.separator"><hr /></div><a id="idp548144"></a><div class="titlepage"></div><div class="refnamediv"><h2>Name</h2><p>vishnu_add_auth_system — adds a new user-authentication system in VISHNU</p></div><div class="refsynopsisdiv" title="Synopsis"><h2>Synopsis</h2><div class="cmdsynopsis"><p><code class="command">vishnu_add_auth_system</code>  [<code class="option">-h</code>] [<code class="option">-b <em class="replaceable"><code>ldapBase</code></em></code>]  <em class="replaceable"><code>name</code></em>   <em class="replaceable"><code>URI</code></em>   <em class="replaceable"><code>authLogin</code></em>   <em class="replaceable"><code>authPassword</code></em>   <em class="replaceable"><code>userPasswordEncryption</code></em>   <em class="replaceable"><code>type</code></em> </p></div></div><div class="refsect1" title="DESCRIPTION"><a id="description"></a><h2>DESCRIPTION</h2><p>This command allows an admin to add a new user-authentication system in VISHNU.
Several user-authentication system's information are mandatory such as: URI,  login, password, 
type and optionally for LDAP the DN of the root entry. By default, the type of the user-authentication system is LDAP. </p></div><div class="refsect1" title="OPTIONS"><a id="options"></a><h2>OPTIONS</h2><div class="variablelist"><dl><dt><span class="term"><code class="option">-h <em class="replaceable"><code>help</code></em></code></span></dt><dd><p>help about the command.</p></dd><dt><span class="term"><code class="option">-b <em class="replaceable"><code>ldapBase</code></em></code></span></dt><dd><p>is an option for user-authentication system based on LDAP which specifies the DN of the root entry .</p></dd></dl></div></div><div class="refsect1" title="ENVIRONMENT"><a id="environment"></a><h2>ENVIRONMENT</h2><div class="variablelist"><dl><dt><span class="term"><code class="envar">VISHNU_CONFIG_FILE</code></span></dt><dd><p>Contains the path to the local configuration file for VISHNU.</p></dd></dl></div></div><div class="refsect1" title="DIAGNOSTICS"><a id="diagnostics"></a><h2>DIAGNOSTICS</h2><p>The following diagnostics may be issued on stderr and the command will return the code provided within brackets: </p><div class="variablelist"><dl><dt><span class="term">"Vishnu not available (Service bus failure)" [1]</span></dt><dd></dd><dt><span class="term">"Vishnu not available (Database error)" [2]</span></dt><dd></dd><dt><span class="term">"Vishnu not available (Database connection)" [3]</span></dt><dd></dd><dt><span class="term">"Vishnu not available (System)" [4]</span></dt><dd></dd><dt><span class="term">"Internal Error: Undefined exception" [9]</span></dt><dd></dd><dt><span class="term">"There is no open session in this terminal" [13]</span></dt><dd></dd><dt><span class="term">"Missing parameters" [14]</span></dt><dd></dd><dt><span class="term">"Vishnu initialization failed" [15]</span></dt><dd></dd><dt><span class="term">"Undefined error" [16]</span></dt><dd></dd><dt><span class="term">"The user is not an administrator" [25]</span></dt><dd></dd><dt><span class="term">"The session key is unrecognized" [28]</span></dt><dd></dd><dt><span class="term">"The sessionKey is expired. The session is closed." [29]</span></dt><dd></dd><dt><span class="term">"The identifier (name or generated identifier) of the user-authentication system already exists" [50]</span></dt><dd></dd><dt><span class="term">"The encryption method is unknown" [53]</span></dt><dd></dd></dl></div></div><div class="refsect1" title="EXAMPLE"><a id="example"></a><h2>EXAMPLE</h2><p>To add an LDAP's user-authentication system on VISHNU named CLAMART with the parameters which follows: URI ldap://127.0.0.1:389/ , login cn=ldapadmin,dc=sysfera,dc=fr, password secret and DN root entry dc=sysfera,dc=fr: </p><p>vishnu_add_auth_system CLAMART ldap://127.0.0.1:389/ cn=ldapadmin,dc=sysfera,dc=fr secret -b uid=\$USERNAME,ou=users,dc=sysfera,dc=fr </p></div></div><div class="refentry" title="vishnu_update_auth_system"><div class="refentry.separator"><hr /></div><a id="idp569152"></a><div class="titlepage"></div><div class="refnamediv"><h2>Name</h2><p>vishnu_update_auth_system — updates a user-authentication system in VISHNU</p></div><div class="refsynopsisdiv" title="Synopsis"><h2>Synopsis</h2><div class="cmdsynopsis"><p><code class="command">vishnu_update_auth_system</code>  [<code class="option">-h</code>] [<code class="option">-n <em class="replaceable"><code>name</code></em></code>] [<code class="option">-i <em class="replaceable"><code>URI</code></em></code>] [<code class="option">-u <em class="replaceable"><code>authLogin</code></em></code>] [<code class="option">-w <em class="replaceable"><code>authPassword</code></em></code>] [<code class="option">-e <em class="replaceable"><code>userPasswordEncryption</code></em></code>] [<code class="option">-t <em class="replaceable"><code>type</code></em></code>] [<code class="option">-s <em class="replaceable"><code>status</code></em></code>] [<code class="option">-b <em class="replaceable"><code>ldapBase</code></em></code>]  <em class="replaceable"><code>authSystemId</code></em> </p></div></div><div class="refsect1" title="DESCRIPTION"><a id="description"></a><h2>DESCRIPTION</h2><p>This command allows an admin to update a user-authentication system in VISHNU.
It is possible to change the parameters which follow: URI,  login, password, 
type and optionally for LDAP the DN of the root entry. By default, the type of the user-authentication system is LDAP. </p></div><div class="refsect1" title="OPTIONS"><a id="options"></a><h2>OPTIONS</h2><div class="variablelist"><dl><dt><span class="term"><code class="option">-h <em class="replaceable"><code>help</code></em></code></span></dt><dd><p>help about the command.</p></dd><dt><span class="term"><code class="option">-n <em class="replaceable"><code>name</code></em></code></span></dt><dd><p>corresponds to the user-authentication system's name.</p></dd><dt><span class="term"><code class="option">-i <em class="replaceable"><code>URI</code></em></code></span></dt><dd><p>is the URI of the user-authentication systems (by the form host:port for LDAP).</p></dd><dt><span class="term"><code class="option">-u <em class="replaceable"><code>authLogin</code></em></code></span></dt><dd><p>is the login used to connect to the user-authentication system.</p></dd><dt><span class="term"><code class="option">-w <em class="replaceable"><code>authPassword</code></em></code></span></dt><dd><p>is the password used to connect to the user-authentication system.</p></dd><dt><span class="term"><code class="option">-e <em class="replaceable"><code>userPasswordEncryption</code></em></code></span></dt><dd><p>represents the encryption method used to encrypt user's password.
The value must be an integer. Predefined values are: -1 (UNDEFINED), 0 (SSHA).</p></dd><dt><span class="term"><code class="option">-t <em class="replaceable"><code>type</code></em></code></span></dt><dd><p>represents the type of the user-authentication system.
The value must be an integer. Predefined values are: -1 (UNDEFINED), 0 (LDAP).</p></dd><dt><span class="term"><code class="option">-s <em class="replaceable"><code>status</code></em></code></span></dt><dd><p>represents the status of the user-authentication system.
The value must be an integer. Predefined values are: -1 (UNDEFINED), 0 (INACTIVE), 1 (ACTIVE).</p></dd><dt><span class="term"><code class="option">-b <em class="replaceable"><code>ldapBase</code></em></code></span></dt><dd><p>is an option for user-authentication system based on LDAP which specifies the DN of the root entry .</p></dd></dl></div></div><div class="refsect1" title="ENVIRONMENT"><a id="environment"></a><h2>ENVIRONMENT</h2><div class="variablelist"><dl><dt><span class="term"><code class="envar">VISHNU_CONFIG_FILE</code></span></dt><dd><p>Contains the path to the local configuration file for VISHNU.</p></dd></dl></div></div><div class="refsect1" title="DIAGNOSTICS"><a id="diagnostics"></a><h2>DIAGNOSTICS</h2><p>The following diagnostics may be issued on stderr and the command will return the code provided within brackets: </p><div class="variablelist"><dl><dt><span class="term">"Vishnu not available (Service bus failure)" [1]</span></dt><dd></dd><dt><span class="term">"Vishnu not available (Database error)" [2]</span></dt><dd></dd><dt><span class="term">"Vishnu not available (Database connection)" [3]</span></dt><dd></dd><dt><span class="term">"Vishnu not available (System)" [4]</span></dt><dd></dd><dt><span class="term">"Internal Error: Undefined exception" [9]</span></dt><dd></dd><dt><span class="term">"There is no open session in this terminal" [13]</span></dt><dd></dd><dt><span class="term">"Missing parameters" [14]</span></dt><dd></dd><dt><span class="term">"Vishnu initialization failed" [15]</span></dt><dd></dd><dt><span class="term">"Undefined error" [16]</span></dt><dd></dd><dt><span class="term">"The user is not an administrator" [25]</span></dt><dd></dd><dt><span class="term">"The session key is unrecognized" [28]</span></dt><dd></dd><dt><span class="term">"The sessionKey is expired. The session is closed." [29]</span></dt><dd></dd><dt><span class="term">"The user-authentication system is unknown or locked" [48]</span></dt><dd></dd><dt><span class="term">"The user-authentication system is already locked" [49]</span></dt><dd></dd><dt><span class="term">"The encryption method is unknown" [53]</span></dt><dd></dd></dl></div></div><div class="refsect1" title="EXAMPLE"><a id="example"></a><h2>EXAMPLE</h2><p>To change the address of a user-authentication system whose identifier is AUTHENLDAP_1:</p><p>vishnu_update_auth_system -i ldap://192.128.1.1:389/ AUTHENLDAP_1</p></div></div><div class="refentry" title="vishnu_delete_auth_system"><div class="refentry.separator"><hr /></div><a id="idp599560"></a><div class="titlepage"></div><div class="refnamediv"><h2>Name</h2><p>vishnu_delete_auth_system — removes a user-authentication system from VISHNU</p></div><div class="refsynopsisdiv" title="Synopsis"><h2>Synopsis</h2><div class="cmdsynopsis"><p><code class="command">vishnu_delete_auth_system</code>  [<code class="option">-h</code>]  <em class="replaceable"><code>authSystemId</code></em> </p></div></div><div class="refsect1" title="DESCRIPTION"><a id="description"></a><h2>DESCRIPTION</h2><p>This command allows an admin to remove a user-authentication system from VISHNU.</p></div><div class="refsect1" title="OPTIONS"><a id="options"></a><h2>OPTIONS</h2><div class="variablelist"><dl><dt><span class="term"><code class="option">-h <em class="replaceable"><code>help</code></em></code></span></dt><dd><p>help about the command.</p></dd></dl></div></div><div class="refsect1" title="ENVIRONMENT"><a id="environment"></a><h2>ENVIRONMENT</h2><div class="variablelist"><dl><dt><span class="term"><code class="envar">VISHNU_CONFIG_FILE</code></span></dt><dd><p>Contains the path to the local configuration file for VISHNU.</p></dd></dl></div></div><div class="refsect1" title="DIAGNOSTICS"><a id="diagnostics"></a><h2>DIAGNOSTICS</h2><p>The following diagnostics may be issued on stderr and the command will return the code provided within brackets: </p><div class="variablelist"><dl><dt><span class="term">"Vishnu not available (Service bus failure)" [1]</span></dt><dd></dd><dt><span class="term">"Vishnu not available (Database error)" [2]</span></dt><dd></dd><dt><span class="term">"Vishnu not available (Database connection)" [3]</span></dt><dd></dd><dt><span class="term">"Vishnu not available (System)" [4]</span></dt><dd></dd><dt><span class="term">"Internal Error: Undefined exception" [9]</span></dt><dd></dd><dt><span class="term">"There is no open session in this terminal" [13]</span></dt><dd></dd><dt><span class="term">"Missing parameters" [14]</span></dt><dd></dd><dt><span class="term">"Vishnu initialization failed" [15]</span></dt><dd></dd><dt><span class="term">"Undefined error" [16]</span></dt><dd></dd><dt><span class="term">"The user is not an administrator" [25]</span></dt><dd></dd><dt><span class="term">"The session key is unrecognized" [28]</span></dt><dd></dd><dt><span class="term">"The sessionKey is expired. The session is closed." [29]</span></dt><dd></dd><dt><span class="term">"The user-authentication system is unknown or locked" [48]</span></dt><dd></dd></dl></div></div><div class="refsect1" title="EXAMPLE"><a id="example"></a><h2>EXAMPLE</h2><p>To remove a user-authentication system whose identifier is AUTHENLDAP_1:</p><p>vishnu_delete_auth_system AUTHENLDAP_1</p></div></div></div><div class="reference" title="UMS C++ API Reference"><div class="titlepage"><div><div><h1 class="title"><a id="idp616232"></a>UMS C++ API Reference</h1></div></div><hr /></div><div class="toc"><p><b>Table of Contents</b></p><dl><dt><span class="refentrytitle"><a href="#idp616584">addUser</a></span><span class="refpurpose"> — adds a new VISHNU user</span></dt><dt><span class="refentrytitle"><a href="#idp634960">updateUser</a></span><span class="refpurpose"> — updates the user information except the userId and the password</span></dt><dt><span class="refentrytitle"><a href="#idp649304">deleteUser</a></span><span class="refpurpose"> — removes a user from VISHNU</span></dt><dt><span class="refentrytitle"><a href="#idp662464">resetPassword</a></span><span class="refpurpose"> — resets the password of a user</span></dt><dt><span class="refentrytitle"><a href="#idp676800">saveConfiguration</a></span><span class="refpurpose"> — saves the configuration of VISHNU</span></dt><dt><span class="refentrytitle"><a href="#idp688368">restoreConfiguration</a></span><span class="refpurpose"> — restores the configuration of VISHNU</span></dt><dt><span class="refentrytitle"><a href="#idp700304">addMachine</a></span><span class="refpurpose"> — adds a new machine in VISHNU</span></dt><dt><span class="refentrytitle"><a href="#idp713752">updateMachine</a></span><span class="refpurpose"> — updates machine description</span></dt><dt><span class="refentrytitle"><a href="#idp726816">deleteMachine</a></span><span class="refpurpose"> — removes a machine from VISHNU</span></dt><dt><span class="refentrytitle"><a href="#idp739344">listUsers</a></span><span class="refpurpose"> — lists VISHNU users</span></dt><dt><span class="refentrytitle"><a href="#idp753144">configureDefaultOption</a></span><span class="refpurpose"> — configures a default option value</span></dt><dt><span class="refentrytitle"><a href="#idp767248">addAuthSystem</a></span><span class="refpurpose"> — adds a new user-authentication system in VISHNU</span></dt><dt><span class="refentrytitle"><a href="#idp780744">updateAuthSystem</a></span><span class="refpurpose"> — updates a user-authentication system in VISHNU</span></dt><dt><span class="refentrytitle"><a href="#idp794752">deleteAuthSystem</a></span><span class="refpurpose"> — removes a user-authentication system from VISHNU</span></dt></dl></div><div class="refentry" title="addUser"><a id="idp616584"></a><div class="titlepage"></div><div class="refnamediv"><h2>Name</h2><p>addUser — adds a new VISHNU user</p></div><div class="refsynopsisdiv" title="Synopsis"><h2>Synopsis</h2><div class="funcsynopsis"><table border="0" summary="Function synopsis" cellspacing="0" cellpadding="0" class="funcprototype-table"><tr><td><code class="funcdef">int <b class="fsfunc">vishnu::addUser</b>(</code></td><td><var class="pdparam">sessionKey</var>, </td><td> </td></tr><tr><td> </td><td><var class="pdparam">newUser</var><code>)</code>;</td><td> </td></tr></table><div class="paramdef-list"><code>const string&amp; <var class="pdparam">sessionKey</var></code>;<br /><code>User&amp; <var class="pdparam">newUser</var></code>;</div><div class="funcprototype-spacer"> </div></div></div><div class="refsect1" title="DESCRIPTION"><a id="description"></a><h2>DESCRIPTION</h2><p>This command allows an admin to add a new user in VISHNU. 
Several user information are necessary such as: lastname, firtsname and email address. 
The admin also gives a VISHNU privilege to the new user and a new userId 
and password are sent to the user by email.</p></div><div class="refsect1" title="ARGUMENTS"><a id="arguments"></a><h2>ARGUMENTS</h2><div class="variablelist"><dl><dt><span class="term"><span class="emphasis"><em>sessionKey</em></span></span></dt><dd><p>Input argument. The sessionKey is the encrypted identifier of the session generated by VISHNU.</p></dd><dt><span class="term"><span class="emphasis"><em>newUser</em></span></span></dt><dd><p>Input/Output argument. Object containing the new user information.</p></dd></dl></div></div><div class="refsect1" title="EXCEPTIONS"><a id="exceptions"></a><h2>EXCEPTIONS</h2><p>The following exceptions may be thrown: </p><div class="variablelist"><dl><dt><span class="term">"Vishnu not available (Service bus failure)" [1]</span></dt><dd></dd><dt><span class="term">"Vishnu not available (Database error)" [2]</span></dt><dd></dd><dt><span class="term">"Vishnu not available (Database connection)" [3]</span></dt><dd></dd><dt><span class="term">"Vishnu not available (System)" [4]</span></dt><dd></dd><dt><span class="term">"Internal Error: Undefined exception" [9]</span></dt><dd></dd><dt><span class="term">"The userId already exists in the database" [22]</span></dt><dd></dd><dt><span class="term">"The user is locked" [23]</span></dt><dd></dd><dt><span class="term">"The user is not an administrator" [25]</span></dt><dd></dd><dt><span class="term">"The mail adress is invalid" [27]</span></dt><dd></dd><dt><span class="term">"The session key is unrecognized" [28]</span></dt><dd></dd><dt><span class="term">"The sessionKey is expired. The session is closed." [29]</span></dt><dd></dd><dt><span class="term">"The machine is locked" [34]</span></dt><dd></dd></dl></div></div></div><div class="refentry" title="updateUser"><div class="refentry.separator"><hr /></div><a id="idp634960"></a><div class="titlepage"></div><div class="refnamediv"><h2>Name</h2><p>updateUser — updates the user information except the userId and the password</p></div><div class="refsynopsisdiv" title="Synopsis"><h2>Synopsis</h2><div class="funcsynopsis"><table border="0" summary="Function synopsis" cellspacing="0" cellpadding="0" class="funcprototype-table"><tr><td><code class="funcdef">int <b class="fsfunc">vishnu::updateUser</b>(</code></td><td><var class="pdparam">sessionKey</var>, </td><td> </td></tr><tr><td> </td><td><var class="pdparam">user</var><code>)</code>;</td><td> </td></tr></table><div class="paramdef-list"><code>const string&amp; <var class="pdparam">sessionKey</var></code>;<br /><code>const User&amp; <var class="pdparam">user</var></code>;</div><div class="funcprototype-spacer"> </div></div></div><div class="refsect1" title="DESCRIPTION"><a id="description"></a><h2>DESCRIPTION</h2><p>This command allows an admin to update a VISHNU user information or to lock a user.  When a user is locked, she/he can not uses VISHNU. However, it is not possible to change the privilege of another admin.</p></div><div class="refsect1" title="ARGUMENTS"><a id="arguments"></a><h2>ARGUMENTS</h2><div class="variablelist"><dl><dt><span class="term"><span class="emphasis"><em>sessionKey</em></span></span></dt><dd><p>Input argument. The sessionKey is the encrypted identifier of the session generated by VISHNU.</p></dd><dt><span class="term"><span class="emphasis"><em>user</em></span></span></dt><dd><p>Input argument. Object containing user information.</p></dd></dl></div></div><div class="refsect1" title="EXCEPTIONS"><a id="exceptions"></a><h2>EXCEPTIONS</h2><p>The following exceptions may be thrown: </p><div class="variablelist"><dl><dt><span class="term">"Vishnu not available (Service bus failure)" [1]</span></dt><dd></dd><dt><span class="term">"Vishnu not available (Database error)" [2]</span></dt><dd></dd><dt><span class="term">"Vishnu not available (Database connection)" [3]</span></dt><dd></dd><dt><span class="term">"Vishnu not available (System)" [4]</span></dt><dd></dd><dt><span class="term">"Internal Error: Undefined exception" [9]</span></dt><dd></dd><dt><span class="term">"The userId is unknown" [21]</span></dt><dd></dd><dt><span class="term">"The user is locked" [23]</span></dt><dd></dd><dt><span class="term">"Trying to lock a user account that is already locked" [24]</span></dt><dd></dd><dt><span class="term">"The user is not an administrator" [25]</span></dt><dd></dd><dt><span class="term">"The mail adress is invalid" [27]</span></dt><dd></dd><dt><span class="term">"The session key is unrecognized" [28]</span></dt><dd></dd><dt><span class="term">"The sessionKey is expired. The session is closed." [29]</span></dt><dd></dd></dl></div></div></div><div class="refentry" title="deleteUser"><div class="refentry.separator"><hr /></div><a id="idp649304"></a><div class="titlepage"></div><div class="refnamediv"><h2>Name</h2><p>deleteUser — removes a user from VISHNU</p></div><div class="refsynopsisdiv" title="Synopsis"><h2>Synopsis</h2><div class="funcsynopsis"><table border="0" summary="Function synopsis" cellspacing="0" cellpadding="0" class="funcprototype-table"><tr><td><code class="funcdef">int <b class="fsfunc">vishnu::deleteUser</b>(</code></td><td><var class="pdparam">sessionKey</var>, </td><td> </td></tr><tr><td> </td><td><var class="pdparam">userId</var><code>)</code>;</td><td> </td></tr></table><div class="paramdef-list"><code>const string&amp; <var class="pdparam">sessionKey</var></code>;<br /><code>const string&amp; <var class="pdparam">userId</var></code>;</div><div class="funcprototype-spacer"> </div></div></div><div class="refsect1" title="DESCRIPTION"><a id="description"></a><h2>DESCRIPTION</h2><p>This command allows an admin to delete a user from VISHNU. When a user is deleted from VISHNU all of her/his information are deleted from VISHNU. However, it is not possible to delete the VISHNU root user.</p></div><div class="refsect1" title="ARGUMENTS"><a id="arguments"></a><h2>ARGUMENTS</h2><div class="variablelist"><dl><dt><span class="term"><span class="emphasis"><em>sessionKey</em></span></span></dt><dd><p>Input argument. The sessionKey is the encrypted identifier of the session generated by VISHNU.</p></dd><dt><span class="term"><span class="emphasis"><em>userId</em></span></span></dt><dd><p>Input argument. UserId represents the VISHNU user identifier of the user who will be deleted from VISHNU.</p></dd></dl></div></div><div class="refsect1" title="EXCEPTIONS"><a id="exceptions"></a><h2>EXCEPTIONS</h2><p>The following exceptions may be thrown: </p><div class="variablelist"><dl><dt><span class="term">"Vishnu not available (Service bus failure)" [1]</span></dt><dd></dd><dt><span class="term">"Vishnu not available (Database error)" [2]</span></dt><dd></dd><dt><span class="term">"Vishnu not available (Database connection)" [3]</span></dt><dd></dd><dt><span class="term">"Vishnu not available (System)" [4]</span></dt><dd></dd><dt><span class="term">"Internal Error: Undefined exception" [9]</span></dt><dd></dd><dt><span class="term">"The userId is unknown" [21]</span></dt><dd></dd><dt><span class="term">"The user is locked" [23]</span></dt><dd></dd><dt><span class="term">"The user is not an administrator" [25]</span></dt><dd></dd><dt><span class="term">"The session key is unrecognized" [28]</span></dt><dd></dd><dt><span class="term">"The sessionKey is expired. The session is closed." [29]</span></dt><dd></dd></dl></div></div></div><div class="refentry" title="resetPassword"><div class="refentry.separator"><hr /></div><a id="idp662464"></a><div class="titlepage"></div><div class="refnamediv"><h2>Name</h2><p>resetPassword — resets the password of a user</p></div><div class="refsynopsisdiv" title="Synopsis"><h2>Synopsis</h2><div class="funcsynopsis"><table border="0" summary="Function synopsis" cellspacing="0" cellpadding="0" class="funcprototype-table"><tr><td><code class="funcdef">int <b class="fsfunc">vishnu::resetPassword</b>(</code></td><td><var class="pdparam">sessionKey</var>, </td><td> </td></tr><tr><td> </td><td><var class="pdparam">userId</var>, </td><td> </td></tr><tr><td> </td><td><var class="pdparam">tmpPassword</var><code>)</code>;</td><td> </td></tr></table><div class="paramdef-list"><code>const string&amp; <var class="pdparam">sessionKey</var></code>;<br /><code>const string&amp; <var class="pdparam">userId</var></code>;<br /><code>string&amp; <var class="pdparam">tmpPassword</var></code>;</div><div class="funcprototype-spacer"> </div></div></div><div class="refsect1" title="DESCRIPTION"><a id="description"></a><h2>DESCRIPTION</h2><p>This command allows an admin to reset the password of the user. The password generated is temporary and must be changed for using VISHNU.</p></div><div class="refsect1" title="ARGUMENTS"><a id="arguments"></a><h2>ARGUMENTS</h2><div class="variablelist"><dl><dt><span class="term"><span class="emphasis"><em>sessionKey</em></span></span></dt><dd><p>Input argument. The sessionKey is the encrypted identifier of the session generated by VISHNU.</p></dd><dt><span class="term"><span class="emphasis"><em>userId</em></span></span></dt><dd><p>Input argument. UserId represents the VISHNU user identifier of the user whose password will be reset.</p></dd><dt><span class="term"><span class="emphasis"><em>tmpPassword</em></span></span></dt><dd><p>Output argument. The temporary password generated by VISHNU.</p></dd></dl></div></div><div class="refsect1" title="EXCEPTIONS"><a id="exceptions"></a><h2>EXCEPTIONS</h2><p>The following exceptions may be thrown: </p><div class="variablelist"><dl><dt><span class="term">"Vishnu not available (Service bus failure)" [1]</span></dt><dd></dd><dt><span class="term">"Vishnu not available (Database error)" [2]</span></dt><dd></dd><dt><span class="term">"Vishnu not available (Database connection)" [3]</span></dt><dd></dd><dt><span class="term">"Vishnu not available (System)" [4]</span></dt><dd></dd><dt><span class="term">"Internal Error: Undefined exception" [9]</span></dt><dd></dd><dt><span class="term">"The userId is unknown" [21]</span></dt><dd></dd><dt><span class="term">"The user is locked" [23]</span></dt><dd></dd><dt><span class="term">"The user is not an administrator" [25]</span></dt><dd></dd><dt><span class="term">"The session key is unrecognized" [28]</span></dt><dd></dd><dt><span class="term">"The sessionKey is expired. The session is closed." [29]</span></dt><dd></dd></dl></div></div></div><div class="refentry" title="saveConfiguration"><div class="refentry.separator"><hr /></div><a id="idp676800"></a><div class="titlepage"></div><div class="refnamediv"><h2>Name</h2><p>saveConfiguration — saves the configuration of VISHNU</p></div><div class="refsynopsisdiv" title="Synopsis"><h2>Synopsis</h2><div class="funcsynopsis"><table border="0" summary="Function synopsis" cellspacing="0" cellpadding="0" class="funcprototype-table"><tr><td><code class="funcdef">int <b class="fsfunc">vishnu::saveConfiguration</b>(</code></td><td><var class="pdparam">sessionKey</var>, </td><td> </td></tr><tr><td> </td><td><var class="pdparam">configuration</var><code>)</code>;</td><td> </td></tr></table><div class="paramdef-list"><code>const string&amp; <var class="pdparam">sessionKey</var></code>;<br /><code>Configuration&amp; <var class="pdparam">configuration</var></code>;</div><div class="funcprototype-spacer"> </div></div></div><div class="refsect1" title="DESCRIPTION"><a id="description"></a><h2>DESCRIPTION</h2><p>This commands allows an admin to save the VISHNU configuration. This configuration contains the list of users, the lists of machines and the list of local user configurations. It is saved on a xml format on a file registered on the directory $HOME/.vishnu/configurationSaved/.</p></div><div class="refsect1" title="ARGUMENTS"><a id="arguments"></a><h2>ARGUMENTS</h2><div class="variablelist"><dl><dt><span class="term"><span class="emphasis"><em>sessionKey</em></span></span></dt><dd><p>Input argument. The sessionKey is the encrypted identifier of the session generated by VISHNU.</p></dd><dt><span class="term"><span class="emphasis"><em>configuration</em></span></span></dt><dd><p>Output argument. The configuration is an object which encapsulates the configuration description.</p></dd></dl></div></div><div class="refsect1" title="EXCEPTIONS"><a id="exceptions"></a><h2>EXCEPTIONS</h2><p>The following exceptions may be thrown: </p><div class="variablelist"><dl><dt><span class="term">"Vishnu not available (Service bus failure)" [1]</span></dt><dd></dd><dt><span class="term">"Vishnu not available (Database error)" [2]</span></dt><dd></dd><dt><span class="term">"Vishnu not available (Database connection)" [3]</span></dt><dd></dd><dt><span class="term">"Vishnu not available (System)" [4]</span></dt><dd></dd><dt><span class="term">"Internal Error: Undefined exception" [9]</span></dt><dd></dd><dt><span class="term">"The user is not an administrator" [25]</span></dt><dd></dd><dt><span class="term">"A problem occurs during the configuration saving " [39]</span></dt><dd></dd></dl></div></div></div><div class="refentry" title="restoreConfiguration"><div class="refentry.separator"><hr /></div><a id="idp688368"></a><div class="titlepage"></div><div class="refnamediv"><h2>Name</h2><p>restoreConfiguration — restores the configuration of VISHNU</p></div><div class="refsynopsisdiv" title="Synopsis"><h2>Synopsis</h2><div class="funcsynopsis"><table border="0" summary="Function synopsis" cellspacing="0" cellpadding="0" class="funcprototype-table"><tr><td><code class="funcdef">int <b class="fsfunc">vishnu::restoreConfiguration</b>(</code></td><td><var class="pdparam">sessionKey</var>, </td><td> </td></tr><tr><td> </td><td><var class="pdparam">filePath</var><code>)</code>;</td><td> </td></tr></table><div class="paramdef-list"><code>const string&amp; <var class="pdparam">sessionKey</var></code>;<br /><code>const string&amp; <var class="pdparam">filePath</var></code>;</div><div class="funcprototype-spacer"> </div></div></div><div class="refsect1" title="DESCRIPTION"><a id="description"></a><h2>DESCRIPTION</h2><p>This function must be used carefully as it replaces all the content of the VISHNU central database
with the information stored in the provided file. This file contains the list of users, the lists of machines 
and the list of local user configurations. It can be created using the 
vishnu_save_configuration command.
The "root" VISHNU user is the only user authorized to call this function, and this action must be done
without any other user connected to VISHNU.
After restoring, the vishnu database is re-initialized.</p></div><div class="refsect1" title="ARGUMENTS"><a id="arguments"></a><h2>ARGUMENTS</h2><div class="variablelist"><dl><dt><span class="term"><span class="emphasis"><em>sessionKey</em></span></span></dt><dd><p>Input argument. The sessionKey is the encrypted identifier of the session generated by VISHNU.</p></dd><dt><span class="term"><span class="emphasis"><em>filePath</em></span></span></dt><dd><p>Input argument. The filePath is the path of the file used to restore VISHNU configuration.</p></dd></dl></div></div><div class="refsect1" title="EXCEPTIONS"><a id="exceptions"></a><h2>EXCEPTIONS</h2><p>The following exceptions may be thrown: </p><div class="variablelist"><dl><dt><span class="term">"Vishnu not available (Service bus failure)" [1]</span></dt><dd></dd><dt><span class="term">"Vishnu not available (Database error)" [2]</span></dt><dd></dd><dt><span class="term">"Vishnu not available (Database connection)" [3]</span></dt><dd></dd><dt><span class="term">"Vishnu not available (System)" [4]</span></dt><dd></dd><dt><span class="term">"Internal Error: Undefined exception" [9]</span></dt><dd></dd><dt><span class="term">"The user is not an administrator" [25]</span></dt><dd></dd><dt><span class="term">"A problem occurs during the configuration restoring" [40]</span></dt><dd></dd></dl></div></div></div><div class="refentry" title="addMachine"><div class="refentry.separator"><hr /></div><a id="idp700304"></a><div class="titlepage"></div><div class="refnamediv"><h2>Name</h2><p>addMachine — adds a new machine in VISHNU</p></div><div class="refsynopsisdiv" title="Synopsis"><h2>Synopsis</h2><div class="funcsynopsis"><table border="0" summary="Function synopsis" cellspacing="0" cellpadding="0" class="funcprototype-table"><tr><td><code class="funcdef">int <b class="fsfunc">vishnu::addMachine</b>(</code></td><td><var class="pdparam">sessionKey</var>, </td><td> </td></tr><tr><td> </td><td><var class="pdparam">newMachine</var><code>)</code>;</td><td> </td></tr></table><div class="paramdef-list"><code>const string&amp; <var class="pdparam">sessionKey</var></code>;<br /><code>Machine&amp; <var class="pdparam">newMachine</var></code>;</div><div class="funcprototype-spacer"> </div></div></div><div class="refsect1" title="DESCRIPTION"><a id="description"></a><h2>DESCRIPTION</h2><p>This command allows an admin to add a new machine in VISHNU.
Several machine information are mandatory such as: name, site, language
and the public ssh key of the VISHNU system account on the machine. This
public key will be provided automatically to all new VISHNU users who will
have to add it to the authorized keys of their own account on the machine.</p></div><div class="refsect1" title="ARGUMENTS"><a id="arguments"></a><h2>ARGUMENTS</h2><div class="variablelist"><dl><dt><span class="term"><span class="emphasis"><em>sessionKey</em></span></span></dt><dd><p>Input argument. The sessionKey is the encrypted identifier of the session generated by VISHNU.</p></dd><dt><span class="term"><span class="emphasis"><em>newMachine</em></span></span></dt><dd><p>Input/Output argument. Is an object which encapsulates the information of the machine which will be added in VISHNU except the machine id which will be created automatically by VISHNU.</p></dd></dl></div></div><div class="refsect1" title="EXCEPTIONS"><a id="exceptions"></a><h2>EXCEPTIONS</h2><p>The following exceptions may be thrown: </p><div class="variablelist"><dl><dt><span class="term">"Vishnu not available (Service bus failure)" [1]</span></dt><dd></dd><dt><span class="term">"Vishnu not available (Database error)" [2]</span></dt><dd></dd><dt><span class="term">"Vishnu not available (Database connection)" [3]</span></dt><dd></dd><dt><span class="term">"Vishnu not available (System)" [4]</span></dt><dd></dd><dt><span class="term">"Internal Error: Undefined exception" [9]</span></dt><dd></dd><dt><span class="term">"The user is not an administrator" [25]</span></dt><dd></dd><dt><span class="term">"The session key is unrecognized" [28]</span></dt><dd></dd><dt><span class="term">"The sessionKey is expired. The session is closed." [29]</span></dt><dd></dd><dt><span class="term">"The machineId already exists in the database" [33]</span></dt><dd></dd><dt><span class="term">"The closure policy is unknown" [42]</span></dt><dd></dd></dl></div></div></div><div class="refentry" title="updateMachine"><div class="refentry.separator"><hr /></div><a id="idp713752"></a><div class="titlepage"></div><div class="refnamediv"><h2>Name</h2><p>updateMachine — updates machine description</p></div><div class="refsynopsisdiv" title="Synopsis"><h2>Synopsis</h2><div class="funcsynopsis"><table border="0" summary="Function synopsis" cellspacing="0" cellpadding="0" class="funcprototype-table"><tr><td><code class="funcdef">int <b class="fsfunc">vishnu::updateMachine</b>(</code></td><td><var class="pdparam">sessionKey</var>, </td><td> </td></tr><tr><td> </td><td><var class="pdparam">machine</var><code>)</code>;</td><td> </td></tr></table><div class="paramdef-list"><code>const string&amp; <var class="pdparam">sessionKey</var></code>;<br /><code>const Machine&amp; <var class="pdparam">machine</var></code>;</div><div class="funcprototype-spacer"> </div></div></div><div class="refsect1" title="DESCRIPTION"><a id="description"></a><h2>DESCRIPTION</h2><p>This command allows an admin to update a  VISHNU machine or to locked it. A machine locked is not usable.</p></div><div class="refsect1" title="ARGUMENTS"><a id="arguments"></a><h2>ARGUMENTS</h2><div class="variablelist"><dl><dt><span class="term"><span class="emphasis"><em>sessionKey</em></span></span></dt><dd><p>Input argument. The sessionKey is the encrypted identifier of the session generated by VISHNU.</p></dd><dt><span class="term"><span class="emphasis"><em>machine</em></span></span></dt><dd><p>Input argument. Existing machine information.</p></dd></dl></div></div><div class="refsect1" title="EXCEPTIONS"><a id="exceptions"></a><h2>EXCEPTIONS</h2><p>The following exceptions may be thrown: </p><div class="variablelist"><dl><dt><span class="term">"Vishnu not available (Service bus failure)" [1]</span></dt><dd></dd><dt><span class="term">"Vishnu not available (Database error)" [2]</span></dt><dd></dd><dt><span class="term">"Vishnu not available (Database connection)" [3]</span></dt><dd></dd><dt><span class="term">"Vishnu not available (System)" [4]</span></dt><dd></dd><dt><span class="term">"Internal Error: Undefined exception" [9]</span></dt><dd></dd><dt><span class="term">"The user is not an administrator" [25]</span></dt><dd></dd><dt><span class="term">"The session key is unrecognized" [28]</span></dt><dd></dd><dt><span class="term">"The sessionKey is expired. The session is closed." [29]</span></dt><dd></dd><dt><span class="term">"The machine id is unknown" [32]</span></dt><dd></dd><dt><span class="term">"The closure policy is unknown" [42]</span></dt><dd></dd></dl></div></div></div><div class="refentry" title="deleteMachine"><div class="refentry.separator"><hr /></div><a id="idp726816"></a><div class="titlepage"></div><div class="refnamediv"><h2>Name</h2><p>deleteMachine — removes a machine from VISHNU</p></div><div class="refsynopsisdiv" title="Synopsis"><h2>Synopsis</h2><div class="funcsynopsis"><table border="0" summary="Function synopsis" cellspacing="0" cellpadding="0" class="funcprototype-table"><tr><td><code class="funcdef">int <b class="fsfunc">vishnu::deleteMachine</b>(</code></td><td><var class="pdparam">sessionKey</var>, </td><td> </td></tr><tr><td> </td><td><var class="pdparam">machineId</var><code>)</code>;</td><td> </td></tr></table><div class="paramdef-list"><code>const string&amp; <var class="pdparam">sessionKey</var></code>;<br /><code>const string&amp; <var class="pdparam">machineId</var></code>;</div><div class="funcprototype-spacer"> </div></div></div><div class="refsect1" title="DESCRIPTION"><a id="description"></a><h2>DESCRIPTION</h2><p>This command allows an admin to delete a machine from VISHNU. When a machine is deleted all of its information are deleted from VISHNU.</p></div><div class="refsect1" title="ARGUMENTS"><a id="arguments"></a><h2>ARGUMENTS</h2><div class="variablelist"><dl><dt><span class="term"><span class="emphasis"><em>sessionKey</em></span></span></dt><dd><p>Input argument. The sessionKey is the encrypted identifier of the session generated by VISHNU.</p></dd><dt><span class="term"><span class="emphasis"><em>machineId</em></span></span></dt><dd><p>Input argument. MachineId represents the identifier of the machine.</p></dd></dl></div></div><div class="refsect1" title="EXCEPTIONS"><a id="exceptions"></a><h2>EXCEPTIONS</h2><p>The following exceptions may be thrown: </p><div class="variablelist"><dl><dt><span class="term">"Vishnu not available (Service bus failure)" [1]</span></dt><dd></dd><dt><span class="term">"Vishnu not available (Database error)" [2]</span></dt><dd></dd><dt><span class="term">"Vishnu not available (Database connection)" [3]</span></dt><dd></dd><dt><span class="term">"Vishnu not available (System)" [4]</span></dt><dd></dd><dt><span class="term">"Internal Error: Undefined exception" [9]</span></dt><dd></dd><dt><span class="term">"The user is not an administrator" [25]</span></dt><dd></dd><dt><span class="term">"The session key is unrecognized" [28]</span></dt><dd></dd><dt><span class="term">"The sessionKey is expired. The session is closed." [29]</span></dt><dd></dd><dt><span class="term">"The machine id is unknown" [32]</span></dt><dd></dd></dl></div></div></div><div class="refentry" title="listUsers"><div class="refentry.separator"><hr /></div><a id="idp739344"></a><div class="titlepage"></div><div class="refnamediv"><h2>Name</h2><p>listUsers — lists VISHNU users</p></div><div class="refsynopsisdiv" title="Synopsis"><h2>Synopsis</h2><div class="funcsynopsis"><table border="0" summary="Function synopsis" cellspacing="0" cellpadding="0" class="funcprototype-table"><tr><td><code class="funcdef">int <b class="fsfunc">vishnu::listUsers</b>(</code></td><td><var class="pdparam">sessionKey</var>, </td><td> </td></tr><tr><td> </td><td><var class="pdparam">listuser</var>, </td><td> </td></tr><tr><td> </td><td><var class="pdparam">options = ListUsersOptions()</var><code>)</code>;</td><td> </td></tr></table><div class="paramdef-list"><code>const string&amp; <var class="pdparam">sessionKey</var></code>;<br /><code>ListUsers&amp; <var class="pdparam">listuser</var></code>;<br /><code>const ListUsersOptions&amp; <var class="pdparam">options = ListUsersOptions()</var></code>;</div><div class="funcprototype-spacer"> </div></div></div><div class="refsect1" title="DESCRIPTION"><a id="description"></a><h2>DESCRIPTION</h2><p>This command allows an admin to display all users information except the passwords.</p></div><div class="refsect1" title="ARGUMENTS"><a id="arguments"></a><h2>ARGUMENTS</h2><div class="variablelist"><dl><dt><span class="term"><span class="emphasis"><em>sessionKey</em></span></span></dt><dd><p>Input argument. The sessionKey is the identifier of the session generated by VISHNU.</p></dd><dt><span class="term"><span class="emphasis"><em>listuser</em></span></span></dt><dd><p>Output argument. Listuser is the list of users .</p></dd><dt><span class="term"><span class="emphasis"><em>options</em></span></span></dt><dd><p>Input argument. Allows an admin to get information about a specific user identified by his/her userId or to get information about users authenticated by a specific user-authentication system.</p></dd></dl></div></div><div class="refsect1" title="EXCEPTIONS"><a id="exceptions"></a><h2>EXCEPTIONS</h2><p>The following exceptions may be thrown: </p><div class="variablelist"><dl><dt><span class="term">"Vishnu not available (Service bus failure)" [1]</span></dt><dd></dd><dt><span class="term">"Vishnu not available (Database error)" [2]</span></dt><dd></dd><dt><span class="term">"Vishnu not available (Database connection)" [3]</span></dt><dd></dd><dt><span class="term">"Vishnu not available (System)" [4]</span></dt><dd></dd><dt><span class="term">"Internal Error: Undefined exception" [9]</span></dt><dd></dd><dt><span class="term">"The userId is unknown" [21]</span></dt><dd></dd><dt><span class="term">"The user is not an administrator" [25]</span></dt><dd></dd><dt><span class="term">"The session key is unrecognized" [28]</span></dt><dd></dd><dt><span class="term">"The sessionKey is expired. The session is closed." [29]</span></dt><dd></dd></dl></div></div></div><div class="refentry" title="configureDefaultOption"><div class="refentry.separator"><hr /></div><a id="idp753144"></a><div class="titlepage"></div><div class="refnamediv"><h2>Name</h2><p>configureDefaultOption — configures a default option value</p></div><div class="refsynopsisdiv" title="Synopsis"><h2>Synopsis</h2><div class="funcsynopsis"><table border="0" summary="Function synopsis" cellspacing="0" cellpadding="0" class="funcprototype-table"><tr><td><code class="funcdef">int <b class="fsfunc">vishnu::configureDefaultOption</b>(</code></td><td><var class="pdparam">sessionKey</var>, </td><td> </td></tr><tr><td> </td><td><var class="pdparam">optionValue</var><code>)</code>;</td><td> </td></tr></table><div class="paramdef-list"><code>const string&amp; <var class="pdparam">sessionKey</var></code>;<br /><code>const OptionValue&amp; <var class="pdparam">optionValue</var></code>;</div><div class="funcprototype-spacer"> </div></div></div><div class="refsect1" title="DESCRIPTION"><a id="description"></a><h2>DESCRIPTION</h2><p>Options in VISHNU corresponds to parameters of some VISHNU commands 
(e.g. the close policy for vishnu_connect)
that can be preset in the user configuration stored by the VISHNU system.
This command allows an administrator to configure the default value of an option;
this is the value that will be applied when the user has no configuration defined for
that option using the vishnu_configure_option command.</p></div><div class="refsect1" title="ARGUMENTS"><a id="arguments"></a><h2>ARGUMENTS</h2><div class="variablelist"><dl><dt><span class="term"><span class="emphasis"><em>sessionKey</em></span></span></dt><dd><p>Input argument. The sessionKey is the encrypted identifier of the session generated by VISHNU.</p></dd><dt><span class="term"><span class="emphasis"><em>optionValue</em></span></span></dt><dd><p>Input argument. The optionValue is an object which encapsulates the option information.</p></dd></dl></div></div><div class="refsect1" title="EXCEPTIONS"><a id="exceptions"></a><h2>EXCEPTIONS</h2><p>The following exceptions may be thrown: </p><div class="variablelist"><dl><dt><span class="term">"Vishnu not available (Service bus failure)" [1]</span></dt><dd></dd><dt><span class="term">"Vishnu not available (Database error)" [2]</span></dt><dd></dd><dt><span class="term">"Vishnu not available (Database connection)" [3]</span></dt><dd></dd><dt><span class="term">"Vishnu not available (System)" [4]</span></dt><dd></dd><dt><span class="term">"Internal Error: Undefined exception" [9]</span></dt><dd></dd><dt><span class="term">"The user is not an administrator" [25]</span></dt><dd></dd><dt><span class="term">"The session key is unrecognized" [28]</span></dt><dd></dd><dt><span class="term">"The sessionKey is expired. The session is closed." [29]</span></dt><dd></dd><dt><span class="term">"The name of the user option is unknown" [41]</span></dt><dd></dd><dt><span class="term">"The value of the timeout is incorrect" [43]</span></dt><dd></dd><dt><span class="term">"The value of the transfer command is incorrect" [44]</span></dt><dd></dd></dl></div></div></div><div class="refentry" title="addAuthSystem"><div class="refentry.separator"><hr /></div><a id="idp767248"></a><div class="titlepage"></div><div class="refnamediv"><h2>Name</h2><p>addAuthSystem — adds a new user-authentication system in VISHNU</p></div><div class="refsynopsisdiv" title="Synopsis"><h2>Synopsis</h2><div class="funcsynopsis"><table border="0" summary="Function synopsis" cellspacing="0" cellpadding="0" class="funcprototype-table"><tr><td><code class="funcdef">int <b class="fsfunc">vishnu::addAuthSystem</b>(</code></td><td><var class="pdparam">sessionKey</var>, </td><td> </td></tr><tr><td> </td><td><var class="pdparam">newAuthSys</var><code>)</code>;</td><td> </td></tr></table><div class="paramdef-list"><code>const string&amp; <var class="pdparam">sessionKey</var></code>;<br /><code>AuthSystem&amp; <var class="pdparam">newAuthSys</var></code>;</div><div class="funcprototype-spacer"> </div></div></div><div class="refsect1" title="DESCRIPTION"><a id="description"></a><h2>DESCRIPTION</h2><p>This command allows an admin to add a new user-authentication system in VISHNU.
Several user-authentication system's information are mandatory such as: URI,  login, password, 
type and optionally for LDAP the DN of the root entry. By default, the type of the user-authentication system is LDAP. </p></div><div class="refsect1" title="ARGUMENTS"><a id="arguments"></a><h2>ARGUMENTS</h2><div class="variablelist"><dl><dt><span class="term"><span class="emphasis"><em>sessionKey</em></span></span></dt><dd><p>Input argument. The sessionKey is the encrypted identifier of the session generated by VISHNU.</p></dd><dt><span class="term"><span class="emphasis"><em>newAuthSys</em></span></span></dt><dd><p>Input/Output argument. Is an object which encapsulates the information of the user-authentication system which will be added in VISHNU.</p></dd></dl></div></div><div class="refsect1" title="EXCEPTIONS"><a id="exceptions"></a><h2>EXCEPTIONS</h2><p>The following exceptions may be thrown: </p><div class="variablelist"><dl><dt><span class="term">"Vishnu not available (Service bus failure)" [1]</span></dt><dd></dd><dt><span class="term">"Vishnu not available (Database error)" [2]</span></dt><dd></dd><dt><span class="term">"Vishnu not available (Database connection)" [3]</span></dt><dd></dd><dt><span class="term">"Vishnu not available (System)" [4]</span></dt><dd></dd><dt><span class="term">"Internal Error: Undefined exception" [9]</span></dt><dd></dd><dt><span class="term">"The user is not an administrator" [25]</span></dt><dd></dd><dt><span class="term">"The session key is unrecognized" [28]</span></dt><dd></dd><dt><span class="term">"The sessionKey is expired. The session is closed." [29]</span></dt><dd></dd><dt><span class="term">"The identifier (name or generated identifier) of the user-authentication system already exists" [50]</span></dt><dd></dd><dt><span class="term">"The encryption method is unknown" [53]</span></dt><dd></dd></dl></div></div></div><div class="refentry" title="updateAuthSystem"><div class="refentry.separator"><hr /></div><a id="idp780744"></a><div class="titlepage"></div><div class="refnamediv"><h2>Name</h2><p>updateAuthSystem — updates a user-authentication system in VISHNU</p></div><div class="refsynopsisdiv" title="Synopsis"><h2>Synopsis</h2><div class="funcsynopsis"><table border="0" summary="Function synopsis" cellspacing="0" cellpadding="0" class="funcprototype-table"><tr><td><code class="funcdef">int <b class="fsfunc">vishnu::updateAuthSystem</b>(</code></td><td><var class="pdparam">sessionKey</var>, </td><td> </td></tr><tr><td> </td><td><var class="pdparam">AuthSys</var><code>)</code>;</td><td> </td></tr></table><div class="paramdef-list"><code>const string&amp; <var class="pdparam">sessionKey</var></code>;<br /><code>const AuthSystem&amp; <var class="pdparam">AuthSys</var></code>;</div><div class="funcprototype-spacer"> </div></div></div><div class="refsect1" title="DESCRIPTION"><a id="description"></a><h2>DESCRIPTION</h2><p>This command allows an admin to update a user-authentication system in VISHNU.
It is possible to change the parameters which follow: URI,  login, password, 
type and optionally for LDAP the DN of the root entry. By default, the type of the user-authentication system is LDAP. </p></div><div class="refsect1" title="ARGUMENTS"><a id="arguments"></a><h2>ARGUMENTS</h2><div class="variablelist"><dl><dt><span class="term"><span class="emphasis"><em>sessionKey</em></span></span></dt><dd><p>Input argument. The sessionKey is the encrypted identifier of the session generated by VISHNU.</p></dd><dt><span class="term"><span class="emphasis"><em>AuthSys</em></span></span></dt><dd><p>Input argument. Is an object which encapsulates the information of the user-authentication system which will be added in VISHNU.</p></dd></dl></div></div><div class="refsect1" title="EXCEPTIONS"><a id="exceptions"></a><h2>EXCEPTIONS</h2><p>The following exceptions may be thrown: </p><div class="variablelist"><dl><dt><span class="term">"Vishnu not available (Service bus failure)" [1]</span></dt><dd></dd><dt><span class="term">"Vishnu not available (Database error)" [2]</span></dt><dd></dd><dt><span class="term">"Vishnu not available (Database connection)" [3]</span></dt><dd></dd><dt><span class="term">"Vishnu not available (System)" [4]</span></dt><dd></dd><dt><span class="term">"Internal Error: Undefined exception" [9]</span></dt><dd></dd><dt><span class="term">"The user is not an administrator" [25]</span></dt><dd></dd><dt><span class="term">"The session key is unrecognized" [28]</span></dt><dd></dd><dt><span class="term">"The sessionKey is expired. The session is closed." [29]</span></dt><dd></dd><dt><span class="term">"The user-authentication system is unknown or locked" [48]</span></dt><dd></dd><dt><span class="term">"The user-authentication system is already locked" [49]</span></dt><dd></dd><dt><span class="term">"The encryption method is unknown" [53]</span></dt><dd></dd></dl></div></div></div><div class="refentry" title="deleteAuthSystem"><div class="refentry.separator"><hr /></div><a id="idp794752"></a><div class="titlepage"></div><div class="refnamediv"><h2>Name</h2><p>deleteAuthSystem — removes a user-authentication system from VISHNU</p></div><div class="refsynopsisdiv" title="Synopsis"><h2>Synopsis</h2><div class="funcsynopsis"><table border="0" summary="Function synopsis" cellspacing="0" cellpadding="0" class="funcprototype-table"><tr><td><code class="funcdef">int <b class="fsfunc">vishnu::deleteAuthSystem</b>(</code></td><td><var class="pdparam">sessionKey</var>, </td><td> </td></tr><tr><td> </td><td><var class="pdparam">authSystemId</var><code>)</code>;</td><td> </td></tr></table><div class="paramdef-list"><code>const string&amp; <var class="pdparam">sessionKey</var></code>;<br /><code>const string&amp; <var class="pdparam">authSystemId</var></code>;</div><div class="funcprototype-spacer"> </div></div></div><div class="refsect1" title="DESCRIPTION"><a id="description"></a><h2>DESCRIPTION</h2><p>This command allows an admin to remove a user-authentication system from VISHNU.</p></div><div class="refsect1" title="ARGUMENTS"><a id="arguments"></a><h2>ARGUMENTS</h2><div class="variablelist"><dl><dt><span class="term"><span class="emphasis"><em>sessionKey</em></span></span></dt><dd><p>Input argument. The sessionKey is the encrypted identifier of the session generated by VISHNU.</p></dd><dt><span class="term"><span class="emphasis"><em>authSystemId</em></span></span></dt><dd><p>Input argument. AuthSystemId is the identifier of the user-authentication system.</p></dd></dl></div></div><div class="refsect1" title="EXCEPTIONS"><a id="exceptions"></a><h2>EXCEPTIONS</h2><p>The following exceptions may be thrown: </p><div class="variablelist"><dl><dt><span class="term">"Vishnu not available (Service bus failure)" [1]</span></dt><dd></dd><dt><span class="term">"Vishnu not available (Database error)" [2]</span></dt><dd></dd><dt><span class="term">"Vishnu not available (Database connection)" [3]</span></dt><dd></dd><dt><span class="term">"Vishnu not available (System)" [4]</span></dt><dd></dd><dt><span class="term">"Internal Error: Undefined exception" [9]</span></dt><dd></dd><dt><span class="term">"The user is not an administrator" [25]</span></dt><dd></dd><dt><span class="term">"The session key is unrecognized" [28]</span></dt><dd></dd><dt><span class="term">"The sessionKey is expired. The session is closed." [29]</span></dt><dd></dd><dt><span class="term">"The user-authentication system is unknown or locked" [48]</span></dt><dd></dd></dl></div></div></div></div><div class="reference" title="UMS Python API Reference"><div class="titlepage"><div><div><h1 class="title"><a id="idp807384"></a>UMS Python API Reference</h1></div></div><hr /></div><div class="toc"><p><b>Table of Contents</b></p><dl><dt><span class="refentrytitle"><a href="#idp807736">VISHNU.addUser</a></span><span class="refpurpose"> — adds a new VISHNU user</span></dt><dt><span class="refentrytitle"><a href="#idp824632">VISHNU.updateUser</a></span><span class="refpurpose"> — updates the user information except the userId and the password</span></dt><dt><span class="refentrytitle"><a href="#idp841520">VISHNU.deleteUser</a></span><span class="refpurpose"> — removes a user from VISHNU</span></dt><dt><span class="refentrytitle"><a href="#idp857104">VISHNU.resetPassword</a></span><span class="refpurpose"> — resets the password of a user</span></dt><dt><span class="refentrytitle"><a href="#idp874272">VISHNU.saveConfiguration</a></span><span class="refpurpose"> — saves the configuration of VISHNU</span></dt><dt><span class="refentrytitle"><a href="#idp888048">VISHNU.restoreConfiguration</a></span><span class="refpurpose"> — restores the configuration of VISHNU</span></dt><dt><span class="refentrytitle"><a href="#idp902168">VISHNU.addMachine</a></span><span class="refpurpose"> — adds a new machine in VISHNU</span></dt><dt><span class="refentrytitle"><a href="#idp918072">VISHNU.updateMachine</a></span><span class="refpurpose"> — updates machine description</span></dt><dt><span class="refentrytitle"><a href="#idp933568">VISHNU.deleteMachine</a></span><span class="refpurpose"> — removes a machine from VISHNU</span></dt><dt><span class="refentrytitle"><a href="#idp948456">VISHNU.listUsers</a></span><span class="refpurpose"> — lists VISHNU users</span></dt><dt><span class="refentrytitle"><a href="#idp964272">VISHNU.configureDefaultOption</a></span><span class="refpurpose"> — configures a default option value</span></dt><dt><span class="refentrytitle"><a href="#idp980888">VISHNU.addAuthSystem</a></span><span class="refpurpose"> — adds a new user-authentication system in VISHNU</span></dt><dt><span class="refentrytitle"><a href="#idp996824">VISHNU.updateAuthSystem</a></span><span class="refpurpose"> — updates a user-authentication system in VISHNU</span></dt><dt><span class="refentrytitle"><a href="#idp1013344">VISHNU.deleteAuthSystem</a></span><span class="refpurpose"> — removes a user-authentication system from VISHNU</span></dt></dl></div><div class="refentry" title="VISHNU.addUser"><a id="idp807736"></a><div class="titlepage"></div><div class="refnamediv"><h2>Name</h2><p>VISHNU.addUser — adds a new VISHNU user</p></div><div class="refsynopsisdiv" title="Synopsis"><h2>Synopsis</h2><div class="funcsynopsis"><table border="0" summary="Function synopsis" cellspacing="0" cellpadding="0" class="funcprototype-table"><tr><td><code class="funcdef"><b class="fsfunc">ret=VISHNU.addUser</b>(</code></td><td><var class="pdparam">sessionKey</var>, </td><td> </td></tr><tr><td> </td><td><var class="pdparam">newUser</var><code>)</code>;</td><td> </td></tr></table><div class="paramdef-list"><code>string <var class="pdparam">sessionKey</var></code>;<br /><code>User <var class="pdparam">newUser</var></code>;</div><div class="funcprototype-spacer"> </div></div></div><div class="refsect1" title="DESCRIPTION"><a id="description"></a><h2>DESCRIPTION</h2><p>This command allows an admin to add a new user in VISHNU. 
Several user information are necessary such as: lastname, firtsname and email address. 
The admin also gives a VISHNU privilege to the new user and a new userId 
and password are sent to the user by email.</p></div><div class="refsect1" title="ARGUMENTS"><a id="arguments"></a><h2>ARGUMENTS</h2><div class="variablelist"><dl><dt><span class="term"><span class="emphasis"><em>sessionKey</em></span></span></dt><dd><p>Input argument. The sessionKey is the encrypted identifier of the session generated by VISHNU.</p></dd><dt><span class="term"><span class="emphasis"><em>newUser</em></span></span></dt><dd><p>Input/Output argument. Object containing the new user information.</p></dd></dl></div></div><div class="refsect1" title="RETURNED OBJECTS"><a id="returned objects"></a><h2>RETURNED OBJECTS</h2><div class="variablelist"><dl><dt><span class="term"><span class="emphasis"><em>errorCode (integer)</em></span></span></dt><dd><p>Output parameter. Contains 0 on success and the error code on failure.</p></dd><dt></dt><dd></dd></dl></div></div><div class="refsect1" title="EXCEPTIONS"><a id="exceptions"></a><h2>EXCEPTIONS</h2><p>The following exceptions may be thrown: </p><div class="variablelist"><dl><dt><span class="term">SystemException("Vishnu not available (Service bus failure)" [1])</span></dt><dd></dd><dt><span class="term">SystemException("Vishnu not available (Database error)" [2])</span></dt><dd></dd><dt><span class="term">SystemException("Vishnu not available (Database connection)" [3])</span></dt><dd></dd><dt><span class="term">SystemException("Vishnu not available (System)" [4])</span></dt><dd></dd><dt><span class="term">SystemException("Internal Error: Undefined exception" [9])</span></dt><dd></dd><dt><span class="term">UMSVishnuException("The userId already exists in the database" [22])</span></dt><dd></dd><dt><span class="term">UMSVishnuException("The user is locked" [23])</span></dt><dd></dd><dt><span class="term">UMSVishnuException("The user is not an administrator" [25])</span></dt><dd></dd><dt><span class="term">UMSVishnuException("The mail adress is invalid" [27])</span></dt><dd></dd><dt><span class="term">UMSVishnuException("The session key is unrecognized" [28])</span></dt><dd></dd><dt><span class="term">UMSVishnuException("The sessionKey is expired. The session is closed." [29])</span></dt><dd></dd><dt><span class="term">UMSVishnuException("The machine is locked" [34])</span></dt><dd></dd></dl></div></div></div><div class="refentry" title="VISHNU.updateUser"><div class="refentry.separator"><hr /></div><a id="idp824632"></a><div class="titlepage"></div><div class="refnamediv"><h2>Name</h2><p>VISHNU.updateUser — updates the user information except the userId and the password</p></div><div class="refsynopsisdiv" title="Synopsis"><h2>Synopsis</h2><div class="funcsynopsis"><table border="0" summary="Function synopsis" cellspacing="0" cellpadding="0" class="funcprototype-table"><tr><td><code class="funcdef"><b class="fsfunc">ret=VISHNU.updateUser</b>(</code></td><td><var class="pdparam">sessionKey</var>, </td><td> </td></tr><tr><td> </td><td><var class="pdparam">user</var><code>)</code>;</td><td> </td></tr></table><div class="paramdef-list"><code>string <var class="pdparam">sessionKey</var></code>;<br /><code>User <var class="pdparam">user</var></code>;</div><div class="funcprototype-spacer"> </div></div></div><div class="refsect1" title="DESCRIPTION"><a id="description"></a><h2>DESCRIPTION</h2><p>This command allows an admin to update a VISHNU user information or to lock a user.  When a user is locked, she/he can not uses VISHNU. However, it is not possible to change the privilege of another admin.</p></div><div class="refsect1" title="ARGUMENTS"><a id="arguments"></a><h2>ARGUMENTS</h2><div class="variablelist"><dl><dt><span class="term"><span class="emphasis"><em>sessionKey</em></span></span></dt><dd><p>Input argument. The sessionKey is the encrypted identifier of the session generated by VISHNU.</p></dd><dt><span class="term"><span class="emphasis"><em>user</em></span></span></dt><dd><p>Input argument. Object containing user information.</p></dd></dl></div></div><div class="refsect1" title="RETURNED OBJECTS"><a id="returned objects"></a><h2>RETURNED OBJECTS</h2><div class="variablelist"><dl><dt><span class="term"><span class="emphasis"><em>errorCode (integer)</em></span></span></dt><dd><p>Output parameter. Contains 0 on success and the error code on failure.</p></dd><dt></dt><dd></dd></dl></div></div><div class="refsect1" title="EXCEPTIONS"><a id="exceptions"></a><h2>EXCEPTIONS</h2><p>The following exceptions may be thrown: </p><div class="variablelist"><dl><dt><span class="term">SystemException("Vishnu not available (Service bus failure)" [1])</span></dt><dd></dd><dt><span class="term">SystemException("Vishnu not available (Database error)" [2])</span></dt><dd></dd><dt><span class="term">SystemException("Vishnu not available (Database connection)" [3])</span></dt><dd></dd><dt><span class="term">SystemException("Vishnu not available (System)" [4])</span></dt><dd></dd><dt><span class="term">SystemException("Internal Error: Undefined exception" [9])</span></dt><dd></dd><dt><span class="term">UMSVishnuException("The userId is unknown" [21])</span></dt><dd></dd><dt><span class="term">UMSVishnuException("The user is locked" [23])</span></dt><dd></dd><dt><span class="term">UMSVishnuException("Trying to lock a user account that is already locked" [24])</span></dt><dd></dd><dt><span class="term">UMSVishnuException("The user is not an administrator" [25])</span></dt><dd></dd><dt><span class="term">UMSVishnuException("The mail adress is invalid" [27])</span></dt><dd></dd><dt><span class="term">UMSVishnuException("The session key is unrecognized" [28])</span></dt><dd></dd><dt><span class="term">UMSVishnuException("The sessionKey is expired. The session is closed." [29])</span></dt><dd></dd></dl></div></div></div><div class="refentry" title="VISHNU.deleteUser"><div class="refentry.separator"><hr /></div><a id="idp841520"></a><div class="titlepage"></div><div class="refnamediv"><h2>Name</h2><p>VISHNU.deleteUser — removes a user from VISHNU</p></div><div class="refsynopsisdiv" title="Synopsis"><h2>Synopsis</h2><div class="funcsynopsis"><table border="0" summary="Function synopsis" cellspacing="0" cellpadding="0" class="funcprototype-table"><tr><td><code class="funcdef"><b class="fsfunc">ret=VISHNU.deleteUser</b>(</code></td><td><var class="pdparam">sessionKey</var>, </td><td> </td></tr><tr><td> </td><td><var class="pdparam">userId</var><code>)</code>;</td><td> </td></tr></table><div class="paramdef-list"><code>string <var class="pdparam">sessionKey</var></code>;<br /><code>string <var class="pdparam">userId</var></code>;</div><div class="funcprototype-spacer"> </div></div></div><div class="refsect1" title="DESCRIPTION"><a id="description"></a><h2>DESCRIPTION</h2><p>This command allows an admin to delete a user from VISHNU. When a user is deleted from VISHNU all of her/his information are deleted from VISHNU. However, it is not possible to delete the VISHNU root user.</p></div><div class="refsect1" title="ARGUMENTS"><a id="arguments"></a><h2>ARGUMENTS</h2><div class="variablelist"><dl><dt><span class="term"><span class="emphasis"><em>sessionKey</em></span></span></dt><dd><p>Input argument. The sessionKey is the encrypted identifier of the session generated by VISHNU.</p></dd><dt><span class="term"><span class="emphasis"><em>userId</em></span></span></dt><dd><p>Input argument. UserId represents the VISHNU user identifier of the user who will be deleted from VISHNU.</p></dd></dl></div></div><div class="refsect1" title="RETURNED OBJECTS"><a id="returned objects"></a><h2>RETURNED OBJECTS</h2><div class="variablelist"><dl><dt><span class="term"><span class="emphasis"><em>errorCode (integer)</em></span></span></dt><dd><p>Output parameter. Contains 0 on success and the error code on failure.</p></dd><dt></dt><dd></dd></dl></div></div><div class="refsect1" title="EXCEPTIONS"><a id="exceptions"></a><h2>EXCEPTIONS</h2><p>The following exceptions may be thrown: </p><div class="variablelist"><dl><dt><span class="term">SystemException("Vishnu not available (Service bus failure)" [1])</span></dt><dd></dd><dt><span class="term">SystemException("Vishnu not available (Database error)" [2])</span></dt><dd></dd><dt><span class="term">SystemException("Vishnu not available (Database connection)" [3])</span></dt><dd></dd><dt><span class="term">SystemException("Vishnu not available (System)" [4])</span></dt><dd></dd><dt><span class="term">SystemException("Internal Error: Undefined exception" [9])</span></dt><dd></dd><dt><span class="term">UMSVishnuException("The userId is unknown" [21])</span></dt><dd></dd><dt><span class="term">UMSVishnuException("The user is locked" [23])</span></dt><dd></dd><dt><span class="term">UMSVishnuException("The user is not an administrator" [25])</span></dt><dd></dd><dt><span class="term">UMSVishnuException("The session key is unrecognized" [28])</span></dt><dd></dd><dt><span class="term">UMSVishnuException("The sessionKey is expired. The session is closed." [29])</span></dt><dd></dd></dl></div></div></div><div class="refentry" title="VISHNU.resetPassword"><div class="refentry.separator"><hr /></div><a id="idp857104"></a><div class="titlepage"></div><div class="refnamediv"><h2>Name</h2><p>VISHNU.resetPassword — resets the password of a user</p></div><div class="refsynopsisdiv" title="Synopsis"><h2>Synopsis</h2><div class="funcsynopsis"><table border="0" summary="Function synopsis" cellspacing="0" cellpadding="0" class="funcprototype-table"><tr><td><code class="funcdef"><b class="fsfunc">ret, tmpPassword=VISHNU.resetPassword</b>(</code></td><td><var class="pdparam">sessionKey</var>, </td><td> </td></tr><tr><td> </td><td><var class="pdparam">userId</var><code>)</code>;</td><td> </td></tr></table><div class="paramdef-list"><code>string <var class="pdparam">sessionKey</var></code>;<br /><code>string <var class="pdparam">userId</var></code>;</div><div class="funcprototype-spacer"> </div></div></div><div class="refsect1" title="DESCRIPTION"><a id="description"></a><h2>DESCRIPTION</h2><p>This command allows an admin to reset the password of the user. The password generated is temporary and must be changed for using VISHNU.</p></div><div class="refsect1" title="ARGUMENTS"><a id="arguments"></a><h2>ARGUMENTS</h2><div class="variablelist"><dl><dt><span class="term"><span class="emphasis"><em>sessionKey</em></span></span></dt><dd><p>Input argument. The sessionKey is the encrypted identifier of the session generated by VISHNU.</p></dd><dt><span class="term"><span class="emphasis"><em>userId</em></span></span></dt><dd><p>Input argument. UserId represents the VISHNU user identifier of the user whose password will be reset.</p></dd><dt><span class="term"><span class="emphasis"><em>tmpPassword</em></span></span></dt><dd><p>Output argument. The temporary password generated by VISHNU.</p></dd></dl></div></div><div class="refsect1" title="RETURNED OBJECTS"><a id="returned objects"></a><h2>RETURNED OBJECTS</h2><div class="variablelist"><dl><dt><span class="term"><span class="emphasis"><em>errorCode (integer)</em></span></span></dt><dd><p>Output parameter. Contains 0 on success and the error code on failure.</p></dd><dt><span class="term"><span class="emphasis"><em>tmpPassword(string)</em></span></span></dt><dd><p>The temporary password generated by VISHNU</p></dd></dl></div></div><div class="refsect1" title="EXCEPTIONS"><a id="exceptions"></a><h2>EXCEPTIONS</h2><p>The following exceptions may be thrown: </p><div class="variablelist"><dl><dt><span class="term">SystemException("Vishnu not available (Service bus failure)" [1])</span></dt><dd></dd><dt><span class="term">SystemException("Vishnu not available (Database error)" [2])</span></dt><dd></dd><dt><span class="term">SystemException("Vishnu not available (Database connection)" [3])</span></dt><dd></dd><dt><span class="term">SystemException("Vishnu not available (System)" [4])</span></dt><dd></dd><dt><span class="term">SystemException("Internal Error: Undefined exception" [9])</span></dt><dd></dd><dt><span class="term">UMSVishnuException("The userId is unknown" [21])</span></dt><dd></dd><dt><span class="term">UMSVishnuException("The user is locked" [23])</span></dt><dd></dd><dt><span class="term">UMSVishnuException("The user is not an administrator" [25])</span></dt><dd></dd><dt><span class="term">UMSVishnuException("The session key is unrecognized" [28])</span></dt><dd></dd><dt><span class="term">UMSVishnuException("The sessionKey is expired. The session is closed." [29])</span></dt><dd></dd></dl></div></div></div><div class="refentry" title="VISHNU.saveConfiguration"><div class="refentry.separator"><hr /></div><a id="idp874272"></a><div class="titlepage"></div><div class="refnamediv"><h2>Name</h2><p>VISHNU.saveConfiguration — saves the configuration of VISHNU</p></div><div class="refsynopsisdiv" title="Synopsis"><h2>Synopsis</h2><div class="funcsynopsis"><table border="0" summary="Function synopsis" cellspacing="0" cellpadding="0" class="funcprototype-table"><tr><td><code class="funcdef"><b class="fsfunc">ret=VISHNU.saveConfiguration</b>(</code></td><td><var class="pdparam">sessionKey</var>, </td><td> </td></tr><tr><td> </td><td><var class="pdparam">configuration</var><code>)</code>;</td><td> </td></tr></table><div class="paramdef-list"><code>string <var class="pdparam">sessionKey</var></code>;<br /><code>Configuration <var class="pdparam">configuration</var></code>;</div><div class="funcprototype-spacer"> </div></div></div><div class="refsect1" title="DESCRIPTION"><a id="description"></a><h2>DESCRIPTION</h2><p>This commands allows an admin to save the VISHNU configuration. This configuration contains the list of users, the lists of machines and the list of local user configurations. It is saved on a xml format on a file registered on the directory $HOME/.vishnu/configurationSaved/.</p></div><div class="refsect1" title="ARGUMENTS"><a id="arguments"></a><h2>ARGUMENTS</h2><div class="variablelist"><dl><dt><span class="term"><span class="emphasis"><em>sessionKey</em></span></span></dt><dd><p>Input argument. The sessionKey is the encrypted identifier of the session generated by VISHNU.</p></dd><dt><span class="term"><span class="emphasis"><em>configuration</em></span></span></dt><dd><p>Output argument. The configuration is an object which encapsulates the configuration description.</p></dd></dl></div></div><div class="refsect1" title="RETURNED OBJECTS"><a id="returned objects"></a><h2>RETURNED OBJECTS</h2><div class="variablelist"><dl><dt><span class="term"><span class="emphasis"><em>errorCode (integer)</em></span></span></dt><dd><p>Output parameter. Contains 0 on success and the error code on failure.</p></dd><dt></dt><dd></dd></dl></div></div><div class="refsect1" title="EXCEPTIONS"><a id="exceptions"></a><h2>EXCEPTIONS</h2><p>The following exceptions may be thrown: </p><div class="variablelist"><dl><dt><span class="term">SystemException("Vishnu not available (Service bus failure)" [1])</span></dt><dd></dd><dt><span class="term">SystemException("Vishnu not available (Database error)" [2])</span></dt><dd></dd><dt><span class="term">SystemException("Vishnu not available (Database connection)" [3])</span></dt><dd></dd><dt><span class="term">SystemException("Vishnu not available (System)" [4])</span></dt><dd></dd><dt><span class="term">SystemException("Internal Error: Undefined exception" [9])</span></dt><dd></dd><dt><span class="term">UMSVishnuException("The user is not an administrator" [25])</span></dt><dd></dd><dt><span class="term">UMSVishnuException("A problem occurs during the configuration saving " [39])</span></dt><dd></dd></dl></div></div></div><div class="refentry" title="VISHNU.restoreConfiguration"><div class="refentry.separator"><hr /></div><a id="idp888048"></a><div class="titlepage"></div><div class="refnamediv"><h2>Name</h2><p>VISHNU.restoreConfiguration — restores the configuration of VISHNU</p></div><div class="refsynopsisdiv" title="Synopsis"><h2>Synopsis</h2><div class="funcsynopsis"><table border="0" summary="Function synopsis" cellspacing="0" cellpadding="0" class="funcprototype-table"><tr><td><code class="funcdef"><b class="fsfunc">ret=VISHNU.restoreConfiguration</b>(</code></td><td><var class="pdparam">sessionKey</var>, </td><td> </td></tr><tr><td> </td><td><var class="pdparam">filePath</var><code>)</code>;</td><td> </td></tr></table><div class="paramdef-list"><code>string <var class="pdparam">sessionKey</var></code>;<br /><code>string <var class="pdparam">filePath</var></code>;</div><div class="funcprototype-spacer"> </div></div></div><div class="refsect1" title="DESCRIPTION"><a id="description"></a><h2>DESCRIPTION</h2><p>This function must be used carefully as it replaces all the content of the VISHNU central database
with the information stored in the provided file. This file contains the list of users, the lists of machines 
and the list of local user configurations. It can be created using the 
vishnu_save_configuration command.
The "root" VISHNU user is the only user authorized to call this function, and this action must be done
without any other user connected to VISHNU.
After restoring, the vishnu database is re-initialized.</p></div><div class="refsect1" title="ARGUMENTS"><a id="arguments"></a><h2>ARGUMENTS</h2><div class="variablelist"><dl><dt><span class="term"><span class="emphasis"><em>sessionKey</em></span></span></dt><dd><p>Input argument. The sessionKey is the encrypted identifier of the session generated by VISHNU.</p></dd><dt><span class="term"><span class="emphasis"><em>filePath</em></span></span></dt><dd><p>Input argument. The filePath is the path of the file used to restore VISHNU configuration.</p></dd></dl></div></div><div class="refsect1" title="RETURNED OBJECTS"><a id="returned objects"></a><h2>RETURNED OBJECTS</h2><div class="variablelist"><dl><dt><span class="term"><span class="emphasis"><em>errorCode (integer)</em></span></span></dt><dd><p>Output parameter. Contains 0 on success and the error code on failure.</p></dd><dt></dt><dd></dd></dl></div></div><div class="refsect1" title="EXCEPTIONS"><a id="exceptions"></a><h2>EXCEPTIONS</h2><p>The following exceptions may be thrown: </p><div class="variablelist"><dl><dt><span class="term">SystemException("Vishnu not available (Service bus failure)" [1])</span></dt><dd></dd><dt><span class="term">SystemException("Vishnu not available (Database error)" [2])</span></dt><dd></dd><dt><span class="term">SystemException("Vishnu not available (Database connection)" [3])</span></dt><dd></dd><dt><span class="term">SystemException("Vishnu not available (System)" [4])</span></dt><dd></dd><dt><span class="term">SystemException("Internal Error: Undefined exception" [9])</span></dt><dd></dd><dt><span class="term">UMSVishnuException("The user is not an administrator" [25])</span></dt><dd></dd><dt><span class="term">UMSVishnuException("A problem occurs during the configuration restoring" [40])</span></dt><dd></dd></dl></div></div></div><div class="refentry" title="VISHNU.addMachine"><div class="refentry.separator"><hr /></div><a id="idp902168"></a><div class="titlepage"></div><div class="refnamediv"><h2>Name</h2><p>VISHNU.addMachine — adds a new machine in VISHNU</p></div><div class="refsynopsisdiv" title="Synopsis"><h2>Synopsis</h2><div class="funcsynopsis"><table border="0" summary="Function synopsis" cellspacing="0" cellpadding="0" class="funcprototype-table"><tr><td><code class="funcdef"><b class="fsfunc">ret=VISHNU.addMachine</b>(</code></td><td><var class="pdparam">sessionKey</var>, </td><td> </td></tr><tr><td> </td><td><var class="pdparam">newMachine</var><code>)</code>;</td><td> </td></tr></table><div class="paramdef-list"><code>string <var class="pdparam">sessionKey</var></code>;<br /><code>Machine <var class="pdparam">newMachine</var></code>;</div><div class="funcprototype-spacer"> </div></div></div><div class="refsect1" title="DESCRIPTION"><a id="description"></a><h2>DESCRIPTION</h2><p>This command allows an admin to add a new machine in VISHNU.
Several machine information are mandatory such as: name, site, language
and the public ssh key of the VISHNU system account on the machine. This
public key will be provided automatically to all new VISHNU users who will
have to add it to the authorized keys of their own account on the machine.</p></div><div class="refsect1" title="ARGUMENTS"><a id="arguments"></a><h2>ARGUMENTS</h2><div class="variablelist"><dl><dt><span class="term"><span class="emphasis"><em>sessionKey</em></span></span></dt><dd><p>Input argument. The sessionKey is the encrypted identifier of the session generated by VISHNU.</p></dd><dt><span class="term"><span class="emphasis"><em>newMachine</em></span></span></dt><dd><p>Input/Output argument. Is an object which encapsulates the information of the machine which will be added in VISHNU except the machine id which will be created automatically by VISHNU.</p></dd></dl></div></div><div class="refsect1" title="RETURNED OBJECTS"><a id="returned objects"></a><h2>RETURNED OBJECTS</h2><div class="variablelist"><dl><dt><span class="term"><span class="emphasis"><em>errorCode (integer)</em></span></span></dt><dd><p>Output parameter. Contains 0 on success and the error code on failure.</p></dd><dt></dt><dd></dd></dl></div></div><div class="refsect1" title="EXCEPTIONS"><a id="exceptions"></a><h2>EXCEPTIONS</h2><p>The following exceptions may be thrown: </p><div class="variablelist"><dl><dt><span class="term">SystemException("Vishnu not available (Service bus failure)" [1])</span></dt><dd></dd><dt><span class="term">SystemException("Vishnu not available (Database error)" [2])</span></dt><dd></dd><dt><span class="term">SystemException("Vishnu not available (Database connection)" [3])</span></dt><dd></dd><dt><span class="term">SystemException("Vishnu not available (System)" [4])</span></dt><dd></dd><dt><span class="term">SystemException("Internal Error: Undefined exception" [9])</span></dt><dd></dd><dt><span class="term">UMSVishnuException("The user is not an administrator" [25])</span></dt><dd></dd><dt><span class="term">UMSVishnuException("The session key is unrecognized" [28])</span></dt><dd></dd><dt><span class="term">UMSVishnuException("The sessionKey is expired. The session is closed." [29])</span></dt><dd></dd><dt><span class="term">UMSVishnuException("The machineId already exists in the database" [33])</span></dt><dd></dd><dt><span class="term">UMSVishnuException("The closure policy is unknown" [42])</span></dt><dd></dd></dl></div></div></div><div class="refentry" title="VISHNU.updateMachine"><div class="refentry.separator"><hr /></div><a id="idp918072"></a><div class="titlepage"></div><div class="refnamediv"><h2>Name</h2><p>VISHNU.updateMachine — updates machine description</p></div><div class="refsynopsisdiv" title="Synopsis"><h2>Synopsis</h2><div class="funcsynopsis"><table border="0" summary="Function synopsis" cellspacing="0" cellpadding="0" class="funcprototype-table"><tr><td><code class="funcdef"><b class="fsfunc">ret=VISHNU.updateMachine</b>(</code></td><td><var class="pdparam">sessionKey</var>, </td><td> </td></tr><tr><td> </td><td><var class="pdparam">machine</var><code>)</code>;</td><td> </td></tr></table><div class="paramdef-list"><code>string <var class="pdparam">sessionKey</var></code>;<br /><code>Machine <var class="pdparam">machine</var></code>;</div><div class="funcprototype-spacer"> </div></div></div><div class="refsect1" title="DESCRIPTION"><a id="description"></a><h2>DESCRIPTION</h2><p>This command allows an admin to update a  VISHNU machine or to locked it. A machine locked is not usable.</p></div><div class="refsect1" title="ARGUMENTS"><a id="arguments"></a><h2>ARGUMENTS</h2><div class="variablelist"><dl><dt><span class="term"><span class="emphasis"><em>sessionKey</em></span></span></dt><dd><p>Input argument. The sessionKey is the encrypted identifier of the session generated by VISHNU.</p></dd><dt><span class="term"><span class="emphasis"><em>machine</em></span></span></dt><dd><p>Input argument. Existing machine information.</p></dd></dl></div></div><div class="refsect1" title="RETURNED OBJECTS"><a id="returned objects"></a><h2>RETURNED OBJECTS</h2><div class="variablelist"><dl><dt><span class="term"><span class="emphasis"><em>errorCode (integer)</em></span></span></dt><dd><p>Output parameter. Contains 0 on success and the error code on failure.</p></dd><dt></dt><dd></dd></dl></div></div><div class="refsect1" title="EXCEPTIONS"><a id="exceptions"></a><h2>EXCEPTIONS</h2><p>The following exceptions may be thrown: </p><div class="variablelist"><dl><dt><span class="term">SystemException("Vishnu not available (Service bus failure)" [1])</span></dt><dd></dd><dt><span class="term">SystemException("Vishnu not available (Database error)" [2])</span></dt><dd></dd><dt><span class="term">SystemException("Vishnu not available (Database connection)" [3])</span></dt><dd></dd><dt><span class="term">SystemException("Vishnu not available (System)" [4])</span></dt><dd></dd><dt><span class="term">SystemException("Internal Error: Undefined exception" [9])</span></dt><dd></dd><dt><span class="term">UMSVishnuException("The user is not an administrator" [25])</span></dt><dd></dd><dt><span class="term">UMSVishnuException("The session key is unrecognized" [28])</span></dt><dd></dd><dt><span class="term">UMSVishnuException("The sessionKey is expired. The session is closed." [29])</span></dt><dd></dd><dt><span class="term">UMSVishnuException("The machine id is unknown" [32])</span></dt><dd></dd><dt><span class="term">UMSVishnuException("The closure policy is unknown" [42])</span></dt><dd></dd></dl></div></div></div><div class="refentry" title="VISHNU.deleteMachine"><div class="refentry.separator"><hr /></div><a id="idp933568"></a><div class="titlepage"></div><div class="refnamediv"><h2>Name</h2><p>VISHNU.deleteMachine — removes a machine from VISHNU</p></div><div class="refsynopsisdiv" title="Synopsis"><h2>Synopsis</h2><div class="funcsynopsis"><table border="0" summary="Function synopsis" cellspacing="0" cellpadding="0" class="funcprototype-table"><tr><td><code class="funcdef"><b class="fsfunc">ret=VISHNU.deleteMachine</b>(</code></td><td><var class="pdparam">sessionKey</var>, </td><td> </td></tr><tr><td> </td><td><var class="pdparam">machineId</var><code>)</code>;</td><td> </td></tr></table><div class="paramdef-list"><code>string <var class="pdparam">sessionKey</var></code>;<br /><code>string <var class="pdparam">machineId</var></code>;</div><div class="funcprototype-spacer"> </div></div></div><div class="refsect1" title="DESCRIPTION"><a id="description"></a><h2>DESCRIPTION</h2><p>This command allows an admin to delete a machine from VISHNU. When a machine is deleted all of its information are deleted from VISHNU.</p></div><div class="refsect1" title="ARGUMENTS"><a id="arguments"></a><h2>ARGUMENTS</h2><div class="variablelist"><dl><dt><span class="term"><span class="emphasis"><em>sessionKey</em></span></span></dt><dd><p>Input argument. The sessionKey is the encrypted identifier of the session generated by VISHNU.</p></dd><dt><span class="term"><span class="emphasis"><em>machineId</em></span></span></dt><dd><p>Input argument. MachineId represents the identifier of the machine.</p></dd></dl></div></div><div class="refsect1" title="RETURNED OBJECTS"><a id="returned objects"></a><h2>RETURNED OBJECTS</h2><div class="variablelist"><dl><dt><span class="term"><span class="emphasis"><em>errorCode (integer)</em></span></span></dt><dd><p>Output parameter. Contains 0 on success and the error code on failure.</p></dd><dt></dt><dd></dd></dl></div></div><div class="refsect1" title="EXCEPTIONS"><a id="exceptions"></a><h2>EXCEPTIONS</h2><p>The following exceptions may be thrown: </p><div class="variablelist"><dl><dt><span class="term">SystemException("Vishnu not available (Service bus failure)" [1])</span></dt><dd></dd><dt><span class="term">SystemException("Vishnu not available (Database error)" [2])</span></dt><dd></dd><dt><span class="term">SystemException("Vishnu not available (Database connection)" [3])</span></dt><dd></dd><dt><span class="term">SystemException("Vishnu not available (System)" [4])</span></dt><dd></dd><dt><span class="term">SystemException("Internal Error: Undefined exception" [9])</span></dt><dd></dd><dt><span class="term">UMSVishnuException("The user is not an administrator" [25])</span></dt><dd></dd><dt><span class="term">UMSVishnuException("The session key is unrecognized" [28])</span></dt><dd></dd><dt><span class="term">UMSVishnuException("The sessionKey is expired. The session is closed." [29])</span></dt><dd></dd><dt><span class="term">UMSVishnuException("The machine id is unknown" [32])</span></dt><dd></dd></dl></div></div></div><div class="refentry" title="VISHNU.listUsers"><div class="refentry.separator"><hr /></div><a id="idp948456"></a><div class="titlepage"></div><div class="refnamediv"><h2>Name</h2><p>VISHNU.listUsers — lists VISHNU users</p></div><div class="refsynopsisdiv" title="Synopsis"><h2>Synopsis</h2><div class="funcsynopsis"><table border="0" summary="Function synopsis" cellspacing="0" cellpadding="0" class="funcprototype-table"><tr><td><code class="funcdef"><b class="fsfunc">ret, listuser=VISHNU.listUsers</b>(</code></td><td><var class="pdparam">sessionKey</var>, </td><td> </td></tr><tr><td> </td><td><var class="pdparam">options = ListUsersOptions()</var><code>)</code>;</td><td> </td></tr></table><div class="paramdef-list"><code>string <var class="pdparam">sessionKey</var></code>;<br /><code>ListUsersOptions <var class="pdparam">options = ListUsersOptions()</var></code>;</div><div class="funcprototype-spacer"> </div></div></div><div class="refsect1" title="DESCRIPTION"><a id="description"></a><h2>DESCRIPTION</h2><p>This command allows an admin to display all users information except the passwords.</p></div><div class="refsect1" title="ARGUMENTS"><a id="arguments"></a><h2>ARGUMENTS</h2><div class="variablelist"><dl><dt><span class="term"><span class="emphasis"><em>sessionKey</em></span></span></dt><dd><p>Input argument. The sessionKey is the identifier of the session generated by VISHNU.</p></dd><dt><span class="term"><span class="emphasis"><em>listuser</em></span></span></dt><dd><p>Output argument. Listuser is the list of users .</p></dd><dt><span class="term"><span class="emphasis"><em>options</em></span></span></dt><dd><p>Input argument. Allows an admin to get information about a specific user identified by his/her userId or to get information about users authenticated by a specific user-authentication system.</p></dd></dl></div></div><div class="refsect1" title="RETURNED OBJECTS"><a id="returned objects"></a><h2>RETURNED OBJECTS</h2><div class="variablelist"><dl><dt><span class="term"><span class="emphasis"><em>errorCode (integer)</em></span></span></dt><dd><p>Output parameter. Contains 0 on success and the error code on failure.</p></dd><dt></dt><dd></dd></dl></div></div><div class="refsect1" title="EXCEPTIONS"><a id="exceptions"></a><h2>EXCEPTIONS</h2><p>The following exceptions may be thrown: </p><div class="variablelist"><dl><dt><span class="term">SystemException("Vishnu not available (Service bus failure)" [1])</span></dt><dd></dd><dt><span class="term">SystemException("Vishnu not available (Database error)" [2])</span></dt><dd></dd><dt><span class="term">SystemException("Vishnu not available (Database connection)" [3])</span></dt><dd></dd><dt><span class="term">SystemException("Vishnu not available (System)" [4])</span></dt><dd></dd><dt><span class="term">SystemException("Internal Error: Undefined exception" [9])</span></dt><dd></dd><dt><span class="term">UMSVishnuException("The userId is unknown" [21])</span></dt><dd></dd><dt><span class="term">UMSVishnuException("The user is not an administrator" [25])</span></dt><dd></dd><dt><span class="term">UMSVishnuException("The session key is unrecognized" [28])</span></dt><dd></dd><dt><span class="term">UMSVishnuException("The sessionKey is expired. The session is closed." [29])</span></dt><dd></dd></dl></div></div></div><div class="refentry" title="VISHNU.configureDefaultOption"><div class="refentry.separator"><hr /></div><a id="idp964272"></a><div class="titlepage"></div><div class="refnamediv"><h2>Name</h2><p>VISHNU.configureDefaultOption — configures a default option value</p></div><div class="refsynopsisdiv" title="Synopsis"><h2>Synopsis</h2><div class="funcsynopsis"><table border="0" summary="Function synopsis" cellspacing="0" cellpadding="0" class="funcprototype-table"><tr><td><code class="funcdef"><b class="fsfunc">ret=VISHNU.configureDefaultOption</b>(</code></td><td><var class="pdparam">sessionKey</var>, </td><td> </td></tr><tr><td> </td><td><var class="pdparam">optionValue</var><code>)</code>;</td><td> </td></tr></table><div class="paramdef-list"><code>string <var class="pdparam">sessionKey</var></code>;<br /><code>OptionValue <var class="pdparam">optionValue</var></code>;</div><div class="funcprototype-spacer"> </div></div></div><div class="refsect1" title="DESCRIPTION"><a id="description"></a><h2>DESCRIPTION</h2><p>Options in VISHNU corresponds to parameters of some VISHNU commands 
(e.g. the close policy for vishnu_connect)
that can be preset in the user configuration stored by the VISHNU system.
This command allows an administrator to configure the default value of an option;
this is the value that will be applied when the user has no configuration defined for
that option using the vishnu_configure_option command.</p></div><div class="refsect1" title="ARGUMENTS"><a id="arguments"></a><h2>ARGUMENTS</h2><div class="variablelist"><dl><dt><span class="term"><span class="emphasis"><em>sessionKey</em></span></span></dt><dd><p>Input argument. The sessionKey is the encrypted identifier of the session generated by VISHNU.</p></dd><dt><span class="term"><span class="emphasis"><em>optionValue</em></span></span></dt><dd><p>Input argument. The optionValue is an object which encapsulates the option information.</p></dd></dl></div></div><div class="refsect1" title="RETURNED OBJECTS"><a id="returned objects"></a><h2>RETURNED OBJECTS</h2><div class="variablelist"><dl><dt><span class="term"><span class="emphasis"><em>errorCode (integer)</em></span></span></dt><dd><p>Output parameter. Contains 0 on success and the error code on failure.</p></dd><dt></dt><dd></dd></dl></div></div><div class="refsect1" title="EXCEPTIONS"><a id="exceptions"></a><h2>EXCEPTIONS</h2><p>The following exceptions may be thrown: </p><div class="variablelist"><dl><dt><span class="term">SystemException("Vishnu not available (Service bus failure)" [1])</span></dt><dd></dd><dt><span class="term">SystemException("Vishnu not available (Database error)" [2])</span></dt><dd></dd><dt><span class="term">SystemException("Vishnu not available (Database connection)" [3])</span></dt><dd></dd><dt><span class="term">SystemException("Vishnu not available (System)" [4])</span></dt><dd></dd><dt><span class="term">SystemException("Internal Error: Undefined exception" [9])</span></dt><dd></dd><dt><span class="term">UMSVishnuException("The user is not an administrator" [25])</span></dt><dd></dd><dt><span class="term">UMSVishnuException("The session key is unrecognized" [28])</span></dt><dd></dd><dt><span class="term">UMSVishnuException("The sessionKey is expired. The session is closed." [29])</span></dt><dd></dd><dt><span class="term">UMSVishnuException("The name of the user option is unknown" [41])</span></dt><dd></dd><dt><span class="term">UMSVishnuException("The value of the timeout is incorrect" [43])</span></dt><dd></dd><dt><span class="term">UMSVishnuException("The value of the transfer command is incorrect" [44])</span></dt><dd></dd></dl></div></div></div><div class="refentry" title="VISHNU.addAuthSystem"><div class="refentry.separator"><hr /></div><a id="idp980888"></a><div class="titlepage"></div><div class="refnamediv"><h2>Name</h2><p>VISHNU.addAuthSystem — adds a new user-authentication system in VISHNU</p></div><div class="refsynopsisdiv" title="Synopsis"><h2>Synopsis</h2><div class="funcsynopsis"><table border="0" summary="Function synopsis" cellspacing="0" cellpadding="0" class="funcprototype-table"><tr><td><code class="funcdef"><b class="fsfunc">ret=VISHNU.addAuthSystem</b>(</code></td><td><var class="pdparam">sessionKey</var>, </td><td> </td></tr><tr><td> </td><td><var class="pdparam">newAuthSys</var><code>)</code>;</td><td> </td></tr></table><div class="paramdef-list"><code>string <var class="pdparam">sessionKey</var></code>;<br /><code>AuthSystem <var class="pdparam">newAuthSys</var></code>;</div><div class="funcprototype-spacer"> </div></div></div><div class="refsect1" title="DESCRIPTION"><a id="description"></a><h2>DESCRIPTION</h2><p>This command allows an admin to add a new user-authentication system in VISHNU.
Several user-authentication system's information are mandatory such as: URI,  login, password, 
type and optionally for LDAP the DN of the root entry. By default, the type of the user-authentication system is LDAP. </p></div><div class="refsect1" title="ARGUMENTS"><a id="arguments"></a><h2>ARGUMENTS</h2><div class="variablelist"><dl><dt><span class="term"><span class="emphasis"><em>sessionKey</em></span></span></dt><dd><p>Input argument. The sessionKey is the encrypted identifier of the session generated by VISHNU.</p></dd><dt><span class="term"><span class="emphasis"><em>newAuthSys</em></span></span></dt><dd><p>Input/Output argument. Is an object which encapsulates the information of the user-authentication system which will be added in VISHNU.</p></dd></dl></div></div><div class="refsect1" title="RETURNED OBJECTS"><a id="returned objects"></a><h2>RETURNED OBJECTS</h2><div class="variablelist"><dl><dt><span class="term"><span class="emphasis"><em>errorCode (integer)</em></span></span></dt><dd><p>Output parameter. Contains 0 on success and the error code on failure.</p></dd><dt></dt><dd></dd></dl></div></div><div class="refsect1" title="EXCEPTIONS"><a id="exceptions"></a><h2>EXCEPTIONS</h2><p>The following exceptions may be thrown: </p><div class="variablelist"><dl><dt><span class="term">SystemException("Vishnu not available (Service bus failure)" [1])</span></dt><dd></dd><dt><span class="term">SystemException("Vishnu not available (Database error)" [2])</span></dt><dd></dd><dt><span class="term">SystemException("Vishnu not available (Database connection)" [3])</span></dt><dd></dd><dt><span class="term">SystemException("Vishnu not available (System)" [4])</span></dt><dd></dd><dt><span class="term">SystemException("Internal Error: Undefined exception" [9])</span></dt><dd></dd><dt><span class="term">UMSVishnuException("The user is not an administrator" [25])</span></dt><dd></dd><dt><span class="term">UMSVishnuException("The session key is unrecognized" [28])</span></dt><dd></dd><dt><span class="term">UMSVishnuException("The sessionKey is expired. The session is closed." [29])</span></dt><dd></dd><dt><span class="term">UMSVishnuException("The identifier (name or generated identifier) of the user-authentication system already exists" [50])</span></dt><dd></dd><dt><span class="term">UMSVishnuException("The encryption method is unknown" [53])</span></dt><dd></dd></dl></div></div></div><div class="refentry" title="VISHNU.updateAuthSystem"><div class="refentry.separator"><hr /></div><a id="idp996824"></a><div class="titlepage"></div><div class="refnamediv"><h2>Name</h2><p>VISHNU.updateAuthSystem — updates a user-authentication system in VISHNU</p></div><div class="refsynopsisdiv" title="Synopsis"><h2>Synopsis</h2><div class="funcsynopsis"><table border="0" summary="Function synopsis" cellspacing="0" cellpadding="0" class="funcprototype-table"><tr><td><code class="funcdef"><b class="fsfunc">ret=VISHNU.updateAuthSystem</b>(</code></td><td><var class="pdparam">sessionKey</var>, </td><td> </td></tr><tr><td> </td><td><var class="pdparam">AuthSys</var><code>)</code>;</td><td> </td></tr></table><div class="paramdef-list"><code>string <var class="pdparam">sessionKey</var></code>;<br /><code>AuthSystem <var class="pdparam">AuthSys</var></code>;</div><div class="funcprototype-spacer"> </div></div></div><div class="refsect1" title="DESCRIPTION"><a id="description"></a><h2>DESCRIPTION</h2><p>This command allows an admin to update a user-authentication system in VISHNU.
It is possible to change the parameters which follow: URI,  login, password, 
type and optionally for LDAP the DN of the root entry. By default, the type of the user-authentication system is LDAP. </p></div><div class="refsect1" title="ARGUMENTS"><a id="arguments"></a><h2>ARGUMENTS</h2><div class="variablelist"><dl><dt><span class="term"><span class="emphasis"><em>sessionKey</em></span></span></dt><dd><p>Input argument. The sessionKey is the encrypted identifier of the session generated by VISHNU.</p></dd><dt><span class="term"><span class="emphasis"><em>AuthSys</em></span></span></dt><dd><p>Input argument. Is an object which encapsulates the information of the user-authentication system which will be added in VISHNU.</p></dd></dl></div></div><div class="refsect1" title="RETURNED OBJECTS"><a id="returned objects"></a><h2>RETURNED OBJECTS</h2><div class="variablelist"><dl><dt><span class="term"><span class="emphasis"><em>errorCode (integer)</em></span></span></dt><dd><p>Output parameter. Contains 0 on success and the error code on failure.</p></dd><dt></dt><dd></dd></dl></div></div><div class="refsect1" title="EXCEPTIONS"><a id="exceptions"></a><h2>EXCEPTIONS</h2><p>The following exceptions may be thrown: </p><div class="variablelist"><dl><dt><span class="term">SystemException("Vishnu not available (Service bus failure)" [1])</span></dt><dd></dd><dt><span class="term">SystemException("Vishnu not available (Database error)" [2])</span></dt><dd></dd><dt><span class="term">SystemException("Vishnu not available (Database connection)" [3])</span></dt><dd></dd><dt><span class="term">SystemException("Vishnu not available (System)" [4])</span></dt><dd></dd><dt><span class="term">SystemException("Internal Error: Undefined exception" [9])</span></dt><dd></dd><dt><span class="term">UMSVishnuException("The user is not an administrator" [25])</span></dt><dd></dd><dt><span class="term">UMSVishnuException("The session key is unrecognized" [28])</span></dt><dd></dd><dt><span class="term">UMSVishnuException("The sessionKey is expired. The session is closed." [29])</span></dt><dd></dd><dt><span class="term">UMSVishnuException("The user-authentication system is unknown or locked" [48])</span></dt><dd></dd><dt><span class="term">UMSVishnuException("The user-authentication system is already locked" [49])</span></dt><dd></dd><dt><span class="term">UMSVishnuException("The encryption method is unknown" [53])</span></dt><dd></dd></dl></div></div></div><div class="refentry" title="VISHNU.deleteAuthSystem"><div class="refentry.separator"><hr /></div><a id="idp1013344"></a><div class="titlepage"></div><div class="refnamediv"><h2>Name</h2><p>VISHNU.deleteAuthSystem — removes a user-authentication system from VISHNU</p></div><div class="refsynopsisdiv" title="Synopsis"><h2>Synopsis</h2><div class="funcsynopsis"><table border="0" summary="Function synopsis" cellspacing="0" cellpadding="0" class="funcprototype-table"><tr><td><code class="funcdef"><b class="fsfunc">ret=VISHNU.deleteAuthSystem</b>(</code></td><td><var class="pdparam">sessionKey</var>, </td><td> </td></tr><tr><td> </td><td><var class="pdparam">authSystemId</var><code>)</code>;</td><td> </td></tr></table><div class="paramdef-list"><code>string <var class="pdparam">sessionKey</var></code>;<br /><code>string <var class="pdparam">authSystemId</var></code>;</div><div class="funcprototype-spacer"> </div></div></div><div class="refsect1" title="DESCRIPTION"><a id="description"></a><h2>DESCRIPTION</h2><p>This command allows an admin to remove a user-authentication system from VISHNU.</p></div><div class="refsect1" title="ARGUMENTS"><a id="arguments"></a><h2>ARGUMENTS</h2><div class="variablelist"><dl><dt><span class="term"><span class="emphasis"><em>sessionKey</em></span></span></dt><dd><p>Input argument. The sessionKey is the encrypted identifier of the session generated by VISHNU.</p></dd><dt><span class="term"><span class="emphasis"><em>authSystemId</em></span></span></dt><dd><p>Input argument. AuthSystemId is the identifier of the user-authentication system.</p></dd></dl></div></div><div class="refsect1" title="RETURNED OBJECTS"><a id="returned objects"></a><h2>RETURNED OBJECTS</h2><div class="variablelist"><dl><dt><span class="term"><span class="emphasis"><em>errorCode (integer)</em></span></span></dt><dd><p>Output parameter. Contains 0 on success and the error code on failure.</p></dd><dt></dt><dd></dd></dl></div></div><div class="refsect1" title="EXCEPTIONS"><a id="exceptions"></a><h2>EXCEPTIONS</h2><p>The following exceptions may be thrown: </p><div class="variablelist"><dl><dt><span class="term">SystemException("Vishnu not available (Service bus failure)" [1])</span></dt><dd></dd><dt><span class="term">SystemException("Vishnu not available (Database error)" [2])</span></dt><dd></dd><dt><span class="term">SystemException("Vishnu not available (Database connection)" [3])</span></dt><dd></dd><dt><span class="term">SystemException("Vishnu not available (System)" [4])</span></dt><dd></dd><dt><span class="term">SystemException("Internal Error: Undefined exception" [9])</span></dt><dd></dd><dt><span class="term">UMSVishnuException("The user is not an administrator" [25])</span></dt><dd></dd><dt><span class="term">UMSVishnuException("The session key is unrecognized" [28])</span></dt><dd></dd><dt><span class="term">UMSVishnuException("The sessionKey is expired. The session is closed." [29])</span></dt><dd></dd><dt><span class="term">UMSVishnuException("The user-authentication system is unknown or locked" [48])</span></dt><dd></dd></dl></div></div></div></div><div class="reference" title="IMS Command reference"><div class="titlepage"><div><div><h1 class="title"><a id="idp1028336"></a>IMS Command reference</h1></div></div><hr /></div><div class="toc"><p><b>Table of Contents</b></p><dl><dt><span class="refentrytitle"><a href="#idp1028688">vishnu_get_processes</a></span><span class="refpurpose"> — displays the list of the VISHNU processes running on machines</span></dt><dt><span class="refentrytitle"><a href="#idp1041776">vishnu_set_system_info</a></span><span class="refpurpose"> — updates the system information of a machine</span></dt><dt><span class="refentrytitle"><a href="#idp1057328">vishnu_set_system_threshold</a></span><span class="refpurpose"> — sets a threshold on a machine of a system</span></dt><dt><span class="refentrytitle"><a href="#idp1071256">vishnu_get_system_threshold</a></span><span class="refpurpose"> — gets a system threshold on a machine</span></dt><dt><span class="refentrytitle"><a href="#idp1086512">vishnu_define_user_identifier</a></span><span class="refpurpose"> — defines the shape of the identifiers automatically generated for the users</span></dt><dt><span class="refentrytitle"><a href="#idp1099488">vishnu_define_machine_identifier</a></span><span class="refpurpose"> — defines the shape of the identifiers automatically generated for the machines</span></dt><dt><span class="refentrytitle"><a href="#idp1112528">vishnu_define_job_identifier</a></span><span class="refpurpose"> — defines the shape of the identifiers automatically generated for the jobs</span></dt><dt><span class="refentrytitle"><a href="#idp1125448">vishnu_define_transfer_identifier</a></span><span class="refpurpose"> — defines the shape of the identifiers automatically generated for the file transfers</span></dt><dt><span class="refentrytitle"><a href="#idp1138416">vishnu_define_auth_identifier</a></span><span class="refpurpose"> — defines the shape of the identifiers automatically generated for the authentication system</span></dt><dt><span class="refentrytitle"><a href="#idp1151392">vishnu_load_shed</a></span><span class="refpurpose"> — sheds load on a machine</span></dt><dt><span class="refentrytitle"><a href="#idp1165088">vishnu_set_update_frequency</a></span><span class="refpurpose"> — sets the update frequency of the IMS tables</span></dt><dt><span class="refentrytitle"><a href="#idp1177504">vishnu_stop</a></span><span class="refpurpose"> — To stop (and do not try to relaunch) a SeD</span></dt><dt><span class="refentrytitle"><a href="#idp1190272">vishnu_restart</a></span><span class="refpurpose"> — To restart a SeD or a MA</span></dt><dt><span class="refentrytitle"><a href="#idp1205752">vishnu_define_work_identifier</a></span><span class="refpurpose"> — defines the shape of the identifiers automatically generated for the work</span></dt></dl></div><div class="refentry" title="vishnu_get_processes"><a id="idp1028688"></a><div class="titlepage"></div><div class="refnamediv"><h2>Name</h2><p>vishnu_get_processes — displays the list of the VISHNU processes running on machines</p></div><div class="refsynopsisdiv" title="Synopsis"><h2>Synopsis</h2><div class="cmdsynopsis"><p><code class="command">vishnu_get_processes</code>  [<code class="option">-h</code>] [<code class="option">-p <em class="replaceable"><code>machineId</code></em></code>]</p></div></div><div class="refsect1" title="DESCRIPTION"><a id="description"></a><h2>DESCRIPTION</h2><p>This command with restricted access is used to get the list of VISHNU server processes that are running on the infrastructure or on a single machine. The results contain both the VISHNU identifier of the process and the DIET underlying middleware identifier. </p></div><div class="refsect1" title="OPTIONS"><a id="options"></a><h2>OPTIONS</h2><div class="variablelist"><dl><dt><span class="term"><code class="option">-h <em class="replaceable"><code>help</code></em></code></span></dt><dd><p>help about the command.</p></dd><dt><span class="term"><code class="option">-p <em class="replaceable"><code>machineId</code></em></code></span></dt><dd><p>The id of the machine.</p></dd></dl></div></div><div class="refsect1" title="ENVIRONMENT"><a id="environment"></a><h2>ENVIRONMENT</h2><div class="variablelist"><dl><dt><span class="term"><code class="envar">VISHNU_CONFIG_FILE</code></span></dt><dd><p>Contains the path to the local configuration file for VISHNU.</p></dd></dl></div></div><div class="refsect1" title="DIAGNOSTICS"><a id="diagnostics"></a><h2>DIAGNOSTICS</h2><p>The following diagnostics may be issued on stderr and the command will return the code provided within brackets: </p><div class="variablelist"><dl><dt><span class="term">"If a parameter is invalid" [10]</span></dt><dd></dd><dt><span class="term">"There is no open session in this terminal" [13]</span></dt><dd></dd><dt><span class="term">"Missing parameters" [14]</span></dt><dd></dd><dt><span class="term">"Vishnu initialization failed" [15]</span></dt><dd></dd><dt><span class="term">"Undefined error" [16]</span></dt><dd></dd></dl></div></div><div class="refsect1" title="EXAMPLE"><a id="example"></a><h2>EXAMPLE</h2><p>To get the list of the vishnu processes that are running and monitored on machine_1:</p><p>vishnu_get_processes -p machine_1</p></div></div><div class="refentry" title="vishnu_set_system_info"><div class="refentry.separator"><hr /></div><a id="idp1041776"></a><div class="titlepage"></div><div class="refnamediv"><h2>Name</h2><p>vishnu_set_system_info — updates the system information of a machine</p></div><div class="refsynopsisdiv" title="Synopsis"><h2>Synopsis</h2><div class="cmdsynopsis"><p><code class="command">vishnu_set_system_info</code>  [<code class="option">-h</code>] [<code class="option">-m <em class="replaceable"><code>memory</code></em></code>] [<code class="option">-d <em class="replaceable"><code>diskSpace</code></em></code>]  <em class="replaceable"><code>machineId</code></em> </p></div></div><div class="refsect1" title="DESCRIPTION"><a id="description"></a><h2>DESCRIPTION</h2><p>This command with restricted access is used to set system information on a machine in the VISHNU database. The machine must first be registered using the UMS "addMachine" call. Using the machine identifier, information such as the total memory and available diskspace on the machine can be added.</p></div><div class="refsect1" title="OPTIONS"><a id="options"></a><h2>OPTIONS</h2><div class="variablelist"><dl><dt><span class="term"><code class="option">-h <em class="replaceable"><code>help</code></em></code></span></dt><dd><p>help about the command.</p></dd><dt><span class="term"><code class="option">-m <em class="replaceable"><code>memory</code></em></code></span></dt><dd><p>Amount of RAM memory available on the machine (in Bytes).</p></dd><dt><span class="term"><code class="option">-d <em class="replaceable"><code>diskSpace</code></em></code></span></dt><dd><p>Amount of disk space available on the machine (in Bytes).</p></dd></dl></div></div><div class="refsect1" title="ENVIRONMENT"><a id="environment"></a><h2>ENVIRONMENT</h2><div class="variablelist"><dl><dt><span class="term"><code class="envar">VISHNU_CONFIG_FILE</code></span></dt><dd><p>Contains the path to the local configuration file for VISHNU.</p></dd></dl></div></div><div class="refsect1" title="DIAGNOSTICS"><a id="diagnostics"></a><h2>DIAGNOSTICS</h2><p>The following diagnostics may be issued on stderr and the command will return the code provided within brackets: </p><div class="variablelist"><dl><dt><span class="term">"The database generated an error" [2]</span></dt><dd></dd><dt><span class="term">"If a parameter is invalid" [10]</span></dt><dd></dd><dt><span class="term">"There is no open session in this terminal" [13]</span></dt><dd></dd><dt><span class="term">"Missing parameters" [14]</span></dt><dd></dd><dt><span class="term">"Vishnu initialization failed" [15]</span></dt><dd></dd><dt><span class="term">"Undefined error" [16]</span></dt><dd></dd></dl></div></div><div class="refsect1" title="EXAMPLE"><a id="example"></a><h2>EXAMPLE</h2><p>To set the diskspace size to 300 on machine_1:</p><p>vishnu_set_system_info -d 300 machine_1</p></div></div><div class="refentry" title="vishnu_set_system_threshold"><div class="refentry.separator"><hr /></div><a id="idp1057328"></a><div class="titlepage"></div><div class="refnamediv"><h2>Name</h2><p>vishnu_set_system_threshold — sets a threshold on a machine of a system</p></div><div class="refsynopsisdiv" title="Synopsis"><h2>Synopsis</h2><div class="cmdsynopsis"><p><code class="command">vishnu_set_system_threshold</code>  [<code class="option">-h</code>]  <em class="replaceable"><code>value</code></em>   <em class="replaceable"><code>machineId</code></em>   <em class="replaceable"><code>type</code></em>   <em class="replaceable"><code>handler</code></em> </p></div></div><div class="refsect1" title="DESCRIPTION"><a id="description"></a><h2>DESCRIPTION</h2><p>This function allows an administrator to set a threshold. Each time an IMS server records the state of a machine, it checks the values defined, if a threshold is reached (over a use of the cpu or under the free memory or diskspace available), the administrator responsible for the threshold will receive an mail. These threshold will help the administrator to be aware of critical situations on a machine. Warning, a mail is sent for each time the threshold is reached, if a value swings around a threshold, the administrator may receive lots of emails depending on the update frequency.</p></div><div class="refsect1" title="OPTIONS"><a id="options"></a><h2>OPTIONS</h2><div class="variablelist"><dl><dt><span class="term"><code class="option">-h <em class="replaceable"><code>help</code></em></code></span></dt><dd><p>help about the command.</p></dd></dl></div></div><div class="refsect1" title="ENVIRONMENT"><a id="environment"></a><h2>ENVIRONMENT</h2><div class="variablelist"><dl><dt><span class="term"><code class="envar">VISHNU_CONFIG_FILE</code></span></dt><dd><p>Contains the path to the local configuration file for VISHNU.</p></dd></dl></div></div><div class="refsect1" title="DIAGNOSTICS"><a id="diagnostics"></a><h2>DIAGNOSTICS</h2><p>The following diagnostics may be issued on stderr and the command will return the code provided within brackets: </p><div class="variablelist"><dl><dt><span class="term">"The database generated an error" [2]</span></dt><dd></dd><dt><span class="term">"If a parameter is invalid" [10]</span></dt><dd></dd><dt><span class="term">"There is no open session in this terminal" [13]</span></dt><dd></dd><dt><span class="term">"Missing parameters" [14]</span></dt><dd></dd><dt><span class="term">"Vishnu initialization failed" [15]</span></dt><dd></dd><dt><span class="term">"Undefined error" [16]</span></dt><dd></dd></dl></div></div><div class="refsect1" title="EXAMPLE"><a id="example"></a><h2>EXAMPLE</h2><p>To set a threshold of type use of the CPU(value=1) of value 99% on machine_1 and handled by the user admin_1:</p><p>vishnu_set_system_threshold 99 machine_1 1 admin_1</p></div></div><div class="refentry" title="vishnu_get_system_threshold"><div class="refentry.separator"><hr /></div><a id="idp1071256"></a><div class="titlepage"></div><div class="refnamediv"><h2>Name</h2><p>vishnu_get_system_threshold — gets a system threshold on a machine</p></div><div class="refsynopsisdiv" title="Synopsis"><h2>Synopsis</h2><div class="cmdsynopsis"><p><code class="command">vishnu_get_system_threshold</code>  [<code class="option">-h</code>] [<code class="option">-m <em class="replaceable"><code>machineId</code></em></code>] [<code class="option">-t <em class="replaceable"><code>metricType</code></em></code>]</p></div></div><div class="refsect1" title="DESCRIPTION"><a id="description"></a><h2>DESCRIPTION</h2><p>This function allows an administrator to get the thresholds that may be defined on a machine. This may be used to check the parameters defined to monitor the machine.
Each time a threshold is reached, a mail is sent. So checking the values of the threshold is important for the administrator to make sure they will not get tons of emails.</p></div><div class="refsect1" title="OPTIONS"><a id="options"></a><h2>OPTIONS</h2><div class="variablelist"><dl><dt><span class="term"><code class="option">-h <em class="replaceable"><code>help</code></em></code></span></dt><dd><p>help about the command.</p></dd><dt><span class="term"><code class="option">-m <em class="replaceable"><code>machineId</code></em></code></span></dt><dd><p>The id of the machine where the metric is defined.</p></dd><dt><span class="term"><code class="option">-t <em class="replaceable"><code>metricType</code></em></code></span></dt><dd><p>The type of the metric.
The value must be an integer. Predefined values are: 0 (UNDEFINED), 1 (CPUUSE), 2 (FREEDISKSPACE), 3 (FREEMEMORY).</p></dd></dl></div></div><div class="refsect1" title="ENVIRONMENT"><a id="environment"></a><h2>ENVIRONMENT</h2><div class="variablelist"><dl><dt><span class="term"><code class="envar">VISHNU_CONFIG_FILE</code></span></dt><dd><p>Contains the path to the local configuration file for VISHNU.</p></dd></dl></div></div><div class="refsect1" title="DIAGNOSTICS"><a id="diagnostics"></a><h2>DIAGNOSTICS</h2><p>The following diagnostics may be issued on stderr and the command will return the code provided within brackets: </p><div class="variablelist"><dl><dt><span class="term">"The database generated an error" [2]</span></dt><dd></dd><dt><span class="term">"If a parameter is invalid" [10]</span></dt><dd></dd><dt><span class="term">"There is no open session in this terminal" [13]</span></dt><dd></dd><dt><span class="term">"Missing parameters" [14]</span></dt><dd></dd><dt><span class="term">"Vishnu initialization failed" [15]</span></dt><dd></dd><dt><span class="term">"Undefined error" [16]</span></dt><dd></dd></dl></div></div><div class="refsect1" title="EXAMPLE"><a id="example"></a><h2>EXAMPLE</h2><p>To get all the thresholds:</p><p>vishnu_get_system_threshold</p></div></div><div class="refentry" title="vishnu_define_user_identifier"><div class="refentry.separator"><hr /></div><a id="idp1086512"></a><div class="titlepage"></div><div class="refnamediv"><h2>Name</h2><p>vishnu_define_user_identifier — defines the shape of the identifiers automatically generated for the users</p></div><div class="refsynopsisdiv" title="Synopsis"><h2>Synopsis</h2><div class="cmdsynopsis"><p><code class="command">vishnu_define_user_identifier</code>  [<code class="option">-h</code>]  <em class="replaceable"><code>format</code></em> </p></div></div><div class="refsect1" title="DESCRIPTION"><a id="description"></a><h2>DESCRIPTION</h2><p>This function allows an administrator to define the format of the identifier that will be automatically generated for the users. Once the format is defined, each time a user is added, the format will be used to define its identifier.
The format can contain various variables, a variable is preceded by the '$' symbol. Moreover, the counter variable '$CPT' MUST be present in the format, otherwise it will be rejected.
The available variables are: 
$CPT: a counter
$NAME: The name of the user
$UNAME: The name of the user
$DAY: The day the user is added
$MONTH: The month the user is added
$YEAR: The year the user is added
$SITE: The site the user is
$TYPE: The 'U' symb to remind it is a user id</p></div><div class="refsect1" title="OPTIONS"><a id="options"></a><h2>OPTIONS</h2><div class="variablelist"><dl><dt><span class="term"><code class="option">-h <em class="replaceable"><code>help</code></em></code></span></dt><dd><p>help about the command.</p></dd></dl></div></div><div class="refsect1" title="ENVIRONMENT"><a id="environment"></a><h2>ENVIRONMENT</h2><div class="variablelist"><dl><dt><span class="term"><code class="envar">VISHNU_CONFIG_FILE</code></span></dt><dd><p>Contains the path to the local configuration file for VISHNU.</p></dd></dl></div></div><div class="refsect1" title="DIAGNOSTICS"><a id="diagnostics"></a><h2>DIAGNOSTICS</h2><p>The following diagnostics may be issued on stderr and the command will return the code provided within brackets: </p><div class="variablelist"><dl><dt><span class="term">"The database generated an error" [2]</span></dt><dd></dd><dt><span class="term">"If a parameter is invalid" [10]</span></dt><dd></dd><dt><span class="term">"There is no open session in this terminal" [13]</span></dt><dd></dd><dt><span class="term">"Missing parameters" [14]</span></dt><dd></dd><dt><span class="term">"Vishnu initialization failed" [15]</span></dt><dd></dd><dt><span class="term">"Undefined error" [16]</span></dt><dd></dd></dl></div></div><div class="refsect1" title="EXAMPLE"><a id="example"></a><h2>EXAMPLE</h2><p>To define the format to user_$CPT:</p><p>vishnu_define_user_identifier user_\$CPT</p></div></div><div class="refentry" title="vishnu_define_machine_identifier"><div class="refentry.separator"><hr /></div><a id="idp1099488"></a><div class="titlepage"></div><div class="refnamediv"><h2>Name</h2><p>vishnu_define_machine_identifier — defines the shape of the identifiers automatically generated for the machines</p></div><div class="refsynopsisdiv" title="Synopsis"><h2>Synopsis</h2><div class="cmdsynopsis"><p><code class="command">vishnu_define_machine_identifier</code>  [<code class="option">-h</code>]  <em class="replaceable"><code>format</code></em> </p></div></div><div class="refsect1" title="DESCRIPTION"><a id="description"></a><h2>DESCRIPTION</h2><p>This function allows an administrator to define the format of the identifier that will be automatically generated for the machines. Once the format is defined, each time a machine is added, the format will be used to define its identifier.
The format can contain various variables, a variable is preceded by the '$' symbol. Moreover, the counter variable '$CPT' MUST be present in the format, otherwise it will be rejected.
The available variables are: 
$CPT: a counter
$MANAME: The hostname of the machine
$NAME: The hostname of the machine
$DAY: The day the machine is added
$MONTH: The month the machine is added
$YEAR: The year the machine is added
$SITE: The site the machine is
$TYPE: The 'M' symb to remind it is a machine id</p></div><div class="refsect1" title="OPTIONS"><a id="options"></a><h2>OPTIONS</h2><div class="variablelist"><dl><dt><span class="term"><code class="option">-h <em class="replaceable"><code>help</code></em></code></span></dt><dd><p>help about the command.</p></dd></dl></div></div><div class="refsect1" title="ENVIRONMENT"><a id="environment"></a><h2>ENVIRONMENT</h2><div class="variablelist"><dl><dt><span class="term"><code class="envar">VISHNU_CONFIG_FILE</code></span></dt><dd><p>Contains the path to the local configuration file for VISHNU.</p></dd></dl></div></div><div class="refsect1" title="DIAGNOSTICS"><a id="diagnostics"></a><h2>DIAGNOSTICS</h2><p>The following diagnostics may be issued on stderr and the command will return the code provided within brackets: </p><div class="variablelist"><dl><dt><span class="term">"The database generated an error" [2]</span></dt><dd></dd><dt><span class="term">"If a parameter is invalid" [10]</span></dt><dd></dd><dt><span class="term">"There is no open session in this terminal" [13]</span></dt><dd></dd><dt><span class="term">"Missing parameters" [14]</span></dt><dd></dd><dt><span class="term">"Vishnu initialization failed" [15]</span></dt><dd></dd><dt><span class="term">"Undefined error" [16]</span></dt><dd></dd></dl></div></div><div class="refsect1" title="EXAMPLE"><a id="example"></a><h2>EXAMPLE</h2><p>To define the format to machine_$CPT:</p><p>vishnu_define_machine_identifier machine_\$CPT</p></div></div><div class="refentry" title="vishnu_define_job_identifier"><div class="refentry.separator"><hr /></div><a id="idp1112528"></a><div class="titlepage"></div><div class="refnamediv"><h2>Name</h2><p>vishnu_define_job_identifier — defines the shape of the identifiers automatically generated for the jobs</p></div><div class="refsynopsisdiv" title="Synopsis"><h2>Synopsis</h2><div class="cmdsynopsis"><p><code class="command">vishnu_define_job_identifier</code>  [<code class="option">-h</code>]  <em class="replaceable"><code>format</code></em> </p></div></div><div class="refsect1" title="DESCRIPTION"><a id="description"></a><h2>DESCRIPTION</h2><p>This function allows an administrator to define the format of the identifier that will be automatically generated for the jobs submited through TMS. Once the format is defined, each time a job is submitted, the format will be used to define its identifier.
The format can contain various variables, a variable is preceded by the '$' symbol. Moreover, the counter variable '$CPT' MUST be present in the format, otherwise it will be rejected.
The available variables are: 
$CPT: a counter
$DAY: The day the job is submitted
$MONTH: The month the job is submitted
$YEAR: The year the job is submitted
$TYPE: The 'J' symb to remind it is a job id</p></div><div class="refsect1" title="OPTIONS"><a id="options"></a><h2>OPTIONS</h2><div class="variablelist"><dl><dt><span class="term"><code class="option">-h <em class="replaceable"><code>help</code></em></code></span></dt><dd><p>help about the command.</p></dd></dl></div></div><div class="refsect1" title="ENVIRONMENT"><a id="environment"></a><h2>ENVIRONMENT</h2><div class="variablelist"><dl><dt><span class="term"><code class="envar">VISHNU_CONFIG_FILE</code></span></dt><dd><p>Contains the path to the local configuration file for VISHNU.</p></dd></dl></div></div><div class="refsect1" title="DIAGNOSTICS"><a id="diagnostics"></a><h2>DIAGNOSTICS</h2><p>The following diagnostics may be issued on stderr and the command will return the code provided within brackets: </p><div class="variablelist"><dl><dt><span class="term">"The database generated an error" [2]</span></dt><dd></dd><dt><span class="term">"If a parameter is invalid" [10]</span></dt><dd></dd><dt><span class="term">"There is no open session in this terminal" [13]</span></dt><dd></dd><dt><span class="term">"Missing parameters" [14]</span></dt><dd></dd><dt><span class="term">"Vishnu initialization failed" [15]</span></dt><dd></dd><dt><span class="term">"Undefined error" [16]</span></dt><dd></dd></dl></div></div><div class="refsect1" title="EXAMPLE"><a id="example"></a><h2>EXAMPLE</h2><p>To define the format to job_$CPT:</p><p>vishnu_define_job_identifier job_\$CPT</p></div></div><div class="refentry" title="vishnu_define_transfer_identifier"><div class="refentry.separator"><hr /></div><a id="idp1125448"></a><div class="titlepage"></div><div class="refnamediv"><h2>Name</h2><p>vishnu_define_transfer_identifier — defines the shape of the identifiers automatically generated for the file transfers</p></div><div class="refsynopsisdiv" title="Synopsis"><h2>Synopsis</h2><div class="cmdsynopsis"><p><code class="command">vishnu_define_transfer_identifier</code>  [<code class="option">-h</code>]  <em class="replaceable"><code>format</code></em> </p></div></div><div class="refsect1" title="DESCRIPTION"><a id="description"></a><h2>DESCRIPTION</h2><p>This function allows an administrator to define the format of the identifier that will be automatically generated for the file transfers. Once the format is defined, each time a file transfer is done, the format will be used to define its identifier.
The format can contain various variables, a variable is preceded by the '$' symbol. Moreover, the counter variable '$CPT' MUST be present in the format, otherwise it will be rejected.
The available variables are: 
$CPT: a counter
$DAY: The day the file transfer is done
$MONTH: The month the file transfer is done
$YEAR: The year the file transfer is done
$TYPE: The 'F' symb to remind it is a file transfer id</p></div><div class="refsect1" title="OPTIONS"><a id="options"></a><h2>OPTIONS</h2><div class="variablelist"><dl><dt><span class="term"><code class="option">-h <em class="replaceable"><code>help</code></em></code></span></dt><dd><p>help about the command.</p></dd></dl></div></div><div class="refsect1" title="ENVIRONMENT"><a id="environment"></a><h2>ENVIRONMENT</h2><div class="variablelist"><dl><dt><span class="term"><code class="envar">VISHNU_CONFIG_FILE</code></span></dt><dd><p>Contains the path to the local configuration file for VISHNU.</p></dd></dl></div></div><div class="refsect1" title="DIAGNOSTICS"><a id="diagnostics"></a><h2>DIAGNOSTICS</h2><p>The following diagnostics may be issued on stderr and the command will return the code provided within brackets: </p><div class="variablelist"><dl><dt><span class="term">"The database generated an error" [2]</span></dt><dd></dd><dt><span class="term">"If a parameter is invalid" [10]</span></dt><dd></dd><dt><span class="term">"There is no open session in this terminal" [13]</span></dt><dd></dd><dt><span class="term">"Missing parameters" [14]</span></dt><dd></dd><dt><span class="term">"Vishnu initialization failed" [15]</span></dt><dd></dd><dt><span class="term">"Undefined error" [16]</span></dt><dd></dd></dl></div></div><div class="refsect1" title="EXAMPLE"><a id="example"></a><h2>EXAMPLE</h2><p>To define the format to transfer_$CPT:</p><p>vishnu_define_transfer_identifier transfer_\$CPT</p></div></div><div class="refentry" title="vishnu_define_auth_identifier"><div class="refentry.separator"><hr /></div><a id="idp1138416"></a><div class="titlepage"></div><div class="refnamediv"><h2>Name</h2><p>vishnu_define_auth_identifier — defines the shape of the identifiers automatically generated for the authentication system</p></div><div class="refsynopsisdiv" title="Synopsis"><h2>Synopsis</h2><div class="cmdsynopsis"><p><code class="command">vishnu_define_auth_identifier</code>  [<code class="option">-h</code>]  <em class="replaceable"><code>format</code></em> </p></div></div><div class="refsect1" title="DESCRIPTION"><a id="description"></a><h2>DESCRIPTION</h2><p>This function allows an administrator to define the format of the identifier that will be automatically generated for the authentication. Once the format is defined, each time an authentication system is added, the format will be used to define its identifier.
The format can contain various variables, a variable is preceded by the '$' symbol. Moreover, the counter variable '$CPT' MUST be present in the format, otherwise it will be rejected.
The available variables are: 
$CPT: a counter
$DAY: The day the file transfer is done
$MONTH: The month the file transfer is done
$YEAR: The year the file transfer is done
$TYPE: The 'F' symb to remind it is a file transfer id</p></div><div class="refsect1" title="OPTIONS"><a id="options"></a><h2>OPTIONS</h2><div class="variablelist"><dl><dt><span class="term"><code class="option">-h <em class="replaceable"><code>help</code></em></code></span></dt><dd><p>help about the command.</p></dd></dl></div></div><div class="refsect1" title="ENVIRONMENT"><a id="environment"></a><h2>ENVIRONMENT</h2><div class="variablelist"><dl><dt><span class="term"><code class="envar">VISHNU_CONFIG_FILE</code></span></dt><dd><p>Contains the path to the local configuration file for VISHNU.</p></dd></dl></div></div><div class="refsect1" title="DIAGNOSTICS"><a id="diagnostics"></a><h2>DIAGNOSTICS</h2><p>The following diagnostics may be issued on stderr and the command will return the code provided within brackets: </p><div class="variablelist"><dl><dt><span class="term">"The database generated an error" [2]</span></dt><dd></dd><dt><span class="term">"If a parameter is invalid" [10]</span></dt><dd></dd><dt><span class="term">"There is no open session in this terminal" [13]</span></dt><dd></dd><dt><span class="term">"Missing parameters" [14]</span></dt><dd></dd><dt><span class="term">"Vishnu initialization failed" [15]</span></dt><dd></dd><dt><span class="term">"Undefined error" [16]</span></dt><dd></dd></dl></div></div><div class="refsect1" title="EXAMPLE"><a id="example"></a><h2>EXAMPLE</h2><p>To define the format to transfer_$CPT:</p><p>vishnu_define_auth_identifier LDAP_\$CPT</p></div></div><div class="refentry" title="vishnu_load_shed"><div class="refentry.separator"><hr /></div><a id="idp1151392"></a><div class="titlepage"></div><div class="refnamediv"><h2>Name</h2><p>vishnu_load_shed — sheds load on a machine</p></div><div class="refsynopsisdiv" title="Synopsis"><h2>Synopsis</h2><div class="cmdsynopsis"><p><code class="command">vishnu_load_shed</code>  [<code class="option">-h</code>]  <em class="replaceable"><code>machineId</code></em>   <em class="replaceable"><code>loadShedType</code></em> </p></div></div><div class="refsect1" title="DESCRIPTION"><a id="description"></a><h2>DESCRIPTION</h2><p>This function allows an administrator to shed load on a machine. Two modes are available: SOFT mode will cancel all the submitted jobs and file transfers for all VISHNU users (Note that jobs and file transfers not initiated through VISHNU will not be impacted). HARD mode will additionally stop all the VISHNU processes on the machine. If a user without administrator rights uses this function, all the user's jobs and file transfers will be cancelled on the machine. In the HARD mode, the stopped processes will not be automatically restarted.
Type values:
HARD = 1
SOFT   = 2</p></div><div class="refsect1" title="OPTIONS"><a id="options"></a><h2>OPTIONS</h2><div class="variablelist"><dl><dt><span class="term"><code class="option">-h <em class="replaceable"><code>help</code></em></code></span></dt><dd><p>help about the command.</p></dd></dl></div></div><div class="refsect1" title="ENVIRONMENT"><a id="environment"></a><h2>ENVIRONMENT</h2><div class="variablelist"><dl><dt><span class="term"><code class="envar">VISHNU_CONFIG_FILE</code></span></dt><dd><p>Contains the path to the local configuration file for VISHNU.</p></dd></dl></div></div><div class="refsect1" title="DIAGNOSTICS"><a id="diagnostics"></a><h2>DIAGNOSTICS</h2><p>The following diagnostics may be issued on stderr and the command will return the code provided within brackets: </p><div class="variablelist"><dl><dt><span class="term">"The database generated an error" [2]</span></dt><dd></dd><dt><span class="term">"If a parameter is invalid" [10]</span></dt><dd></dd><dt><span class="term">"There is no open session in this terminal" [13]</span></dt><dd></dd><dt><span class="term">"Missing parameters" [14]</span></dt><dd></dd><dt><span class="term">"Vishnu initialization failed" [15]</span></dt><dd></dd><dt><span class="term">"Undefined error" [16]</span></dt><dd></dd><dt><span class="term">"If a component is unavailable" [301]</span></dt><dd></dd></dl></div></div><div class="refsect1" title="EXAMPLE"><a id="example"></a><h2>EXAMPLE</h2><p>To make a hard load shedding on machine_1:</p><p>vishnu_load_shed machine_1 1</p></div></div><div class="refentry" title="vishnu_set_update_frequency"><div class="refentry.separator"><hr /></div><a id="idp1165088"></a><div class="titlepage"></div><div class="refnamediv"><h2>Name</h2><p>vishnu_set_update_frequency — sets the update frequency of the IMS tables</p></div><div class="refsynopsisdiv" title="Synopsis"><h2>Synopsis</h2><div class="cmdsynopsis"><p><code class="command">vishnu_set_update_frequency</code>  [<code class="option">-h</code>]  <em class="replaceable"><code>freq</code></em> </p></div></div><div class="refsect1" title="DESCRIPTION"><a id="description"></a><h2>DESCRIPTION</h2><p>This function allows an admin to set the update frequency. This frequency corresponds to how often the state of the machines is automatically polled by the IMS server. The value must be in seconds.</p></div><div class="refsect1" title="OPTIONS"><a id="options"></a><h2>OPTIONS</h2><div class="variablelist"><dl><dt><span class="term"><code class="option">-h <em class="replaceable"><code>help</code></em></code></span></dt><dd><p>help about the command.</p></dd></dl></div></div><div class="refsect1" title="ENVIRONMENT"><a id="environment"></a><h2>ENVIRONMENT</h2><div class="variablelist"><dl><dt><span class="term"><code class="envar">VISHNU_CONFIG_FILE</code></span></dt><dd><p>Contains the path to the local configuration file for VISHNU.</p></dd></dl></div></div><div class="refsect1" title="DIAGNOSTICS"><a id="diagnostics"></a><h2>DIAGNOSTICS</h2><p>The following diagnostics may be issued on stderr and the command will return the code provided within brackets: </p><div class="variablelist"><dl><dt><span class="term">"The database generated an error" [2]</span></dt><dd></dd><dt><span class="term">"If a parameter is invalid" [10]</span></dt><dd></dd><dt><span class="term">"There is no open session in this terminal" [13]</span></dt><dd></dd><dt><span class="term">"Missing parameters" [14]</span></dt><dd></dd><dt><span class="term">"Vishnu initialization failed" [15]</span></dt><dd></dd><dt><span class="term">"Undefined error" [16]</span></dt><dd></dd></dl></div></div><div class="refsect1" title="EXAMPLE"><a id="example"></a><h2>EXAMPLE</h2><p>To set the frequency to 100:</p><p>vishnu_set_update_frequency 100</p></div></div><div class="refentry" title="vishnu_stop"><div class="refentry.separator"><hr /></div><a id="idp1177504"></a><div class="titlepage"></div><div class="refnamediv"><h2>Name</h2><p>vishnu_stop — To stop (and do not try to relaunch) a SeD</p></div><div class="refsynopsisdiv" title="Synopsis"><h2>Synopsis</h2><div class="cmdsynopsis"><p><code class="command">vishnu_stop</code>  [<code class="option">-h</code>]  <em class="replaceable"><code>processName</code></em>   <em class="replaceable"><code>machineId</code></em> </p></div></div><div class="refsect1" title="DESCRIPTION"><a id="description"></a><h2>DESCRIPTION</h2><p>This function allows an admin to stop a VISHNU server on a machine. The stopped process will not be restarted automatically.
The important parameters in the process are the names and the machine.
The processName must be UMS, TMS, IMS or FMS , in upper case.
</p></div><div class="refsect1" title="OPTIONS"><a id="options"></a><h2>OPTIONS</h2><div class="variablelist"><dl><dt><span class="term"><code class="option">-h <em class="replaceable"><code>help</code></em></code></span></dt><dd><p>help about the command.</p></dd></dl></div></div><div class="refsect1" title="ENVIRONMENT"><a id="environment"></a><h2>ENVIRONMENT</h2><div class="variablelist"><dl><dt><span class="term"><code class="envar">VISHNU_CONFIG_FILE</code></span></dt><dd><p>Contains the path to the local configuration file for VISHNU.</p></dd></dl></div></div><div class="refsect1" title="DIAGNOSTICS"><a id="diagnostics"></a><h2>DIAGNOSTICS</h2><p>The following diagnostics may be issued on stderr and the command will return the code provided within brackets: </p><div class="variablelist"><dl><dt><span class="term">"The database generated an error" [2]</span></dt><dd></dd><dt><span class="term">"If a parameter is invalid" [10]</span></dt><dd></dd><dt><span class="term">"There is no open session in this terminal" [13]</span></dt><dd></dd><dt><span class="term">"Missing parameters" [14]</span></dt><dd></dd><dt><span class="term">"Vishnu initialization failed" [15]</span></dt><dd></dd><dt><span class="term">"Undefined error" [16]</span></dt><dd></dd></dl></div></div><div class="refsect1" title="EXAMPLE"><a id="example"></a><h2>EXAMPLE</h2><p>To stop the UMS process on machine_1:</p><p>vishnu_stop UMS machine_1</p></div></div><div class="refentry" title="vishnu_restart"><div class="refentry.separator"><hr /></div><a id="idp1190272"></a><div class="titlepage"></div><div class="refnamediv"><h2>Name</h2><p>vishnu_restart — To restart a SeD or a MA</p></div><div class="refsynopsisdiv" title="Synopsis"><h2>Synopsis</h2><div class="cmdsynopsis"><p><code class="command">vishnu_restart</code>  [<code class="option">-h</code>] [<code class="option">-v <em class="replaceable"><code>vishnuConf</code></em></code>] [<code class="option">-t <em class="replaceable"><code>sedType</code></em></code>]  <em class="replaceable"><code>machineId</code></em> </p></div></div><div class="refsect1" title="DESCRIPTION"><a id="description"></a><h2>DESCRIPTION</h2><p>This function allows an admin to restart a VISHNU server on a machine. Warning when restarting a server, first it is tried to stop it, so if one is running it is stopped and then another is restarted.</p></div><div class="refsect1" title="OPTIONS"><a id="options"></a><h2>OPTIONS</h2><div class="variablelist"><dl><dt><span class="term"><code class="option">-h <em class="replaceable"><code>help</code></em></code></span></dt><dd><p>help about the command.</p></dd><dt><span class="term"><code class="option">-v <em class="replaceable"><code>vishnuConf</code></em></code></span></dt><dd><p>The path to the vishnu configuration file.</p></dd><dt><span class="term"><code class="option">-t <em class="replaceable"><code>sedType</code></em></code></span></dt><dd><p>The type of the vishnu sed.
The value must be an integer. Predefined values are: 0 (UNDEFINED), 1 (UMS), 2 (TMS), 3 (FMS), 4 (IMS).</p></dd></dl></div></div><div class="refsect1" title="ENVIRONMENT"><a id="environment"></a><h2>ENVIRONMENT</h2><div class="variablelist"><dl><dt><span class="term"><code class="envar">VISHNU_CONFIG_FILE</code></span></dt><dd><p>Contains the path to the local configuration file for VISHNU.</p></dd></dl></div></div><div class="refsect1" title="DIAGNOSTICS"><a id="diagnostics"></a><h2>DIAGNOSTICS</h2><p>The following diagnostics may be issued on stderr and the command will return the code provided within brackets: </p><div class="variablelist"><dl><dt><span class="term">"The database generated an error" [2]</span></dt><dd></dd><dt><span class="term">"If a parameter is invalid" [10]</span></dt><dd></dd><dt><span class="term">"There is no open session in this terminal" [13]</span></dt><dd></dd><dt><span class="term">"Missing parameters" [14]</span></dt><dd></dd><dt><span class="term">"Vishnu initialization failed" [15]</span></dt><dd></dd><dt><span class="term">"Undefined error" [16]</span></dt><dd></dd></dl></div></div><div class="refsect1" title="EXAMPLE"><a id="example"></a><h2>EXAMPLE</h2><p>To restart using the configuration file ums.cfg an UMS sed on machine_1:</p><p>vishnu_restart -v /tmp/ums.cfg -t 1 machine_1</p></div></div><div class="refentry" title="vishnu_define_work_identifier"><div class="refentry.separator"><hr /></div><a id="idp1205752"></a><div class="titlepage"></div><div class="refnamediv"><h2>Name</h2><p>vishnu_define_work_identifier — defines the shape of the identifiers automatically generated for the work</p></div><div class="refsynopsisdiv" title="Synopsis"><h2>Synopsis</h2><div class="cmdsynopsis"><p><code class="command">vishnu_define_work_identifier</code>  [<code class="option">-h</code>]  <em class="replaceable"><code>format</code></em> </p></div></div><div class="refsect1" title="DESCRIPTION"><a id="description"></a><h2>DESCRIPTION</h2><p>This function allows an administrator to define the format of the identifier that will be automatically generated for the work. Once the format is defined, each time a work is added, the format will be used to define its identifier.
The format can contain various variables, a variable is preceded by the '$' symbol. Moreover, the counter variable '$CPT' MUST be present in the format, otherwise it will be rejected.
The available variables are: 
$CPT: a counter
$DAY: The day the file transfer is done
$MONTH: The month the file transfer is done
$YEAR: The year the file transfer is done
$TYPE: The 'W' symb to remind it is a file transfer id
$NAME: The name of the work</p></div><div class="refsect1" title="OPTIONS"><a id="options"></a><h2>OPTIONS</h2><div class="variablelist"><dl><dt><span class="term"><code class="option">-h <em class="replaceable"><code>help</code></em></code></span></dt><dd><p>help about the command.</p></dd></dl></div></div><div class="refsect1" title="ENVIRONMENT"><a id="environment"></a><h2>ENVIRONMENT</h2><div class="variablelist"><dl><dt><span class="term"><code class="envar">VISHNU_CONFIG_FILE</code></span></dt><dd><p>Contains the path to the local configuration file for VISHNU.</p></dd></dl></div></div><div class="refsect1" title="DIAGNOSTICS"><a id="diagnostics"></a><h2>DIAGNOSTICS</h2><p>The following diagnostics may be issued on stderr and the command will return the code provided within brackets: </p><div class="variablelist"><dl><dt><span class="term">"The database generated an error" [2]</span></dt><dd></dd><dt><span class="term">"If a parameter is invalid" [10]</span></dt><dd></dd><dt><span class="term">"There is no open session in this terminal" [13]</span></dt><dd></dd><dt><span class="term">"Missing parameters" [14]</span></dt><dd></dd><dt><span class="term">"Vishnu initialization failed" [15]</span></dt><dd></dd><dt><span class="term">"Undefined error" [16]</span></dt><dd></dd></dl></div></div><div class="refsect1" title="EXAMPLE"><a id="example"></a><h2>EXAMPLE</h2><p>To define the format to W_$CPT:</p><p>vishnu_define_work_identifier W_\$CPT</p></div></div></div><div class="reference" title="IMS C++ API Reference"><div class="titlepage"><div><div><h1 class="title"><a id="idp1219440"></a>IMS C++ API Reference</h1></div></div><hr /></div><div class="toc"><p><b>Table of Contents</b></p><dl><dt><span class="refentrytitle"><a href="#idp1219792">getProcesses</a></span><span class="refpurpose"> — displays the list of the VISHNU processes running on machines</span></dt><dt><span class="refentrytitle"><a href="#idp1228872">setSystemInfo</a></span><span class="refpurpose"> — updates the system information of a machine</span></dt><dt><span class="refentrytitle"><a href="#idp1237344">setSystemThreshold</a></span><span class="refpurpose"> — sets a threshold on a machine of a system</span></dt><dt><span class="refentrytitle"><a href="#idp1246048">getSystemThreshold</a></span><span class="refpurpose"> — gets a system threshold on a machine</span></dt><dt><span class="refentrytitle"><a href="#idp1255728">defineUserIdentifier</a></span><span class="refpurpose"> — defines the shape of the identifiers automatically generated for the users</span></dt><dt><span class="refentrytitle"><a href="#idp1264592">defineMachineIdentifier</a></span><span class="refpurpose"> — defines the shape of the identifiers automatically generated for the machines</span></dt><dt><span class="refentrytitle"><a href="#idp1273504">defineJobIdentifier</a></span><span class="refpurpose"> — defines the shape of the identifiers automatically generated for the jobs</span></dt><dt><span class="refentrytitle"><a href="#idp1282288">defineTransferIdentifier</a></span><span class="refpurpose"> — defines the shape of the identifiers automatically generated for the file transfers</span></dt><dt><span class="refentrytitle"><a href="#idp1291128">defineAuthIdentifier</a></span><span class="refpurpose"> — defines the shape of the identifiers automatically generated for the authentication system</span></dt><dt><span class="refentrytitle"><a href="#idp1299984">loadShed</a></span><span class="refpurpose"> — sheds load on a machine</span></dt><dt><span class="refentrytitle"><a href="#idp1310568">setUpdateFrequency</a></span><span class="refpurpose"> — sets the update frequency of the IMS tables</span></dt><dt><span class="refentrytitle"><a href="#idp1318896">stop</a></span><span class="refpurpose"> — To stop (and do not try to relaunch) a SeD</span></dt><dt><span class="refentrytitle"><a href="#idp1327280">restart</a></span><span class="refpurpose"> — To restart a SeD or a MA</span></dt><dt><span class="refentrytitle"><a href="#idp1336776">defineWorkIdentifier</a></span><span class="refpurpose"> — defines the shape of the identifiers automatically generated for the work</span></dt></dl></div><div class="refentry" title="getProcesses"><a id="idp1219792"></a><div class="titlepage"></div><div class="refnamediv"><h2>Name</h2><p>getProcesses — displays the list of the VISHNU processes running on machines</p></div><div class="refsynopsisdiv" title="Synopsis"><h2>Synopsis</h2><div class="funcsynopsis"><table border="0" summary="Function synopsis" cellspacing="0" cellpadding="0" class="funcprototype-table"><tr><td><code class="funcdef">int <b class="fsfunc">vishnu::getProcesses</b>(</code></td><td><var class="pdparam">sessionKey</var>, </td><td> </td></tr><tr><td> </td><td><var class="pdparam">process</var>, </td><td> </td></tr><tr><td> </td><td><var class="pdparam">options = ProcessOp()</var><code>)</code>;</td><td> </td></tr></table><div class="paramdef-list"><code>const string&amp; <var class="pdparam">sessionKey</var></code>;<br /><code>ListProcesses&amp; <var class="pdparam">process</var></code>;<br /><code>const ProcessOp&amp; <var class="pdparam">options = ProcessOp()</var></code>;</div><div class="funcprototype-spacer"> </div></div></div><div class="refsect1" title="DESCRIPTION"><a id="description"></a><h2>DESCRIPTION</h2><p>This command with restricted access is used to get the list of VISHNU server processes that are running on the infrastructure or on a single machine. The results contain both the VISHNU identifier of the process and the DIET underlying middleware identifier. </p></div><div class="refsect1" title="ARGUMENTS"><a id="arguments"></a><h2>ARGUMENTS</h2><div class="variablelist"><dl><dt><span class="term"><span class="emphasis"><em>sessionKey</em></span></span></dt><dd><p>Input argument. The session key.</p></dd><dt><span class="term"><span class="emphasis"><em>process</em></span></span></dt><dd><p>Output argument. The list of the Vishnu processes on the machine.</p></dd><dt><span class="term"><span class="emphasis"><em>options</em></span></span></dt><dd><p>Input argument. The options to search for the processes.</p></dd></dl></div></div><div class="refsect1" title="EXCEPTIONS"><a id="exceptions"></a><h2>EXCEPTIONS</h2><p>The following exceptions may be thrown: </p><div class="variablelist"><dl><dt><span class="term">"If a parameter is invalid" [10]</span></dt><dd></dd></dl></div></div></div><div class="refentry" title="setSystemInfo"><div class="refentry.separator"><hr /></div><a id="idp1228872"></a><div class="titlepage"></div><div class="refnamediv"><h2>Name</h2><p>setSystemInfo — updates the system information of a machine</p></div><div class="refsynopsisdiv" title="Synopsis"><h2>Synopsis</h2><div class="funcsynopsis"><table border="0" summary="Function synopsis" cellspacing="0" cellpadding="0" class="funcprototype-table"><tr><td><code class="funcdef">int <b class="fsfunc">vishnu::setSystemInfo</b>(</code></td><td><var class="pdparam">sessionKey</var>, </td><td> </td></tr><tr><td> </td><td><var class="pdparam">systemInfo</var><code>)</code>;</td><td> </td></tr></table><div class="paramdef-list"><code>const string&amp; <var class="pdparam">sessionKey</var></code>;<br /><code>const SystemInfo&amp; <var class="pdparam">systemInfo</var></code>;</div><div class="funcprototype-spacer"> </div></div></div><div class="refsect1" title="DESCRIPTION"><a id="description"></a><h2>DESCRIPTION</h2><p>This command with restricted access is used to set system information on a machine in the VISHNU database. The machine must first be registered using the UMS "addMachine" call. Using the machine identifier, information such as the total memory and available diskspace on the machine can be added.</p></div><div class="refsect1" title="ARGUMENTS"><a id="arguments"></a><h2>ARGUMENTS</h2><div class="variablelist"><dl><dt><span class="term"><span class="emphasis"><em>sessionKey</em></span></span></dt><dd><p>Input argument. The session key.</p></dd><dt><span class="term"><span class="emphasis"><em>systemInfo</em></span></span></dt><dd><p>Input argument. Contains system information to store in Vishnu database.</p></dd></dl></div></div><div class="refsect1" title="EXCEPTIONS"><a id="exceptions"></a><h2>EXCEPTIONS</h2><p>The following exceptions may be thrown: </p><div class="variablelist"><dl><dt><span class="term">"The database generated an error" [2]</span></dt><dd></dd><dt><span class="term">"If a parameter is invalid" [10]</span></dt><dd></dd></dl></div></div></div><div class="refentry" title="setSystemThreshold"><div class="refentry.separator"><hr /></div><a id="idp1237344"></a><div class="titlepage"></div><div class="refnamediv"><h2>Name</h2><p>setSystemThreshold — sets a threshold on a machine of a system</p></div><div class="refsynopsisdiv" title="Synopsis"><h2>Synopsis</h2><div class="funcsynopsis"><table border="0" summary="Function synopsis" cellspacing="0" cellpadding="0" class="funcprototype-table"><tr><td><code class="funcdef">int <b class="fsfunc">vishnu::setSystemThreshold</b>(</code></td><td><var class="pdparam">sessionKey</var>, </td><td> </td></tr><tr><td> </td><td><var class="pdparam">threshold</var><code>)</code>;</td><td> </td></tr></table><div class="paramdef-list"><code>const string&amp; <var class="pdparam">sessionKey</var></code>;<br /><code>const Threshold&amp; <var class="pdparam">threshold</var></code>;</div><div class="funcprototype-spacer"> </div></div></div><div class="refsect1" title="DESCRIPTION"><a id="description"></a><h2>DESCRIPTION</h2><p>This function allows an administrator to set a threshold. Each time an IMS server records the state of a machine, it checks the values defined, if a threshold is reached (over a use of the cpu or under the free memory or diskspace available), the administrator responsible for the threshold will receive an mail. These threshold will help the administrator to be aware of critical situations on a machine. Warning, a mail is sent for each time the threshold is reached, if a value swings around a threshold, the administrator may receive lots of emails depending on the update frequency.</p></div><div class="refsect1" title="ARGUMENTS"><a id="arguments"></a><h2>ARGUMENTS</h2><div class="variablelist"><dl><dt><span class="term"><span class="emphasis"><em>sessionKey</em></span></span></dt><dd><p>Input argument. The session key.</p></dd><dt><span class="term"><span class="emphasis"><em>threshold</em></span></span></dt><dd><p>Input argument. The threshold to set.</p></dd></dl></div></div><div class="refsect1" title="EXCEPTIONS"><a id="exceptions"></a><h2>EXCEPTIONS</h2><p>The following exceptions may be thrown: </p><div class="variablelist"><dl><dt><span class="term">"The database generated an error" [2]</span></dt><dd></dd><dt><span class="term">"If a parameter is invalid" [10]</span></dt><dd></dd></dl></div></div></div><div class="refentry" title="getSystemThreshold"><div class="refentry.separator"><hr /></div><a id="idp1246048"></a><div class="titlepage"></div><div class="refnamediv"><h2>Name</h2><p>getSystemThreshold — gets a system threshold on a machine</p></div><div class="refsynopsisdiv" title="Synopsis"><h2>Synopsis</h2><div class="funcsynopsis"><table border="0" summary="Function synopsis" cellspacing="0" cellpadding="0" class="funcprototype-table"><tr><td><code class="funcdef">int <b class="fsfunc">vishnu::getSystemThreshold</b>(</code></td><td><var class="pdparam">sessionKey</var>, </td><td> </td></tr><tr><td> </td><td><var class="pdparam">value</var>, </td><td> </td></tr><tr><td> </td><td><var class="pdparam">options</var><code>)</code>;</td><td> </td></tr></table><div class="paramdef-list"><code>const string&amp; <var class="pdparam">sessionKey</var></code>;<br /><code>ListThreshold&amp; <var class="pdparam">value</var></code>;<br /><code>const ThresholdOp&amp; <var class="pdparam">options</var></code>;</div><div class="funcprototype-spacer"> </div></div></div><div class="refsect1" title="DESCRIPTION"><a id="description"></a><h2>DESCRIPTION</h2><p>This function allows an administrator to get the thresholds that may be defined on a machine. This may be used to check the parameters defined to monitor the machine.
Each time a threshold is reached, a mail is sent. So checking the values of the threshold is important for the administrator to make sure they will not get tons of emails.</p></div><div class="refsect1" title="ARGUMENTS"><a id="arguments"></a><h2>ARGUMENTS</h2><div class="variablelist"><dl><dt><span class="term"><span class="emphasis"><em>sessionKey</em></span></span></dt><dd><p>Input argument. The session key.</p></dd><dt><span class="term"><span class="emphasis"><em>value</em></span></span></dt><dd><p>Output argument. The thresholds value.</p></dd><dt><span class="term"><span class="emphasis"><em>options</em></span></span></dt><dd><p>Input argument. The options for the threshold.</p></dd></dl></div></div><div class="refsect1" title="EXCEPTIONS"><a id="exceptions"></a><h2>EXCEPTIONS</h2><p>The following exceptions may be thrown: </p><div class="variablelist"><dl><dt><span class="term">"The database generated an error" [2]</span></dt><dd></dd><dt><span class="term">"If a parameter is invalid" [10]</span></dt><dd></dd></dl></div></div></div><div class="refentry" title="defineUserIdentifier"><div class="refentry.separator"><hr /></div><a id="idp1255728"></a><div class="titlepage"></div><div class="refnamediv"><h2>Name</h2><p>defineUserIdentifier — defines the shape of the identifiers automatically generated for the users</p></div><div class="refsynopsisdiv" title="Synopsis"><h2>Synopsis</h2><div class="funcsynopsis"><table border="0" summary="Function synopsis" cellspacing="0" cellpadding="0" class="funcprototype-table"><tr><td><code class="funcdef">int <b class="fsfunc">vishnu::defineUserIdentifier</b>(</code></td><td><var class="pdparam">sessionKey</var>, </td><td> </td></tr><tr><td> </td><td><var class="pdparam">format</var><code>)</code>;</td><td> </td></tr></table><div class="paramdef-list"><code>const string&amp; <var class="pdparam">sessionKey</var></code>;<br /><code>const string&amp; <var class="pdparam">format</var></code>;</div><div class="funcprototype-spacer"> </div></div></div><div class="refsect1" title="DESCRIPTION"><a id="description"></a><h2>DESCRIPTION</h2><p>This function allows an administrator to define the format of the identifier that will be automatically generated for the users. Once the format is defined, each time a user is added, the format will be used to define its identifier.
The format can contain various variables, a variable is preceded by the '$' symbol. Moreover, the counter variable '$CPT' MUST be present in the format, otherwise it will be rejected.
The available variables are: 
$CPT: a counter
$NAME: The name of the user
$UNAME: The name of the user
$DAY: The day the user is added
$MONTH: The month the user is added
$YEAR: The year the user is added
$SITE: The site the user is
$TYPE: The 'U' symb to remind it is a user id</p></div><div class="refsect1" title="ARGUMENTS"><a id="arguments"></a><h2>ARGUMENTS</h2><div class="variablelist"><dl><dt><span class="term"><span class="emphasis"><em>sessionKey</em></span></span></dt><dd><p>Input argument. The session key.</p></dd><dt><span class="term"><span class="emphasis"><em>format</em></span></span></dt><dd><p>Input argument. The new format to use.</p></dd></dl></div></div><div class="refsect1" title="EXCEPTIONS"><a id="exceptions"></a><h2>EXCEPTIONS</h2><p>The following exceptions may be thrown: </p><div class="variablelist"><dl><dt><span class="term">"The database generated an error" [2]</span></dt><dd></dd><dt><span class="term">"If a parameter is invalid" [10]</span></dt><dd></dd></dl></div></div></div><div class="refentry" title="defineMachineIdentifier"><div class="refentry.separator"><hr /></div><a id="idp1264592"></a><div class="titlepage"></div><div class="refnamediv"><h2>Name</h2><p>defineMachineIdentifier — defines the shape of the identifiers automatically generated for the machines</p></div><div class="refsynopsisdiv" title="Synopsis"><h2>Synopsis</h2><div class="funcsynopsis"><table border="0" summary="Function synopsis" cellspacing="0" cellpadding="0" class="funcprototype-table"><tr><td><code class="funcdef">int <b class="fsfunc">vishnu::defineMachineIdentifier</b>(</code></td><td><var class="pdparam">sessionKey</var>, </td><td> </td></tr><tr><td> </td><td><var class="pdparam">format</var><code>)</code>;</td><td> </td></tr></table><div class="paramdef-list"><code>const string&amp; <var class="pdparam">sessionKey</var></code>;<br /><code>const string&amp; <var class="pdparam">format</var></code>;</div><div class="funcprototype-spacer"> </div></div></div><div class="refsect1" title="DESCRIPTION"><a id="description"></a><h2>DESCRIPTION</h2><p>This function allows an administrator to define the format of the identifier that will be automatically generated for the machines. Once the format is defined, each time a machine is added, the format will be used to define its identifier.
The format can contain various variables, a variable is preceded by the '$' symbol. Moreover, the counter variable '$CPT' MUST be present in the format, otherwise it will be rejected.
The available variables are: 
$CPT: a counter
$MANAME: The hostname of the machine
$NAME: The hostname of the machine
$DAY: The day the machine is added
$MONTH: The month the machine is added
$YEAR: The year the machine is added
$SITE: The site the machine is
$TYPE: The 'M' symb to remind it is a machine id</p></div><div class="refsect1" title="ARGUMENTS"><a id="arguments"></a><h2>ARGUMENTS</h2><div class="variablelist"><dl><dt><span class="term"><span class="emphasis"><em>sessionKey</em></span></span></dt><dd><p>Input argument. The session key.</p></dd><dt><span class="term"><span class="emphasis"><em>format</em></span></span></dt><dd><p>Input argument. The new format to use.</p></dd></dl></div></div><div class="refsect1" title="EXCEPTIONS"><a id="exceptions"></a><h2>EXCEPTIONS</h2><p>The following exceptions may be thrown: </p><div class="variablelist"><dl><dt><span class="term">"The database generated an error" [2]</span></dt><dd></dd><dt><span class="term">"If a parameter is invalid" [10]</span></dt><dd></dd></dl></div></div></div><div class="refentry" title="defineJobIdentifier"><div class="refentry.separator"><hr /></div><a id="idp1273504"></a><div class="titlepage"></div><div class="refnamediv"><h2>Name</h2><p>defineJobIdentifier — defines the shape of the identifiers automatically generated for the jobs</p></div><div class="refsynopsisdiv" title="Synopsis"><h2>Synopsis</h2><div class="funcsynopsis"><table border="0" summary="Function synopsis" cellspacing="0" cellpadding="0" class="funcprototype-table"><tr><td><code class="funcdef">int <b class="fsfunc">vishnu::defineJobIdentifier</b>(</code></td><td><var class="pdparam">sessionKey</var>, </td><td> </td></tr><tr><td> </td><td><var class="pdparam">format</var><code>)</code>;</td><td> </td></tr></table><div class="paramdef-list"><code>const string&amp; <var class="pdparam">sessionKey</var></code>;<br /><code>const string&amp; <var class="pdparam">format</var></code>;</div><div class="funcprototype-spacer"> </div></div></div><div class="refsect1" title="DESCRIPTION"><a id="description"></a><h2>DESCRIPTION</h2><p>This function allows an administrator to define the format of the identifier that will be automatically generated for the jobs submited through TMS. Once the format is defined, each time a job is submitted, the format will be used to define its identifier.
The format can contain various variables, a variable is preceded by the '$' symbol. Moreover, the counter variable '$CPT' MUST be present in the format, otherwise it will be rejected.
The available variables are: 
$CPT: a counter
$DAY: The day the job is submitted
$MONTH: The month the job is submitted
$YEAR: The year the job is submitted
$TYPE: The 'J' symb to remind it is a job id</p></div><div class="refsect1" title="ARGUMENTS"><a id="arguments"></a><h2>ARGUMENTS</h2><div class="variablelist"><dl><dt><span class="term"><span class="emphasis"><em>sessionKey</em></span></span></dt><dd><p>Input argument. The session key.</p></dd><dt><span class="term"><span class="emphasis"><em>format</em></span></span></dt><dd><p>Input argument. The new format to use.</p></dd></dl></div></div><div class="refsect1" title="EXCEPTIONS"><a id="exceptions"></a><h2>EXCEPTIONS</h2><p>The following exceptions may be thrown: </p><div class="variablelist"><dl><dt><span class="term">"The database generated an error" [2]</span></dt><dd></dd><dt><span class="term">"If a parameter is invalid" [10]</span></dt><dd></dd></dl></div></div></div><div class="refentry" title="defineTransferIdentifier"><div class="refentry.separator"><hr /></div><a id="idp1282288"></a><div class="titlepage"></div><div class="refnamediv"><h2>Name</h2><p>defineTransferIdentifier — defines the shape of the identifiers automatically generated for the file transfers</p></div><div class="refsynopsisdiv" title="Synopsis"><h2>Synopsis</h2><div class="funcsynopsis"><table border="0" summary="Function synopsis" cellspacing="0" cellpadding="0" class="funcprototype-table"><tr><td><code class="funcdef">int <b class="fsfunc">vishnu::defineTransferIdentifier</b>(</code></td><td><var class="pdparam">sessionKey</var>, </td><td> </td></tr><tr><td> </td><td><var class="pdparam">format</var><code>)</code>;</td><td> </td></tr></table><div class="paramdef-list"><code>const string&amp; <var class="pdparam">sessionKey</var></code>;<br /><code>const string&amp; <var class="pdparam">format</var></code>;</div><div class="funcprototype-spacer"> </div></div></div><div class="refsect1" title="DESCRIPTION"><a id="description"></a><h2>DESCRIPTION</h2><p>This function allows an administrator to define the format of the identifier that will be automatically generated for the file transfers. Once the format is defined, each time a file transfer is done, the format will be used to define its identifier.
The format can contain various variables, a variable is preceded by the '$' symbol. Moreover, the counter variable '$CPT' MUST be present in the format, otherwise it will be rejected.
The available variables are: 
$CPT: a counter
$DAY: The day the file transfer is done
$MONTH: The month the file transfer is done
$YEAR: The year the file transfer is done
$TYPE: The 'F' symb to remind it is a file transfer id</p></div><div class="refsect1" title="ARGUMENTS"><a id="arguments"></a><h2>ARGUMENTS</h2><div class="variablelist"><dl><dt><span class="term"><span class="emphasis"><em>sessionKey</em></span></span></dt><dd><p>Input argument. The session key.</p></dd><dt><span class="term"><span class="emphasis"><em>format</em></span></span></dt><dd><p>Input argument. The new format to use.</p></dd></dl></div></div><div class="refsect1" title="EXCEPTIONS"><a id="exceptions"></a><h2>EXCEPTIONS</h2><p>The following exceptions may be thrown: </p><div class="variablelist"><dl><dt><span class="term">"The database generated an error" [2]</span></dt><dd></dd><dt><span class="term">"If a parameter is invalid" [10]</span></dt><dd></dd></dl></div></div></div><div class="refentry" title="defineAuthIdentifier"><div class="refentry.separator"><hr /></div><a id="idp1291128"></a><div class="titlepage"></div><div class="refnamediv"><h2>Name</h2><p>defineAuthIdentifier — defines the shape of the identifiers automatically generated for the authentication system</p></div><div class="refsynopsisdiv" title="Synopsis"><h2>Synopsis</h2><div class="funcsynopsis"><table border="0" summary="Function synopsis" cellspacing="0" cellpadding="0" class="funcprototype-table"><tr><td><code class="funcdef">int <b class="fsfunc">vishnu::defineAuthIdentifier</b>(</code></td><td><var class="pdparam">sessionKey</var>, </td><td> </td></tr><tr><td> </td><td><var class="pdparam">format</var><code>)</code>;</td><td> </td></tr></table><div class="paramdef-list"><code>const string&amp; <var class="pdparam">sessionKey</var></code>;<br /><code>const string&amp; <var class="pdparam">format</var></code>;</div><div class="funcprototype-spacer"> </div></div></div><div class="refsect1" title="DESCRIPTION"><a id="description"></a><h2>DESCRIPTION</h2><p>This function allows an administrator to define the format of the identifier that will be automatically generated for the authentication. Once the format is defined, each time an authentication system is added, the format will be used to define its identifier.
The format can contain various variables, a variable is preceded by the '$' symbol. Moreover, the counter variable '$CPT' MUST be present in the format, otherwise it will be rejected.
The available variables are: 
$CPT: a counter
$DAY: The day the file transfer is done
$MONTH: The month the file transfer is done
$YEAR: The year the file transfer is done
$TYPE: The 'F' symb to remind it is a file transfer id</p></div><div class="refsect1" title="ARGUMENTS"><a id="arguments"></a><h2>ARGUMENTS</h2><div class="variablelist"><dl><dt><span class="term"><span class="emphasis"><em>sessionKey</em></span></span></dt><dd><p>Input argument. The session key.</p></dd><dt><span class="term"><span class="emphasis"><em>format</em></span></span></dt><dd><p>Input argument. The new format to use.</p></dd></dl></div></div><div class="refsect1" title="EXCEPTIONS"><a id="exceptions"></a><h2>EXCEPTIONS</h2><p>The following exceptions may be thrown: </p><div class="variablelist"><dl><dt><span class="term">"The database generated an error" [2]</span></dt><dd></dd><dt><span class="term">"If a parameter is invalid" [10]</span></dt><dd></dd></dl></div></div></div><div class="refentry" title="loadShed"><div class="refentry.separator"><hr /></div><a id="idp1299984"></a><div class="titlepage"></div><div class="refnamediv"><h2>Name</h2><p>loadShed — sheds load on a machine</p></div><div class="refsynopsisdiv" title="Synopsis"><h2>Synopsis</h2><div class="funcsynopsis"><table border="0" summary="Function synopsis" cellspacing="0" cellpadding="0" class="funcprototype-table"><tr><td><code class="funcdef">int <b class="fsfunc">vishnu::loadShed</b>(</code></td><td><var class="pdparam">sessionKey</var>, </td><td> </td></tr><tr><td> </td><td><var class="pdparam">machineId</var>, </td><td> </td></tr><tr><td> </td><td><var class="pdparam">loadShedType</var><code>)</code>;</td><td> </td></tr></table><div class="paramdef-list"><code>const string&amp; <var class="pdparam">sessionKey</var></code>;<br /><code>const string&amp; <var class="pdparam">machineId</var></code>;<br /><code>const LoadShedType&amp; <var class="pdparam">loadShedType</var></code>;</div><div class="funcprototype-spacer"> </div></div></div><div class="refsect1" title="DESCRIPTION"><a id="description"></a><h2>DESCRIPTION</h2><p>This function allows an administrator to shed load on a machine. Two modes are available: SOFT mode will cancel all the submitted jobs and file transfers for all VISHNU users (Note that jobs and file transfers not initiated through VISHNU will not be impacted). HARD mode will additionally stop all the VISHNU processes on the machine. If a user without administrator rights uses this function, all the user's jobs and file transfers will be cancelled on the machine. In the HARD mode, the stopped processes will not be automatically restarted.
Type values:
HARD = 1
SOFT   = 2</p></div><div class="refsect1" title="ARGUMENTS"><a id="arguments"></a><h2>ARGUMENTS</h2><div class="variablelist"><dl><dt><span class="term"><span class="emphasis"><em>sessionKey</em></span></span></dt><dd><p>Input argument. The session key.</p></dd><dt><span class="term"><span class="emphasis"><em>machineId</em></span></span></dt><dd><p>Input argument. The id of the machine to stop.</p></dd><dt><span class="term"><span class="emphasis"><em>loadShedType</em></span></span></dt><dd><p>Input argument. Selects a load shedding mode (SOFT: stops all services and they can be restarted, HARD: stops all services, they cannot be restarted).</p></dd></dl></div></div><div class="refsect1" title="EXCEPTIONS"><a id="exceptions"></a><h2>EXCEPTIONS</h2><p>The following exceptions may be thrown: </p><div class="variablelist"><dl><dt><span class="term">"The database generated an error" [2]</span></dt><dd></dd><dt><span class="term">"If a parameter is invalid" [10]</span></dt><dd></dd><dt><span class="term">"If a component is unavailable" [301]</span></dt><dd></dd></dl></div></div></div><div class="refentry" title="setUpdateFrequency"><div class="refentry.separator"><hr /></div><a id="idp1310568"></a><div class="titlepage"></div><div class="refnamediv"><h2>Name</h2><p>setUpdateFrequency — sets the update frequency of the IMS tables</p></div><div class="refsynopsisdiv" title="Synopsis"><h2>Synopsis</h2><div class="funcsynopsis"><table border="0" summary="Function synopsis" cellspacing="0" cellpadding="0" class="funcprototype-table"><tr><td><code class="funcdef">int <b class="fsfunc">vishnu::setUpdateFrequency</b>(</code></td><td><var class="pdparam">sessionKey</var>, </td><td> </td></tr><tr><td> </td><td><var class="pdparam">freq</var><code>)</code>;</td><td> </td></tr></table><div class="paramdef-list"><code>const string&amp; <var class="pdparam">sessionKey</var></code>;<br /><code>const int&amp; <var class="pdparam">freq</var></code>;</div><div class="funcprototype-spacer"> </div></div></div><div class="refsect1" title="DESCRIPTION"><a id="description"></a><h2>DESCRIPTION</h2><p>This function allows an admin to set the update frequency. This frequency corresponds to how often the state of the machines is automatically polled by the IMS server. The value must be in seconds.</p></div><div class="refsect1" title="ARGUMENTS"><a id="arguments"></a><h2>ARGUMENTS</h2><div class="variablelist"><dl><dt><span class="term"><span class="emphasis"><em>sessionKey</em></span></span></dt><dd><p>Input argument. The session key.</p></dd><dt><span class="term"><span class="emphasis"><em>freq</em></span></span></dt><dd><p>Input argument. Frequency the data are updated, in second.</p></dd></dl></div></div><div class="refsect1" title="EXCEPTIONS"><a id="exceptions"></a><h2>EXCEPTIONS</h2><p>The following exceptions may be thrown: </p><div class="variablelist"><dl><dt><span class="term">"The database generated an error" [2]</span></dt><dd></dd><dt><span class="term">"If a parameter is invalid" [10]</span></dt><dd></dd></dl></div></div></div><div class="refentry" title="stop"><div class="refentry.separator"><hr /></div><a id="idp1318896"></a><div class="titlepage"></div><div class="refnamediv"><h2>Name</h2><p>stop — To stop (and do not try to relaunch) a SeD</p></div><div class="refsynopsisdiv" title="Synopsis"><h2>Synopsis</h2><div class="funcsynopsis"><table border="0" summary="Function synopsis" cellspacing="0" cellpadding="0" class="funcprototype-table"><tr><td><code class="funcdef">int <b class="fsfunc">vishnu::stop</b>(</code></td><td><var class="pdparam">sessionKey</var>, </td><td> </td></tr><tr><td> </td><td><var class="pdparam">process</var><code>)</code>;</td><td> </td></tr></table><div class="paramdef-list"><code>const string&amp; <var class="pdparam">sessionKey</var></code>;<br /><code>const Process&amp; <var class="pdparam">process</var></code>;</div><div class="funcprototype-spacer"> </div></div></div><div class="refsect1" title="DESCRIPTION"><a id="description"></a><h2>DESCRIPTION</h2><p>This function allows an admin to stop a VISHNU server on a machine. The stopped process will not be restarted automatically.
The important parameters in the process are the names and the machine.
The processName must be UMS, TMS, IMS or FMS , in upper case.
</p></div><div class="refsect1" title="ARGUMENTS"><a id="arguments"></a><h2>ARGUMENTS</h2><div class="variablelist"><dl><dt><span class="term"><span class="emphasis"><em>sessionKey</em></span></span></dt><dd><p>Input argument. The session key.</p></dd><dt><span class="term"><span class="emphasis"><em>process</em></span></span></dt><dd><p>Input argument. The process to stop and do not try to restart anymore.</p></dd></dl></div></div><div class="refsect1" title="EXCEPTIONS"><a id="exceptions"></a><h2>EXCEPTIONS</h2><p>The following exceptions may be thrown: </p><div class="variablelist"><dl><dt><span class="term">"The database generated an error" [2]</span></dt><dd></dd><dt><span class="term">"If a parameter is invalid" [10]</span></dt><dd></dd></dl></div></div></div><div class="refentry" title="restart"><div class="refentry.separator"><hr /></div><a id="idp1327280"></a><div class="titlepage"></div><div class="refnamediv"><h2>Name</h2><p>restart — To restart a SeD or a MA</p></div><div class="refsynopsisdiv" title="Synopsis"><h2>Synopsis</h2><div class="funcsynopsis"><table border="0" summary="Function synopsis" cellspacing="0" cellpadding="0" class="funcprototype-table"><tr><td><code class="funcdef">int <b class="fsfunc">vishnu::restart</b>(</code></td><td><var class="pdparam">sessionKey</var>, </td><td> </td></tr><tr><td> </td><td><var class="pdparam">machineId</var>, </td><td> </td></tr><tr><td> </td><td><var class="pdparam">options</var><code>)</code>;</td><td> </td></tr></table><div class="paramdef-list"><code>const string&amp; <var class="pdparam">sessionKey</var></code>;<br /><code>const string&amp; <var class="pdparam">machineId</var></code>;<br /><code>const RestartOp&amp; <var class="pdparam">options</var></code>;</div><div class="funcprototype-spacer"> </div></div></div><div class="refsect1" title="DESCRIPTION"><a id="description"></a><h2>DESCRIPTION</h2><p>This function allows an admin to restart a VISHNU server on a machine. Warning when restarting a server, first it is tried to stop it, so if one is running it is stopped and then another is restarted.</p></div><div class="refsect1" title="ARGUMENTS"><a id="arguments"></a><h2>ARGUMENTS</h2><div class="variablelist"><dl><dt><span class="term"><span class="emphasis"><em>sessionKey</em></span></span></dt><dd><p>Input argument. The session key.</p></dd><dt><span class="term"><span class="emphasis"><em>machineId</em></span></span></dt><dd><p>Input argument. The id of the machine where to restart.</p></dd><dt><span class="term"><span class="emphasis"><em>options</em></span></span></dt><dd><p>Input argument. The option for the restart.</p></dd></dl></div></div><div class="refsect1" title="EXCEPTIONS"><a id="exceptions"></a><h2>EXCEPTIONS</h2><p>The following exceptions may be thrown: </p><div class="variablelist"><dl><dt><span class="term">"The database generated an error" [2]</span></dt><dd></dd><dt><span class="term">"If a parameter is invalid" [10]</span></dt><dd></dd></dl></div></div></div><div class="refentry" title="defineWorkIdentifier"><div class="refentry.separator"><hr /></div><a id="idp1336776"></a><div class="titlepage"></div><div class="refnamediv"><h2>Name</h2><p>defineWorkIdentifier — defines the shape of the identifiers automatically generated for the work</p></div><div class="refsynopsisdiv" title="Synopsis"><h2>Synopsis</h2><div class="funcsynopsis"><table border="0" summary="Function synopsis" cellspacing="0" cellpadding="0" class="funcprototype-table"><tr><td><code class="funcdef">int <b class="fsfunc">vishnu::defineWorkIdentifier</b>(</code></td><td><var class="pdparam">sessionKey</var>, </td><td> </td></tr><tr><td> </td><td><var class="pdparam">format</var><code>)</code>;</td><td> </td></tr></table><div class="paramdef-list"><code>const string&amp; <var class="pdparam">sessionKey</var></code>;<br /><code>const string&amp; <var class="pdparam">format</var></code>;</div><div class="funcprototype-spacer"> </div></div></div><div class="refsect1" title="DESCRIPTION"><a id="description"></a><h2>DESCRIPTION</h2><p>This function allows an administrator to define the format of the identifier that will be automatically generated for the work. Once the format is defined, each time a work is added, the format will be used to define its identifier.
The format can contain various variables, a variable is preceded by the '$' symbol. Moreover, the counter variable '$CPT' MUST be present in the format, otherwise it will be rejected.
The available variables are: 
$CPT: a counter
$DAY: The day the file transfer is done
$MONTH: The month the file transfer is done
$YEAR: The year the file transfer is done
$TYPE: The 'W' symb to remind it is a file transfer id
$NAME: The name of the work</p></div><div class="refsect1" title="ARGUMENTS"><a id="arguments"></a><h2>ARGUMENTS</h2><div class="variablelist"><dl><dt><span class="term"><span class="emphasis"><em>sessionKey</em></span></span></dt><dd><p>Input argument. The session key.</p></dd><dt><span class="term"><span class="emphasis"><em>format</em></span></span></dt><dd><p>Input argument. The new format to use.</p></dd></dl></div></div><div class="refsect1" title="EXCEPTIONS"><a id="exceptions"></a><h2>EXCEPTIONS</h2><p>The following exceptions may be thrown: </p><div class="variablelist"><dl><dt><span class="term">"The database generated an error" [2]</span></dt><dd></dd><dt><span class="term">"If a parameter is invalid" [10]</span></dt><dd></dd></dl></div></div></div></div><div class="reference" title="IMS Python API Reference"><div class="titlepage"><div><div><h1 class="title"><a id="idp1345680"></a>IMS Python API Reference</h1></div></div><hr /></div><div class="toc"><p><b>Table of Contents</b></p><dl><dt><span class="refentrytitle"><a href="#idp1346032">VISHNU.getProcesses</a></span><span class="refpurpose"> — displays the list of the VISHNU processes running on machines</span></dt><dt><span class="refentrytitle"><a href="#idp1356552">VISHNU.setSystemInfo</a></span><span class="refpurpose"> — updates the system information of a machine</span></dt><dt><span class="refentrytitle"><a href="#idp1366856">VISHNU.setSystemThreshold</a></span><span class="refpurpose"> — sets a threshold on a machine of a system</span></dt><dt><span class="refentrytitle"><a href="#idp1377400">VISHNU.getSystemThreshold</a></span><span class="refpurpose"> — gets a system threshold on a machine</span></dt><dt><span class="refentrytitle"><a href="#idp1388616">VISHNU.defineUserIdentifier</a></span><span class="refpurpose"> — defines the shape of the identifiers automatically generated for the users</span></dt><dt><span class="refentrytitle"><a href="#idp1400000">VISHNU.defineMachineIdentifier</a></span><span class="refpurpose"> — defines the shape of the identifiers automatically generated for the machines</span></dt><dt><span class="refentrytitle"><a href="#idp1410752">VISHNU.defineJobIdentifier</a></span><span class="refpurpose"> — defines the shape of the identifiers automatically generated for the jobs</span></dt><dt><span class="refentrytitle"><a href="#idp1421384">VISHNU.defineTransferIdentifier</a></span><span class="refpurpose"> — defines the shape of the identifiers automatically generated for the file transfers</span></dt><dt><span class="refentrytitle"><a href="#idp1432064">VISHNU.defineAuthIdentifier</a></span><span class="refpurpose"> — defines the shape of the identifiers automatically generated for the authentication system</span></dt><dt><span class="refentrytitle"><a href="#idp1443416">VISHNU.loadShed</a></span><span class="refpurpose"> — sheds load on a machine</span></dt><dt><span class="refentrytitle"><a href="#idp1455896">VISHNU.setUpdateFrequency</a></span><span class="refpurpose"> — sets the update frequency of the IMS tables</span></dt><dt><span class="refentrytitle"><a href="#idp1466072">VISHNU.stop</a></span><span class="refpurpose"> — To stop (and do not try to relaunch) a SeD</span></dt><dt><span class="refentrytitle"><a href="#idp1476272">VISHNU.restart</a></span><span class="refpurpose"> — To restart a SeD or a MA</span></dt><dt><span class="refentrytitle"><a href="#idp1487584">VISHNU.defineWorkIdentifier</a></span><span class="refpurpose"> — defines the shape of the identifiers automatically generated for the work</span></dt></dl></div><div class="refentry" title="VISHNU.getProcesses"><a id="idp1346032"></a><div class="titlepage"></div><div class="refnamediv"><h2>Name</h2><p>VISHNU.getProcesses — displays the list of the VISHNU processes running on machines</p></div><div class="refsynopsisdiv" title="Synopsis"><h2>Synopsis</h2><div class="funcsynopsis"><table border="0" summary="Function synopsis" cellspacing="0" cellpadding="0" class="funcprototype-table"><tr><td><code class="funcdef"><b class="fsfunc">ret, process=VISHNU.getProcesses</b>(</code></td><td><var class="pdparam">sessionKey</var>, </td><td> </td></tr><tr><td> </td><td><var class="pdparam">options = ProcessOp()</var><code>)</code>;</td><td> </td></tr></table><div class="paramdef-list"><code>string <var class="pdparam">sessionKey</var></code>;<br /><code>ProcessOp <var class="pdparam">options = ProcessOp()</var></code>;</div><div class="funcprototype-spacer"> </div></div></div><div class="refsect1" title="DESCRIPTION"><a id="description"></a><h2>DESCRIPTION</h2><p>This command with restricted access is used to get the list of VISHNU server processes that are running on the infrastructure or on a single machine. The results contain both the VISHNU identifier of the process and the DIET underlying middleware identifier. </p></div><div class="refsect1" title="ARGUMENTS"><a id="arguments"></a><h2>ARGUMENTS</h2><div class="variablelist"><dl><dt><span class="term"><span class="emphasis"><em>sessionKey</em></span></span></dt><dd><p>Input argument. The session key.</p></dd><dt><span class="term"><span class="emphasis"><em>process</em></span></span></dt><dd><p>Output argument. The list of the Vishnu processes on the machine.</p></dd><dt><span class="term"><span class="emphasis"><em>options</em></span></span></dt><dd><p>Input argument. The options to search for the processes.</p></dd></dl></div></div><div class="refsect1" title="RETURNED OBJECTS"><a id="returned objects"></a><h2>RETURNED OBJECTS</h2><div class="variablelist"><dl><dt><span class="term"><span class="emphasis"><em>errorCode (integer)</em></span></span></dt><dd><p>Output parameter. Contains 0 on success and the error code on failure.</p></dd><dt></dt><dd></dd></dl></div></div><div class="refsect1" title="EXCEPTIONS"><a id="exceptions"></a><h2>EXCEPTIONS</h2><p>The following exceptions may be thrown: </p><div class="variablelist"><dl><dt><span class="term">UserException("If a parameter is invalid" [10])</span></dt><dd></dd></dl></div></div></div><div class="refentry" title="VISHNU.setSystemInfo"><div class="refentry.separator"><hr /></div><a id="idp1356552"></a><div class="titlepage"></div><div class="refnamediv"><h2>Name</h2><p>VISHNU.setSystemInfo — updates the system information of a machine</p></div><div class="refsynopsisdiv" title="Synopsis"><h2>Synopsis</h2><div class="funcsynopsis"><table border="0" summary="Function synopsis" cellspacing="0" cellpadding="0" class="funcprototype-table"><tr><td><code class="funcdef"><b class="fsfunc">ret=VISHNU.setSystemInfo</b>(</code></td><td><var class="pdparam">sessionKey</var>, </td><td> </td></tr><tr><td> </td><td><var class="pdparam">systemInfo</var><code>)</code>;</td><td> </td></tr></table><div class="paramdef-list"><code>string <var class="pdparam">sessionKey</var></code>;<br /><code>SystemInfo <var class="pdparam">systemInfo</var></code>;</div><div class="funcprototype-spacer"> </div></div></div><div class="refsect1" title="DESCRIPTION"><a id="description"></a><h2>DESCRIPTION</h2><p>This command with restricted access is used to set system information on a machine in the VISHNU database. The machine must first be registered using the UMS "addMachine" call. Using the machine identifier, information such as the total memory and available diskspace on the machine can be added.</p></div><div class="refsect1" title="ARGUMENTS"><a id="arguments"></a><h2>ARGUMENTS</h2><div class="variablelist"><dl><dt><span class="term"><span class="emphasis"><em>sessionKey</em></span></span></dt><dd><p>Input argument. The session key.</p></dd><dt><span class="term"><span class="emphasis"><em>systemInfo</em></span></span></dt><dd><p>Input argument. Contains system information to store in Vishnu database.</p></dd></dl></div></div><div class="refsect1" title="RETURNED OBJECTS"><a id="returned objects"></a><h2>RETURNED OBJECTS</h2><div class="variablelist"><dl><dt><span class="term"><span class="emphasis"><em>errorCode (integer)</em></span></span></dt><dd><p>Output parameter. Contains 0 on success and the error code on failure.</p></dd><dt></dt><dd></dd></dl></div></div><div class="refsect1" title="EXCEPTIONS"><a id="exceptions"></a><h2>EXCEPTIONS</h2><p>The following exceptions may be thrown: </p><div class="variablelist"><dl><dt><span class="term">SystemException("The database generated an error" [2])</span></dt><dd></dd><dt><span class="term">UserException("If a parameter is invalid" [10])</span></dt><dd></dd></dl></div></div></div><div class="refentry" title="VISHNU.setSystemThreshold"><div class="refentry.separator"><hr /></div><a id="idp1366856"></a><div class="titlepage"></div><div class="refnamediv"><h2>Name</h2><p>VISHNU.setSystemThreshold — sets a threshold on a machine of a system</p></div><div class="refsynopsisdiv" title="Synopsis"><h2>Synopsis</h2><div class="funcsynopsis"><table border="0" summary="Function synopsis" cellspacing="0" cellpadding="0" class="funcprototype-table"><tr><td><code class="funcdef"><b class="fsfunc">ret=VISHNU.setSystemThreshold</b>(</code></td><td><var class="pdparam">sessionKey</var>, </td><td> </td></tr><tr><td> </td><td><var class="pdparam">threshold</var><code>)</code>;</td><td> </td></tr></table><div class="paramdef-list"><code>string <var class="pdparam">sessionKey</var></code>;<br /><code>Threshold <var class="pdparam">threshold</var></code>;</div><div class="funcprototype-spacer"> </div></div></div><div class="refsect1" title="DESCRIPTION"><a id="description"></a><h2>DESCRIPTION</h2><p>This function allows an administrator to set a threshold. Each time an IMS server records the state of a machine, it checks the values defined, if a threshold is reached (over a use of the cpu or under the free memory or diskspace available), the administrator responsible for the threshold will receive an mail. These threshold will help the administrator to be aware of critical situations on a machine. Warning, a mail is sent for each time the threshold is reached, if a value swings around a threshold, the administrator may receive lots of emails depending on the update frequency.</p></div><div class="refsect1" title="ARGUMENTS"><a id="arguments"></a><h2>ARGUMENTS</h2><div class="variablelist"><dl><dt><span class="term"><span class="emphasis"><em>sessionKey</em></span></span></dt><dd><p>Input argument. The session key.</p></dd><dt><span class="term"><span class="emphasis"><em>threshold</em></span></span></dt><dd><p>Input argument. The threshold to set.</p></dd></dl></div></div><div class="refsect1" title="RETURNED OBJECTS"><a id="returned objects"></a><h2>RETURNED OBJECTS</h2><div class="variablelist"><dl><dt><span class="term"><span class="emphasis"><em>errorCode (integer)</em></span></span></dt><dd><p>Output parameter. Contains 0 on success and the error code on failure.</p></dd><dt></dt><dd></dd></dl></div></div><div class="refsect1" title="EXCEPTIONS"><a id="exceptions"></a><h2>EXCEPTIONS</h2><p>The following exceptions may be thrown: </p><div class="variablelist"><dl><dt><span class="term">SystemException("The database generated an error" [2])</span></dt><dd></dd><dt><span class="term">UserException("If a parameter is invalid" [10])</span></dt><dd></dd></dl></div></div></div><div class="refentry" title="VISHNU.getSystemThreshold"><div class="refentry.separator"><hr /></div><a id="idp1377400"></a><div class="titlepage"></div><div class="refnamediv"><h2>Name</h2><p>VISHNU.getSystemThreshold — gets a system threshold on a machine</p></div><div class="refsynopsisdiv" title="Synopsis"><h2>Synopsis</h2><div class="funcsynopsis"><table border="0" summary="Function synopsis" cellspacing="0" cellpadding="0" class="funcprototype-table"><tr><td><code class="funcdef"><b class="fsfunc">ret, value=VISHNU.getSystemThreshold</b>(</code></td><td><var class="pdparam">sessionKey</var>, </td><td> </td></tr><tr><td> </td><td><var class="pdparam">options</var><code>)</code>;</td><td> </td></tr></table><div class="paramdef-list"><code>string <var class="pdparam">sessionKey</var></code>;<br /><code>ThresholdOp <var class="pdparam">options</var></code>;</div><div class="funcprototype-spacer"> </div></div></div><div class="refsect1" title="DESCRIPTION"><a id="description"></a><h2>DESCRIPTION</h2><p>This function allows an administrator to get the thresholds that may be defined on a machine. This may be used to check the parameters defined to monitor the machine.
Each time a threshold is reached, a mail is sent. So checking the values of the threshold is important for the administrator to make sure they will not get tons of emails.</p></div><div class="refsect1" title="ARGUMENTS"><a id="arguments"></a><h2>ARGUMENTS</h2><div class="variablelist"><dl><dt><span class="term"><span class="emphasis"><em>sessionKey</em></span></span></dt><dd><p>Input argument. The session key.</p></dd><dt><span class="term"><span class="emphasis"><em>value</em></span></span></dt><dd><p>Output argument. The thresholds value.</p></dd><dt><span class="term"><span class="emphasis"><em>options</em></span></span></dt><dd><p>Input argument. The options for the threshold.</p></dd></dl></div></div><div class="refsect1" title="RETURNED OBJECTS"><a id="returned objects"></a><h2>RETURNED OBJECTS</h2><div class="variablelist"><dl><dt><span class="term"><span class="emphasis"><em>errorCode (integer)</em></span></span></dt><dd><p>Output parameter. Contains 0 on success and the error code on failure.</p></dd><dt></dt><dd></dd></dl></div></div><div class="refsect1" title="EXCEPTIONS"><a id="exceptions"></a><h2>EXCEPTIONS</h2><p>The following exceptions may be thrown: </p><div class="variablelist"><dl><dt><span class="term">SystemException("The database generated an error" [2])</span></dt><dd></dd><dt><span class="term">UserException("If a parameter is invalid" [10])</span></dt><dd></dd></dl></div></div></div><div class="refentry" title="VISHNU.defineUserIdentifier"><div class="refentry.separator"><hr /></div><a id="idp1388616"></a><div class="titlepage"></div><div class="refnamediv"><h2>Name</h2><p>VISHNU.defineUserIdentifier — defines the shape of the identifiers automatically generated for the users</p></div><div class="refsynopsisdiv" title="Synopsis"><h2>Synopsis</h2><div class="funcsynopsis"><table border="0" summary="Function synopsis" cellspacing="0" cellpadding="0" class="funcprototype-table"><tr><td><code class="funcdef"><b class="fsfunc">ret=VISHNU.defineUserIdentifier</b>(</code></td><td><var class="pdparam">sessionKey</var>, </td><td> </td></tr><tr><td> </td><td><var class="pdparam">format</var><code>)</code>;</td><td> </td></tr></table><div class="paramdef-list"><code>string <var class="pdparam">sessionKey</var></code>;<br /><code>string <var class="pdparam">format</var></code>;</div><div class="funcprototype-spacer"> </div></div></div><div class="refsect1" title="DESCRIPTION"><a id="description"></a><h2>DESCRIPTION</h2><p>This function allows an administrator to define the format of the identifier that will be automatically generated for the users. Once the format is defined, each time a user is added, the format will be used to define its identifier.
The format can contain various variables, a variable is preceded by the '$' symbol. Moreover, the counter variable '$CPT' MUST be present in the format, otherwise it will be rejected.
The available variables are: 
$CPT: a counter
$NAME: The name of the user
$UNAME: The name of the user
$DAY: The day the user is added
$MONTH: The month the user is added
$YEAR: The year the user is added
$SITE: The site the user is
$TYPE: The 'U' symb to remind it is a user id</p></div><div class="refsect1" title="ARGUMENTS"><a id="arguments"></a><h2>ARGUMENTS</h2><div class="variablelist"><dl><dt><span class="term"><span class="emphasis"><em>sessionKey</em></span></span></dt><dd><p>Input argument. The session key.</p></dd><dt><span class="term"><span class="emphasis"><em>format</em></span></span></dt><dd><p>Input argument. The new format to use.</p></dd></dl></div></div><div class="refsect1" title="RETURNED OBJECTS"><a id="returned objects"></a><h2>RETURNED OBJECTS</h2><div class="variablelist"><dl><dt><span class="term"><span class="emphasis"><em>errorCode (integer)</em></span></span></dt><dd><p>Output parameter. Contains 0 on success and the error code on failure.</p></dd><dt></dt><dd></dd></dl></div></div><div class="refsect1" title="EXCEPTIONS"><a id="exceptions"></a><h2>EXCEPTIONS</h2><p>The following exceptions may be thrown: </p><div class="variablelist"><dl><dt><span class="term">SystemException("The database generated an error" [2])</span></dt><dd></dd><dt><span class="term">UserException("If a parameter is invalid" [10])</span></dt><dd></dd></dl></div></div></div><div class="refentry" title="VISHNU.defineMachineIdentifier"><div class="refentry.separator"><hr /></div><a id="idp1400000"></a><div class="titlepage"></div><div class="refnamediv"><h2>Name</h2><p>VISHNU.defineMachineIdentifier — defines the shape of the identifiers automatically generated for the machines</p></div><div class="refsynopsisdiv" title="Synopsis"><h2>Synopsis</h2><div class="funcsynopsis"><table border="0" summary="Function synopsis" cellspacing="0" cellpadding="0" class="funcprototype-table"><tr><td><code class="funcdef"><b class="fsfunc">ret=VISHNU.defineMachineIdentifier</b>(</code></td><td><var class="pdparam">sessionKey</var>, </td><td> </td></tr><tr><td> </td><td><var class="pdparam">format</var><code>)</code>;</td><td> </td></tr></table><div class="paramdef-list"><code>string <var class="pdparam">sessionKey</var></code>;<br /><code>string <var class="pdparam">format</var></code>;</div><div class="funcprototype-spacer"> </div></div></div><div class="refsect1" title="DESCRIPTION"><a id="description"></a><h2>DESCRIPTION</h2><p>This function allows an administrator to define the format of the identifier that will be automatically generated for the machines. Once the format is defined, each time a machine is added, the format will be used to define its identifier.
The format can contain various variables, a variable is preceded by the '$' symbol. Moreover, the counter variable '$CPT' MUST be present in the format, otherwise it will be rejected.
The available variables are: 
$CPT: a counter
$MANAME: The hostname of the machine
$NAME: The hostname of the machine
$DAY: The day the machine is added
$MONTH: The month the machine is added
$YEAR: The year the machine is added
$SITE: The site the machine is
$TYPE: The 'M' symb to remind it is a machine id</p></div><div class="refsect1" title="ARGUMENTS"><a id="arguments"></a><h2>ARGUMENTS</h2><div class="variablelist"><dl><dt><span class="term"><span class="emphasis"><em>sessionKey</em></span></span></dt><dd><p>Input argument. The session key.</p></dd><dt><span class="term"><span class="emphasis"><em>format</em></span></span></dt><dd><p>Input argument. The new format to use.</p></dd></dl></div></div><div class="refsect1" title="RETURNED OBJECTS"><a id="returned objects"></a><h2>RETURNED OBJECTS</h2><div class="variablelist"><dl><dt><span class="term"><span class="emphasis"><em>errorCode (integer)</em></span></span></dt><dd><p>Output parameter. Contains 0 on success and the error code on failure.</p></dd><dt></dt><dd></dd></dl></div></div><div class="refsect1" title="EXCEPTIONS"><a id="exceptions"></a><h2>EXCEPTIONS</h2><p>The following exceptions may be thrown: </p><div class="variablelist"><dl><dt><span class="term">SystemException("The database generated an error" [2])</span></dt><dd></dd><dt><span class="term">UserException("If a parameter is invalid" [10])</span></dt><dd></dd></dl></div></div></div><div class="refentry" title="VISHNU.defineJobIdentifier"><div class="refentry.separator"><hr /></div><a id="idp1410752"></a><div class="titlepage"></div><div class="refnamediv"><h2>Name</h2><p>VISHNU.defineJobIdentifier — defines the shape of the identifiers automatically generated for the jobs</p></div><div class="refsynopsisdiv" title="Synopsis"><h2>Synopsis</h2><div class="funcsynopsis"><table border="0" summary="Function synopsis" cellspacing="0" cellpadding="0" class="funcprototype-table"><tr><td><code class="funcdef"><b class="fsfunc">ret=VISHNU.defineJobIdentifier</b>(</code></td><td><var class="pdparam">sessionKey</var>, </td><td> </td></tr><tr><td> </td><td><var class="pdparam">format</var><code>)</code>;</td><td> </td></tr></table><div class="paramdef-list"><code>string <var class="pdparam">sessionKey</var></code>;<br /><code>string <var class="pdparam">format</var></code>;</div><div class="funcprototype-spacer"> </div></div></div><div class="refsect1" title="DESCRIPTION"><a id="description"></a><h2>DESCRIPTION</h2><p>This function allows an administrator to define the format of the identifier that will be automatically generated for the jobs submited through TMS. Once the format is defined, each time a job is submitted, the format will be used to define its identifier.
The format can contain various variables, a variable is preceded by the '$' symbol. Moreover, the counter variable '$CPT' MUST be present in the format, otherwise it will be rejected.
The available variables are: 
$CPT: a counter
$DAY: The day the job is submitted
$MONTH: The month the job is submitted
$YEAR: The year the job is submitted
$TYPE: The 'J' symb to remind it is a job id</p></div><div class="refsect1" title="ARGUMENTS"><a id="arguments"></a><h2>ARGUMENTS</h2><div class="variablelist"><dl><dt><span class="term"><span class="emphasis"><em>sessionKey</em></span></span></dt><dd><p>Input argument. The session key.</p></dd><dt><span class="term"><span class="emphasis"><em>format</em></span></span></dt><dd><p>Input argument. The new format to use.</p></dd></dl></div></div><div class="refsect1" title="RETURNED OBJECTS"><a id="returned objects"></a><h2>RETURNED OBJECTS</h2><div class="variablelist"><dl><dt><span class="term"><span class="emphasis"><em>errorCode (integer)</em></span></span></dt><dd><p>Output parameter. Contains 0 on success and the error code on failure.</p></dd><dt></dt><dd></dd></dl></div></div><div class="refsect1" title="EXCEPTIONS"><a id="exceptions"></a><h2>EXCEPTIONS</h2><p>The following exceptions may be thrown: </p><div class="variablelist"><dl><dt><span class="term">SystemException("The database generated an error" [2])</span></dt><dd></dd><dt><span class="term">UserException("If a parameter is invalid" [10])</span></dt><dd></dd></dl></div></div></div><div class="refentry" title="VISHNU.defineTransferIdentifier"><div class="refentry.separator"><hr /></div><a id="idp1421384"></a><div class="titlepage"></div><div class="refnamediv"><h2>Name</h2><p>VISHNU.defineTransferIdentifier — defines the shape of the identifiers automatically generated for the file transfers</p></div><div class="refsynopsisdiv" title="Synopsis"><h2>Synopsis</h2><div class="funcsynopsis"><table border="0" summary="Function synopsis" cellspacing="0" cellpadding="0" class="funcprototype-table"><tr><td><code class="funcdef"><b class="fsfunc">ret=VISHNU.defineTransferIdentifier</b>(</code></td><td><var class="pdparam">sessionKey</var>, </td><td> </td></tr><tr><td> </td><td><var class="pdparam">format</var><code>)</code>;</td><td> </td></tr></table><div class="paramdef-list"><code>string <var class="pdparam">sessionKey</var></code>;<br /><code>string <var class="pdparam">format</var></code>;</div><div class="funcprototype-spacer"> </div></div></div><div class="refsect1" title="DESCRIPTION"><a id="description"></a><h2>DESCRIPTION</h2><p>This function allows an administrator to define the format of the identifier that will be automatically generated for the file transfers. Once the format is defined, each time a file transfer is done, the format will be used to define its identifier.
The format can contain various variables, a variable is preceded by the '$' symbol. Moreover, the counter variable '$CPT' MUST be present in the format, otherwise it will be rejected.
The available variables are: 
$CPT: a counter
$DAY: The day the file transfer is done
$MONTH: The month the file transfer is done
$YEAR: The year the file transfer is done
$TYPE: The 'F' symb to remind it is a file transfer id</p></div><div class="refsect1" title="ARGUMENTS"><a id="arguments"></a><h2>ARGUMENTS</h2><div class="variablelist"><dl><dt><span class="term"><span class="emphasis"><em>sessionKey</em></span></span></dt><dd><p>Input argument. The session key.</p></dd><dt><span class="term"><span class="emphasis"><em>format</em></span></span></dt><dd><p>Input argument. The new format to use.</p></dd></dl></div></div><div class="refsect1" title="RETURNED OBJECTS"><a id="returned objects"></a><h2>RETURNED OBJECTS</h2><div class="variablelist"><dl><dt><span class="term"><span class="emphasis"><em>errorCode (integer)</em></span></span></dt><dd><p>Output parameter. Contains 0 on success and the error code on failure.</p></dd><dt></dt><dd></dd></dl></div></div><div class="refsect1" title="EXCEPTIONS"><a id="exceptions"></a><h2>EXCEPTIONS</h2><p>The following exceptions may be thrown: </p><div class="variablelist"><dl><dt><span class="term">SystemException("The database generated an error" [2])</span></dt><dd></dd><dt><span class="term">UserException("If a parameter is invalid" [10])</span></dt><dd></dd></dl></div></div></div><div class="refentry" title="VISHNU.defineAuthIdentifier"><div class="refentry.separator"><hr /></div><a id="idp1432064"></a><div class="titlepage"></div><div class="refnamediv"><h2>Name</h2><p>VISHNU.defineAuthIdentifier — defines the shape of the identifiers automatically generated for the authentication system</p></div><div class="refsynopsisdiv" title="Synopsis"><h2>Synopsis</h2><div class="funcsynopsis"><table border="0" summary="Function synopsis" cellspacing="0" cellpadding="0" class="funcprototype-table"><tr><td><code class="funcdef"><b class="fsfunc">ret=VISHNU.defineAuthIdentifier</b>(</code></td><td><var class="pdparam">sessionKey</var>, </td><td> </td></tr><tr><td> </td><td><var class="pdparam">format</var><code>)</code>;</td><td> </td></tr></table><div class="paramdef-list"><code>string <var class="pdparam">sessionKey</var></code>;<br /><code>string <var class="pdparam">format</var></code>;</div><div class="funcprototype-spacer"> </div></div></div><div class="refsect1" title="DESCRIPTION"><a id="description"></a><h2>DESCRIPTION</h2><p>This function allows an administrator to define the format of the identifier that will be automatically generated for the authentication. Once the format is defined, each time an authentication system is added, the format will be used to define its identifier.
The format can contain various variables, a variable is preceded by the '$' symbol. Moreover, the counter variable '$CPT' MUST be present in the format, otherwise it will be rejected.
The available variables are: 
$CPT: a counter
$DAY: The day the file transfer is done
$MONTH: The month the file transfer is done
$YEAR: The year the file transfer is done
$TYPE: The 'F' symb to remind it is a file transfer id</p></div><div class="refsect1" title="ARGUMENTS"><a id="arguments"></a><h2>ARGUMENTS</h2><div class="variablelist"><dl><dt><span class="term"><span class="emphasis"><em>sessionKey</em></span></span></dt><dd><p>Input argument. The session key.</p></dd><dt><span class="term"><span class="emphasis"><em>format</em></span></span></dt><dd><p>Input argument. The new format to use.</p></dd></dl></div></div><div class="refsect1" title="RETURNED OBJECTS"><a id="returned objects"></a><h2>RETURNED OBJECTS</h2><div class="variablelist"><dl><dt><span class="term"><span class="emphasis"><em>errorCode (integer)</em></span></span></dt><dd><p>Output parameter. Contains 0 on success and the error code on failure.</p></dd><dt></dt><dd></dd></dl></div></div><div class="refsect1" title="EXCEPTIONS"><a id="exceptions"></a><h2>EXCEPTIONS</h2><p>The following exceptions may be thrown: </p><div class="variablelist"><dl><dt><span class="term">SystemException("The database generated an error" [2])</span></dt><dd></dd><dt><span class="term">UserException("If a parameter is invalid" [10])</span></dt><dd></dd></dl></div></div></div><div class="refentry" title="VISHNU.loadShed"><div class="refentry.separator"><hr /></div><a id="idp1443416"></a><div class="titlepage"></div><div class="refnamediv"><h2>Name</h2><p>VISHNU.loadShed — sheds load on a machine</p></div><div class="refsynopsisdiv" title="Synopsis"><h2>Synopsis</h2><div class="funcsynopsis"><table border="0" summary="Function synopsis" cellspacing="0" cellpadding="0" class="funcprototype-table"><tr><td><code class="funcdef"><b class="fsfunc">ret=VISHNU.loadShed</b>(</code></td><td><var class="pdparam">sessionKey</var>, </td><td> </td></tr><tr><td> </td><td><var class="pdparam">machineId</var>, </td><td> </td></tr><tr><td> </td><td><var class="pdparam">loadShedType</var><code>)</code>;</td><td> </td></tr></table><div class="paramdef-list"><code>string <var class="pdparam">sessionKey</var></code>;<br /><code>string <var class="pdparam">machineId</var></code>;<br /><code>LoadShedType <var class="pdparam">loadShedType</var></code>;</div><div class="funcprototype-spacer"> </div></div></div><div class="refsect1" title="DESCRIPTION"><a id="description"></a><h2>DESCRIPTION</h2><p>This function allows an administrator to shed load on a machine. Two modes are available: SOFT mode will cancel all the submitted jobs and file transfers for all VISHNU users (Note that jobs and file transfers not initiated through VISHNU will not be impacted). HARD mode will additionally stop all the VISHNU processes on the machine. If a user without administrator rights uses this function, all the user's jobs and file transfers will be cancelled on the machine. In the HARD mode, the stopped processes will not be automatically restarted.
Type values:
HARD = 1
SOFT   = 2</p></div><div class="refsect1" title="ARGUMENTS"><a id="arguments"></a><h2>ARGUMENTS</h2><div class="variablelist"><dl><dt><span class="term"><span class="emphasis"><em>sessionKey</em></span></span></dt><dd><p>Input argument. The session key.</p></dd><dt><span class="term"><span class="emphasis"><em>machineId</em></span></span></dt><dd><p>Input argument. The id of the machine to stop.</p></dd><dt><span class="term"><span class="emphasis"><em>loadShedType</em></span></span></dt><dd><p>Input argument. Selects a load shedding mode (SOFT: stops all services and they can be restarted, HARD: stops all services, they cannot be restarted).</p></dd></dl></div></div><div class="refsect1" title="RETURNED OBJECTS"><a id="returned objects"></a><h2>RETURNED OBJECTS</h2><div class="variablelist"><dl><dt><span class="term"><span class="emphasis"><em>errorCode (integer)</em></span></span></dt><dd><p>Output parameter. Contains 0 on success and the error code on failure.</p></dd><dt></dt><dd></dd></dl></div></div><div class="refsect1" title="EXCEPTIONS"><a id="exceptions"></a><h2>EXCEPTIONS</h2><p>The following exceptions may be thrown: </p><div class="variablelist"><dl><dt><span class="term">SystemException("The database generated an error" [2])</span></dt><dd></dd><dt><span class="term">UserException("If a parameter is invalid" [10])</span></dt><dd></dd><dt><span class="term">IMSVishnuException("If a component is unavailable" [301])</span></dt><dd></dd></dl></div></div></div><div class="refentry" title="VISHNU.setUpdateFrequency"><div class="refentry.separator"><hr /></div><a id="idp1455896"></a><div class="titlepage"></div><div class="refnamediv"><h2>Name</h2><p>VISHNU.setUpdateFrequency — sets the update frequency of the IMS tables</p></div><div class="refsynopsisdiv" title="Synopsis"><h2>Synopsis</h2><div class="funcsynopsis"><table border="0" summary="Function synopsis" cellspacing="0" cellpadding="0" class="funcprototype-table"><tr><td><code class="funcdef"><b class="fsfunc">ret=VISHNU.setUpdateFrequency</b>(</code></td><td><var class="pdparam">sessionKey</var>, </td><td> </td></tr><tr><td> </td><td><var class="pdparam">freq</var><code>)</code>;</td><td> </td></tr></table><div class="paramdef-list"><code>string <var class="pdparam">sessionKey</var></code>;<br /><code>int <var class="pdparam">freq</var></code>;</div><div class="funcprototype-spacer"> </div></div></div><div class="refsect1" title="DESCRIPTION"><a id="description"></a><h2>DESCRIPTION</h2><p>This function allows an admin to set the update frequency. This frequency corresponds to how often the state of the machines is automatically polled by the IMS server. The value must be in seconds.</p></div><div class="refsect1" title="ARGUMENTS"><a id="arguments"></a><h2>ARGUMENTS</h2><div class="variablelist"><dl><dt><span class="term"><span class="emphasis"><em>sessionKey</em></span></span></dt><dd><p>Input argument. The session key.</p></dd><dt><span class="term"><span class="emphasis"><em>freq</em></span></span></dt><dd><p>Input argument. Frequency the data are updated, in second.</p></dd></dl></div></div><div class="refsect1" title="RETURNED OBJECTS"><a id="returned objects"></a><h2>RETURNED OBJECTS</h2><div class="variablelist"><dl><dt><span class="term"><span class="emphasis"><em>errorCode (integer)</em></span></span></dt><dd><p>Output parameter. Contains 0 on success and the error code on failure.</p></dd><dt></dt><dd></dd></dl></div></div><div class="refsect1" title="EXCEPTIONS"><a id="exceptions"></a><h2>EXCEPTIONS</h2><p>The following exceptions may be thrown: </p><div class="variablelist"><dl><dt><span class="term">SystemException("The database generated an error" [2])</span></dt><dd></dd><dt><span class="term">UserException("If a parameter is invalid" [10])</span></dt><dd></dd></dl></div></div></div><div class="refentry" title="VISHNU.stop"><div class="refentry.separator"><hr /></div><a id="idp1466072"></a><div class="titlepage"></div><div class="refnamediv"><h2>Name</h2><p>VISHNU.stop — To stop (and do not try to relaunch) a SeD</p></div><div class="refsynopsisdiv" title="Synopsis"><h2>Synopsis</h2><div class="funcsynopsis"><table border="0" summary="Function synopsis" cellspacing="0" cellpadding="0" class="funcprototype-table"><tr><td><code class="funcdef"><b class="fsfunc">ret=VISHNU.stop</b>(</code></td><td><var class="pdparam">sessionKey</var>, </td><td> </td></tr><tr><td> </td><td><var class="pdparam">process</var><code>)</code>;</td><td> </td></tr></table><div class="paramdef-list"><code>string <var class="pdparam">sessionKey</var></code>;<br /><code>Process <var class="pdparam">process</var></code>;</div><div class="funcprototype-spacer"> </div></div></div><div class="refsect1" title="DESCRIPTION"><a id="description"></a><h2>DESCRIPTION</h2><p>This function allows an admin to stop a VISHNU server on a machine. The stopped process will not be restarted automatically.
The important parameters in the process are the names and the machine.
The processName must be UMS, TMS, IMS or FMS , in upper case.
</p></div><div class="refsect1" title="ARGUMENTS"><a id="arguments"></a><h2>ARGUMENTS</h2><div class="variablelist"><dl><dt><span class="term"><span class="emphasis"><em>sessionKey</em></span></span></dt><dd><p>Input argument. The session key.</p></dd><dt><span class="term"><span class="emphasis"><em>process</em></span></span></dt><dd><p>Input argument. The process to stop and do not try to restart anymore.</p></dd></dl></div></div><div class="refsect1" title="RETURNED OBJECTS"><a id="returned objects"></a><h2>RETURNED OBJECTS</h2><div class="variablelist"><dl><dt><span class="term"><span class="emphasis"><em>errorCode (integer)</em></span></span></dt><dd><p>Output parameter. Contains 0 on success and the error code on failure.</p></dd><dt></dt><dd></dd></dl></div></div><div class="refsect1" title="EXCEPTIONS"><a id="exceptions"></a><h2>EXCEPTIONS</h2><p>The following exceptions may be thrown: </p><div class="variablelist"><dl><dt><span class="term">SystemException("The database generated an error" [2])</span></dt><dd></dd><dt><span class="term">UserException("If a parameter is invalid" [10])</span></dt><dd></dd></dl></div></div></div><div class="refentry" title="VISHNU.restart"><div class="refentry.separator"><hr /></div><a id="idp1476272"></a><div class="titlepage"></div><div class="refnamediv"><h2>Name</h2><p>VISHNU.restart — To restart a SeD or a MA</p></div><div class="refsynopsisdiv" title="Synopsis"><h2>Synopsis</h2><div class="funcsynopsis"><table border="0" summary="Function synopsis" cellspacing="0" cellpadding="0" class="funcprototype-table"><tr><td><code class="funcdef"><b class="fsfunc">ret=VISHNU.restart</b>(</code></td><td><var class="pdparam">sessionKey</var>, </td><td> </td></tr><tr><td> </td><td><var class="pdparam">machineId</var>, </td><td> </td></tr><tr><td> </td><td><var class="pdparam">options</var><code>)</code>;</td><td> </td></tr></table><div class="paramdef-list"><code>string <var class="pdparam">sessionKey</var></code>;<br /><code>string <var class="pdparam">machineId</var></code>;<br /><code>RestartOp <var class="pdparam">options</var></code>;</div><div class="funcprototype-spacer"> </div></div></div><div class="refsect1" title="DESCRIPTION"><a id="description"></a><h2>DESCRIPTION</h2><p>This function allows an admin to restart a VISHNU server on a machine. Warning when restarting a server, first it is tried to stop it, so if one is running it is stopped and then another is restarted.</p></div><div class="refsect1" title="ARGUMENTS"><a id="arguments"></a><h2>ARGUMENTS</h2><div class="variablelist"><dl><dt><span class="term"><span class="emphasis"><em>sessionKey</em></span></span></dt><dd><p>Input argument. The session key.</p></dd><dt><span class="term"><span class="emphasis"><em>machineId</em></span></span></dt><dd><p>Input argument. The id of the machine where to restart.</p></dd><dt><span class="term"><span class="emphasis"><em>options</em></span></span></dt><dd><p>Input argument. The option for the restart.</p></dd></dl></div></div><div class="refsect1" title="RETURNED OBJECTS"><a id="returned objects"></a><h2>RETURNED OBJECTS</h2><div class="variablelist"><dl><dt><span class="term"><span class="emphasis"><em>errorCode (integer)</em></span></span></dt><dd><p>Output parameter. Contains 0 on success and the error code on failure.</p></dd><dt></dt><dd></dd></dl></div></div><div class="refsect1" title="EXCEPTIONS"><a id="exceptions"></a><h2>EXCEPTIONS</h2><p>The following exceptions may be thrown: </p><div class="variablelist"><dl><dt><span class="term">SystemException("The database generated an error" [2])</span></dt><dd></dd><dt><span class="term">UserException("If a parameter is invalid" [10])</span></dt><dd></dd></dl></div></div></div><div class="refentry" title="VISHNU.defineWorkIdentifier"><div class="refentry.separator"><hr /></div><a id="idp1487584"></a><div class="titlepage"></div><div class="refnamediv"><h2>Name</h2><p>VISHNU.defineWorkIdentifier — defines the shape of the identifiers automatically generated for the work</p></div><div class="refsynopsisdiv" title="Synopsis"><h2>Synopsis</h2><div class="funcsynopsis"><table border="0" summary="Function synopsis" cellspacing="0" cellpadding="0" class="funcprototype-table"><tr><td><code class="funcdef"><b class="fsfunc">ret=VISHNU.defineWorkIdentifier</b>(</code></td><td><var class="pdparam">sessionKey</var>, </td><td> </td></tr><tr><td> </td><td><var class="pdparam">format</var><code>)</code>;</td><td> </td></tr></table><div class="paramdef-list"><code>string <var class="pdparam">sessionKey</var></code>;<br /><code>string <var class="pdparam">format</var></code>;</div><div class="funcprototype-spacer"> </div></div></div><div class="refsect1" title="DESCRIPTION"><a id="description"></a><h2>DESCRIPTION</h2><p>This function allows an administrator to define the format of the identifier that will be automatically generated for the work. Once the format is defined, each time a work is added, the format will be used to define its identifier.
The format can contain various variables, a variable is preceded by the '$' symbol. Moreover, the counter variable '$CPT' MUST be present in the format, otherwise it will be rejected.
The available variables are: 
$CPT: a counter
$DAY: The day the file transfer is done
$MONTH: The month the file transfer is done
$YEAR: The year the file transfer is done
$TYPE: The 'W' symb to remind it is a file transfer id
$NAME: The name of the work</p></div><div class="refsect1" title="ARGUMENTS"><a id="arguments"></a><h2>ARGUMENTS</h2><div class="variablelist"><dl><dt><span class="term"><span class="emphasis"><em>sessionKey</em></span></span></dt><dd><p>Input argument. The session key.</p></dd><dt><span class="term"><span class="emphasis"><em>format</em></span></span></dt><dd><p>Input argument. The new format to use.</p></dd></dl></div></div><div class="refsect1" title="RETURNED OBJECTS"><a id="returned objects"></a><h2>RETURNED OBJECTS</h2><div class="variablelist"><dl><dt><span class="term"><span class="emphasis"><em>errorCode (integer)</em></span></span></dt><dd><p>Output parameter. Contains 0 on success and the error code on failure.</p></dd><dt></dt><dd></dd></dl></div></div><div class="refsect1" title="EXCEPTIONS"><a id="exceptions"></a><h2>EXCEPTIONS</h2><p>The following exceptions may be thrown: </p><div class="variablelist"><dl><dt><span class="term">SystemException("The database generated an error" [2])</span></dt><dd></dd><dt><span class="term">UserException("If a parameter is invalid" [10])</span></dt><dd></dd></dl></div></div></div></div></div></body></html>
